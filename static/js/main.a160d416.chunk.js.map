{"version":3,"sources":["pages/app/app.styles.jsx","components/side-panel/side-panel.styles.jsx","firebase/firebase.utils.js","redux/user/user.selectors.js","redux/user/user.types.js","redux/user/user.actions.js","redux/theme/theme.types.js","redux/theme/theme.selectors.js","components/user-status-card/user-status-card.styles.jsx","components/change-avatar-modal/change-avatar-modal.styles.jsx","components/change-avatar-modal/change-avatar-modal.component.jsx","components/user-status-card/user-status-card.component.jsx","redux/theme/theme.actions.js","redux/chat/chat.types.js","redux/chat/chat.actions.js","redux/chat/chat.selectors.js","components/starred/starred.styles.jsx","components/starred/starred.component.jsx","components/add-channel-modal/add-channel-modal.styles.jsx","components/add-channel-modal/add-channel-modal.component.jsx","components/spinner/spinner.styles.jsx","components/spinner/spinner.component.jsx","components/channels/channels.styles.jsx","components/channels/channels.component.jsx","components/direct-messages/direct-messages.styles.jsx","components/direct-messages/direct-messages.component.jsx","components/side-panel/side-panel.component.jsx","components/messages-panel/messages-panel.styles.jsx","components/channel-header/channel-header.styles.jsx","components/channel-header/channel-header.component.jsx","components/messages/messages.styles.jsx","components/message/message.styles.jsx","components/message/message.component.jsx","components/typing-users/typing-users.styles.jsx","components/typing-users/typing-users.component.jsx","components/messages/messages.component.jsx","components/file-upload-modal/file-upload-modal.styles.jsx","components/file-upload-modal/file-upload-modal.component.jsx","components/message-input/message-input.styles.jsx","components/message-input/message-input.component.jsx","components/messages-panel/messages-panel.component.jsx","components/meta-panel/meta-panel.styles.jsx","components/meta-panel/meta-panel.component.jsx","pages/app/app.component.jsx","serviceWorker.js","components/custom-theme-provider/custom-theme-provider.component.jsx","pages/register/register.styles.jsx","components/custom-button/custom-button.styles.jsx","components/custom-button/custom-button.component.jsx","components/custom-input/custom-input.styles.jsx","components/custom-input/custom-input.component.jsx","components/form-error/form.error.styles.jsx","components/form-error/form-error.component.jsx","components/custom-link/custom-link.styles.jsx","components/custom-link/custom-link.component.jsx","resources/images/avatar.blob.js","pages/register/register.component.jsx","pages/login/login.styles.jsx","pages/login/login.component.jsx","redux/theme/theme.data.js","redux/theme/theme.reducer.js","redux/user/user.reducer.js","redux/chat/chat.reducer.js","redux/root.reducer.js","redux/chat/chat.utils.js","redux/chat/chat.sagas.js","redux/root.saga.js","redux/store.js","index.js"],"names":["AppContainer","styled","div","theme","bg","SidePanelContainer","sidePanel","shadow","sidebarShowing","CloseSidebar","closeButton","text","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","analytics","auth","firestore","database","storage","selectUser","state","user","selectCurrentUser","createSelector","currentUser","selectUserIsLoading","isLoading","selectUserStatus","status","UserActionTypes","SET_CURRENT_USER","CLEAR_CURRENT_USER","SET_USER_IS_LOADING","SET_USER_STATUS","SET_STARRED_CHANNELS","setCurrentUser","type","payload","ThemeActionTypes","SET_THEME","selectCurrentTheme","currentTheme","UserAndOptionsContainer","userStatusCard","opened","UserStatusCardContainer","UserAvatar","UserInfo","Username","p","UserStatus","subText","Indicator","statusColors","online","away","offline","OptionsToggle","Line","hr","icon","Options","ul","optionBg","Dots","Dot","Circle","name","opacityAnimation","css","modal","showing","scaleAnimation","AvatarModalContainer","Modal","form","modalBg","Heading","h2","textPrimary","Editor","Inputs","Input","textSecondary","Button","button","ChangeAvatarModal","avatarImage","avatarImageData","scale","handlePropogation","event","stopPropagation","handleSubmit","preventDefault","confirm","props","avatarEditor","getImageScaledToCanvas","toBlob","avatarBlob","handleChange","files","target","file","length","reader","FileReader","readAsDataURL","addEventListener","setState","result","setScale","value","setEditorRef","editor","this","close","onClick","onSubmit","ref","image","onImageChange","onImageCrop","min","max","onChange","htmlFor","id","accept","className","React","Component","ArrowSVG","useTheme","xmlns","viewBox","fill","d","mapStateToProps","createStructuredSelector","connect","dispatch","setUserStatus","setTheme","themeName","useState","setOpened","statusBox","setStatusBox","showModal","handleStatusChange","child","uid","set","err","console","error","uploadCroppedImage","imageBlob","put","contentType","then","snapshot","getDownloadURL","url","window","location","reload","displayName","photoURL","src","alt","color","signOut","x","log","ChatActionTypes","SET_CHANNELS","SET_CURRENT_CHANNEL","UPDATE_CHANNEL_MEMBERS","SET_MESSAGE_SEARCH_FILTERS","SET_PRIVATE_CHANNEL","SET_OTHER_USERS_STATUS","TOGGLE_SIDEBAR","TOGGLE_META","setChannels","channels","setCurrentChannel","channel","setPrivateChannel","isPrivate","toggleSidebar","boolean","toggleMeta","selectChat","chat","selectChannels","selectCurrentChannel","currentChannel","selectChannelMembers","channelMembers","selectMessageSearchFilters","messageSearchFilters","selectIsPrivateChannel","isPrivateChannel","selectOtherUsersStatus","otherUsersStatus","selectSidebarShowing","starredChannels","selectMetaShowing","metaShowing","StarredContainer","starred","StarredHeading","StarredList","StarredItem","li","selected","hover","PlaceholderText","Starred","setActiveChannel","activeChannel","changeChannel","getStarredChannels","filter","openModal","style","alignSelf","size","key","map","ModalContainer","AddChannelModal","about","formattedValue","replace","toLowerCase","startsWith","endsWith","substring","placeholder","SpinnerContainer","spinner","Loader","loaderFg","loaderBg","LoadingText","fontSize","Spinner","loadingText","ChannelsContainer","ChannelsHeading","ChannelsList","ChannelItem","Name","Notifications","span","notificationsBg","notificationsFg","Channels","channelName","channelDetails","channelsRef","collection","typingRef","unsubscribeChannelListener","notificationListeners","notifications","firstLoad","addListeners","unsubscribe","orderBy","onSnapshot","docs","doc","data","forEach","addNotificationListener","channelId","listener","handleNotifications","currentChannelId","lastTotal","index","findIndex","notification","lastKnownTotal","count","total","push","removeListeners","Object","keys","setFirstChannel","addChannel","newChannel","details","createdBy","avatar","createdAt","FieldValue","serverTimestamp","catch","handleClose","handleConfirm","remove","clearNotifications","updatedNotifications","getNotificationCount","backgroundColor","marginTop","DirectMessagesContainer","directMessages","DirectMessagesHeading","DirectMessagesList","DirectMessagesItem","User","Status","DirectMessages","users","usersListener","connectedRef","presenceRef","currentUserUid","userStatus","usersWithDetails","updateUsersStatus","on","val","onDisconnect","off","setOtherUsersStatus","usersPrescence","userId","addStatusToUser","updatedUsers","reduce","acc","concat","getChannelId","currentUserId","usersStatus","MessagesPanelContainer","ChannelHeaderContainer","channelHeader","ChannelInfo","SidebarButton","search","sidebarIcon","starIcon","About","Members","SearchFieldContainer","Search","SearchInput","input","InfoToggle","infoIcon","ChannelHeader","filters","usersRef","setFilters","unsubscribeStarredListener","setMessageSearchFilters","clearText","getStatusForDM","handleStar","starChannel","get","indexOf","splice","update","setStarredChannels","members","privateChannel","gridColumn","scrollbar","fg","fgHover","MessagesContainer","messages","Container","TypingContainer","EmptyPlaceholder","MessageContainer","Avatar","MessageInfo","message","Content","Message","content","timestamp","moment","toDate","fromNow","timeFromNow","TypingUsersContainer","typingUsers","itemBg","TypingUsers","typing","getTypingUsers","animationDelay","Messages","messageListeners","loading","scrollToBottom","messagesEnd","scrollIntoView","filterMessages","regex","RegExp","match","channelType","updateMembers","countUniqueMembers","getDetailsForMembers","messageListener","channelMessages","displayMessages","i","ownMessage","uniqueMembers","includes","messagesCount","sort","prev","next","node","updateChannelMembers","FileModalContainer","FileUploadModal","iconCSS","EmojiPickerContainer","MessageInputContainer","InputField","messageInput","outline","AttachIcon","attachFg","EmojiIcon","emojiBg","SendIcon","sendBg","sendFg","ProgressBar","progress","EmojiPicker","Picker","MessageInput","storageRef","uploadeState","uploadTask","percentUploaded","errors","emojiPicker","sendMessage","getMessageRef","messageRef","createMessage","directMessagesRef","uploadeFile","fileUrl","createdMessage","getPath","pathToUpload","filePath","uuidv4","uploadState","snap","Math","round","bytesTransferred","totalBytes","downloadUrl","sendFileMessage","handleKeyDown","handleTogglePicker","colonsToUnicode","emoji","emojiIndex","emojis","unicode","native","handleAddEmoji","newMessage","colons","messageInputRef","focus","cancel","title","onSelect","width","themeObj","required","onKeyDown","autocomplete","disabled","role","aria-label","mapStatToProps","MetaPanelContainer","meta","Meta","CloseMeta","CreatedBy","CreatedOn","ActiveMembers","Member","Info","format","App","Boolean","hostname","children","RegisterPageContainer","RegisterFormContainer","h1","headingText","RegisterForm","LoginMessageContainer","bgDisabled","height","padding","CustomButton","errorStyles","InputContainer","field","Icon","focusBorder","InputIconContainer","CustomInput","iconSize","FormErrorContainer","Error","FormError","Link","RouterLink","link","CustomLink","blobFromBase64String","base64String","byteArray","Uint8Array","from","atob","split","char","charCodeAt","Blob","RegisterPage","username","email","password","confirmPassword","isFormValid","isFormEmpty","isPasswordValid","createUserWithEmailAndPassword","a","createdUser","avatarURL","getAvatarUrl","updateProfile","saveUser","finally","Promise","resolve","reject","inputName","some","FaUserAlt","MdEmail","handleInputError","FaLock","to","LoginPageContainer","LoginFormContainer","LoginForm","RegisterMessageContainer","LoginPage","signInWithEmailAndPassword","signedInUser","colors","red","littleLightRed","lightRed","green","pastelGreen","lightGreen","blue","lightBlue","gray","littleLightGray","littleLighterGray","lightGray","veryLightGray","black","littleDarkerBlack","darkerBlack","white","lightWhite","veryLightWhite","lightest","yellow","lightYellow","light","dot","errorBg","buttonPrimary","buttonSeconday","dark","littleWhite","INITIAL_STATE","themes","themeReducer","action","userReducer","chatReducer","toggled","undefined","rootReducer","combineReducers","getChannelsWithStarred","updateChannelsAfterStarred","onSetCurrentChannel","chatSagas","select","channelsWithStarred","takeLatest","all","call","rootSaga","sagaMiddleware","createSagaMiddleware","middlewares","store","createStore","composeWithDevTools","applyMiddleware","run","Root","unsubscribeFromAuth","history","clearCurrentUser","onAuthStateChanged","exact","path","component","RootWithRouter","withRouter","ReactDOM","render","StrictMode","basename","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"8tBAEO,IAAMA,EAAeC,IAAOC,IAAV,KAMH,qBAAGC,MAAkBC,M,y3BCNpC,IAAMC,EAAqBJ,IAAOC,IAAV,KAIT,qBAAGC,MAAkBG,UAAUF,MAmBlB,qBAAGD,MAAkBG,UAAUC,UACjD,qBAAGC,eACG,kBAAoB,wBAI9BC,EAAeR,IAAOC,IAAV,KACd,qBAAGC,MAAkBG,UAAUI,YAAYC,QAChC,qBAAGR,MAAkBG,UAAUI,YAAYN,M,+DCfjEQ,IAASC,cAXc,CACrBC,OAAQ,0CACRC,WAAY,uCACZC,YAAa,8CACbC,UAAW,uBACXC,cAAe,mCACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAIjBT,IAASU,YAEF,IAAMC,EAAOX,IAASW,OAChBC,EAAYZ,IAASY,YACrBC,EAAWb,IAASa,WACpBC,EAAUd,IAASc,UAEjBd,IAAf,ECxBMe,EAAa,SAAAC,GAAK,OAAIA,EAAMC,MAErBC,EAAoBC,YAC/B,CAACJ,IACD,SAAAE,GAAI,OAAIA,EAAKG,eAGFC,EAAsBF,YACjC,CAACJ,IACD,SAAAE,GAAI,OAAIA,EAAKK,aAGFC,EAAmBJ,YAC9B,CAACJ,IACD,SAAAE,GAAI,OAAIA,EAAKO,UCRAC,EARS,CACtBC,iBAAkB,mBAClBC,mBAAoB,qBACpBC,oBAAqB,sBACrBC,gBAAiB,kBACjBC,qBAAsB,wBCHXC,EAAiB,SAAAd,GAAI,MAAK,CACrCe,KAAMP,EAAgBC,iBACtBO,QAAShB,ICAIiB,EAJU,CACvBC,UAAW,aCGAC,EAAqBjB,YAChC,CAHkB,SAAAH,GAAK,OAAIA,EAAMzB,SAIjC,SAAAA,GAAK,OAAIA,EAAM8C,gB,8qGCJV,IAAMC,EAA0BjD,IAAOC,IAAV,KAId,qBAAGC,MAAkBgD,eAAe/C,MAGvC,qBAAGgD,OAAuB,OAAS,WAGzCC,EAA0BpD,IAAOC,IAAV,KAMvBoD,GAAarD,IAAOC,IAAV,KASVqD,GAAWtD,IAAOC,IAAV,KAWRsD,GAAWvD,IAAOwD,EAAV,KACV,qBAAGtD,MAAkBgD,eAAexC,QAQlC+C,GAAazD,IAAOC,IAAV,KAKV,qBAAGC,MAAkBgD,eAAeQ,WAQpCC,GAAY3D,IAAOC,IAAV,KAKA,YAKb,IAHe2D,EAGhB,EAJJ1D,MACEgD,eAAkBU,aAEpBzB,EACI,EADJA,OAEA,MAAe,WAAXA,EAA4ByB,EAAaC,OACzB,SAAX1B,EAA0ByB,EAAaE,KACpCF,EAAaG,WAIhBC,GAAgBhE,IAAOC,IAAV,KAQT,qBAAGkD,OAAuB,iBAAmB,kBAIjDc,GAAOjE,IAAOkE,GAAV,KAGK,qBAAGhE,MAAkBgD,eAAeiB,QAI7CC,GAAUpE,IAAOqE,GAAV,KACJ,qBAAGlB,OAAuB,QAAU,SAE9B,qBAAGjD,MAAkBgD,eAAe/C,MAsB3C,qBAAGD,MAAkBgD,eAAeQ,WAOzB,qBAAGxD,MAAkBgD,eAAeoB,YAajDC,GAAOvE,IAAOC,IAAV,KAQJuE,GAAMxE,IAAOC,IAAV,KACM,qBAAGC,MAAkBgD,eAAeiB,QAQ7CM,GAASzE,IAAOC,IAAV,KAIG,YAAsB,IAAnBC,EAAkB,EAAlBA,MAAOwE,EAAW,EAAXA,KAC5B,MAAa,WAATA,EAA0BxE,EAAMgD,eAAeU,aAAaC,OAC9C,YAATa,EACAxE,EAAMgD,eAAeU,aAAaG,QAC/B7D,EAAMgD,eAAeU,aAAaE,Q,27HCpKlD,IAAMa,GAAmBC,YAAH,MAOI,qBAAG1E,MAAkBgD,eAAe2B,MAAM1E,MAM1C,qBAAGD,MAAkBgD,eAAe2B,MAAM1E,MAGhD,qBAAG2E,QAAyB,UAAY,YAQxC,qBAAGA,QAAyB,YAAc,gBAMxDC,GAAiBH,YAAH,MAeA,qBAAGE,QAAyB,UAAY,YAQxC,qBAAGA,QAAyB,UAAY,cAM/CE,GAAuBhF,IAAOC,IAAV,KAY7B0E,IAGSM,GAAQjF,IAAOkF,KAAV,MAIF,qBAAGhF,MAAkBgD,eAAe2B,MAAMM,UAItDJ,IAGSK,GAAUpF,IAAOqF,GAAV,MACT,qBAAGnF,MAAkBgD,eAAe2B,MAAMS,eAKxCC,GAASvF,IAAOC,IAAV,MAYK,qBAAGC,MAAkBgD,eAAe2B,MAAM1E,MASxC,qBAAGD,MACfgD,eAAe2B,MAAMS,eAMtBE,GAASxF,IAAOC,IAAV,MAKNwF,GAAQzF,IAAOC,IAAV,MAgBL,qBAAGC,MAAkBgD,eAAe2B,MAAMa,iBAC/B,qBAAGxF,MAAkBgD,eAAe2B,MAAMS,eAO1C,qBAAGpF,MAAkBgD,eAAe2B,MAAM1E,MACrD,qBAAGD,MAAkBgD,eAAe2B,MAAMS,eAmBxC,qBAAGpF,MAAkBgD,eAAe2B,MAAMS,eAK5ClB,GAAUpE,IAAOC,IAAV,MAMP0F,GAAS3F,IAAO4F,OAAV,MAYN,qBAAG1F,MAAkBgD,eAAe2B,MAAMS,eAC/B,qBAAGpF,MACfgD,eAAe2B,MAAMa,iBACT,qBAAGxF,MAAkBgD,eAAe2B,MAAMS,eAIrD,qBAAGpF,MAAkBgD,eAAe2B,MAAMa,iBAC/B,qBAAGxF,MAAkBgD,eAAe2B,MAAMS,eCnFnDO,G,4MAvGblE,MAAQ,CACNmE,YAAa,KACbC,gBAAiB,KACjBC,MAAO,K,EAGTC,kBAAoB,SAAAC,GAClBA,EAAMC,mB,EAGRC,aAAe,SAAAF,GACbA,EAAMG,iBADgB,IAEdC,EAAY,EAAKC,MAAjBD,QAEJ,EAAKE,cACP,EAAKA,aAAaC,yBAAyBC,QAAO,SAAAC,GAChDL,EAAQK,O,EAKdC,aAAe,SAAAV,GACb,IAAMW,EAAQX,EAAMY,OAAOD,MACrBE,EAAOF,GAASA,EAAMG,OAASH,EAAM,GAAK,KAC1CI,EAAS,IAAIC,WAEfH,IACFE,EAAOE,cAAcJ,GACrBE,EAAOG,iBAAiB,QAAQ,WAC9B,EAAKC,SAAS,CACZvB,YAAaiB,EACbhB,gBAAiBkB,EAAOK,c,EAMhCC,SAAW,SAAArB,GAAU,IACXsB,EAAUtB,EAAMY,OAAhBU,MAER,EAAKH,SAAS,CACZrB,MAAOwB,K,EAIXC,aAAe,SAAAC,GAAM,OAAK,EAAKlB,aAAekB,G,uDAEpC,IAAD,EACyCC,KAAKhG,MAA7CmE,EADD,EACCA,YAAaC,EADd,EACcA,gBAAiBC,EAD/B,EAC+BA,MAD/B,EAEoB2B,KAAKpB,MAAxBzB,EAFD,EAECA,QAAS8C,EAFV,EAEUA,MAEjB,OACE,kBAAC5C,GAAD,CAAsBF,QAASA,EAAS+C,QAASD,GAC/C,kBAAC3C,GAAD,CACE4C,QAASF,KAAK1B,kBACd6B,SAAUH,KAAKvB,aACftB,QAASA,GAET,kBAACM,GAAD,wBACCW,EACC,kBAACR,GAAD,KACE,kBAAC,KAAD,CACEwC,IAAKJ,KAAKF,aACVO,MAAOjC,EACPC,MAAOA,EAAQ,IACfiC,cAAeN,KAAKO,cAEtB,2BACEvF,KAAK,QACLwF,IAAI,MACJC,IAAI,MACJZ,MAAOG,KAAKhG,MAAMqE,MAClBqC,SAAUV,KAAKJ,YAGjB,KACJ,kBAAC/B,GAAD,KACE,kBAACC,GAAD,KACE,8BAAOK,EAAcA,EAAYpB,KAAO,iBACxC,2BAAO4D,QAAQ,eAAf,UACA,2BACE3F,KAAK,OACL+B,KAAK,cACL6D,GAAG,cACHC,OAAO,UACPH,SAAUV,KAAKf,iBAIrB,kBAAC,GAAD,KACE,kBAACjB,GAAD,CAAQ8C,UAAU,QAAQ9F,KAAK,SAASkF,QAASD,GAAjD,UAGA,kBAACjC,GAAD,CAAQ8C,UAAU,UAAU9F,KAAK,UAAjC,iB,GA9FoB+F,IAAMC,WC0BhCC,GAAW,SAAArC,GACf,IAAMrG,EAAQ2I,cAEd,OACE,yCAAStC,EAAT,CAAgBuC,MAAM,6BAA6BC,QAAQ,cACzD,0BACEC,KAAM9I,EAAMgD,eAAeiB,KAC3B8E,EAAE,+DAyKJC,GAAkBC,YAAyB,CAC/CpH,YAAaF,EACbM,OAAQD,EACRc,aAAcD,IASDqG,eAAQF,IANI,SAAAG,GAAQ,MAAK,CACtCC,cAAe,SAAAnH,GAAM,OAAIkH,EN/ME,SAAAlH,GAAM,MAAK,CACtCQ,KAAMP,EAAgBI,gBACtBI,QAAST,GM6MyBmH,CAAcnH,KAChDO,eAAgB,SAAAd,GAAI,OAAIyH,EAAS3G,EAAed,KAChD2H,SAAU,SAAAC,GAAS,OAAIH,EC/ND,SAAAG,GAAS,MAAK,CACpC7G,KAAME,EAAiBC,UACvBF,QAAS4G,GD6NuBD,CAASC,QAG5BJ,EA/KQ,SAAC,GAOjB,IANLrH,EAMI,EANJA,YACAI,EAKI,EALJA,OACAmH,EAII,EAJJA,cAEAtG,GAEI,EAHJN,eAGI,EAFJM,cACAuG,EACI,EADJA,SAEMrJ,EAAQ2I,cADV,EAEwBY,oBAAS,GAFjC,mBAEGtG,EAFH,KAEWuG,EAFX,OAG8BD,oBAAS,GAHvC,mBAGGE,EAHH,KAGcC,EAHd,OAIuBH,oBAAS,GAJhC,mBAIG5E,EAJH,KAIUgF,EAJV,KAMEC,EAAqB,SAAA3H,GACzByH,GAAa,GAEbpI,EACGuG,IAAI,YACJgC,MAAMhI,EAAYiI,KAClBC,IAAI9H,GAAQ,SAAA+H,GACXZ,EAAcnH,GACV+H,GAAKC,QAAQC,MAAMF,OA8CvBG,EAAqB,SAAAC,GACzB7I,EACGsG,MACAgC,MAFH,wBAE0BhI,EAAYiI,MACnCO,IAAID,EAAW,CAAEE,YAAa,eAC9BC,MAAK,SAAAC,GACJA,EAAS3C,IAAI4C,iBAAiBF,MAAK,SAAAG,GA/BvCC,OAAOC,SAASC,gBA2CVC,EAA0BjJ,EAA1BiJ,YAAaC,EAAalJ,EAAbkJ,SAErB,OACE,kBAAChI,EAAD,CAAyBE,OAAQA,GAC/B,kBAAC,GAAD,CACE2B,QAASD,EACT+C,MAvDmB,WACvBiC,GAAU,IAuDNvD,QA7DqB,SAAAK,GACzB0D,EAAmB1D,GACnBkD,GAAU,MA8DR,kBAACzG,EAAD,KACE,kBAACC,GAAD,KACE,yBAAK6H,IAAKD,EAAUE,IAAI,iBAE1B,kBAAC7H,GAAD,KACE,kBAACC,GAAD,KAAWyH,GACX,kBAACvH,GAAD,KACE,kBAACE,GAAD,CAAWxB,OAAQA,IADrB,IACgC,8BAAOA,KAGzC,kBAAC6B,GAAD,CAAeb,OAAQA,GACrB,kBAAC,GAAD,CAAU0E,QAAS,kBAAM6B,GAAWvG,QAIxC,kBAACiB,GAAD,CAASjB,OAAQA,GACf,kBAACc,GAAD,MACC0F,EAAY,KACX,wBAAI9B,QAAS,kBAAM+B,GAAa,KAC9B,kBAAC,IAAD,CAAawB,MAAOlL,EAAMgD,eAAeiB,OACzC,6CAIHwF,EACC,wBAAIlB,UAAU,cACZ,kBAAClE,GAAD,KACE,kBAACC,GAAD,CAAKE,KAAK,SAASmD,QAAS,kBAAMiC,EAAmB,YACnD,kBAACrF,GAAD,CAAQC,KAAK,YAEf,kBAACF,GAAD,CAAKE,KAAK,OAAOmD,QAAS,kBAAMiC,EAAmB,UACjD,kBAACrF,GAAD,CAAQC,KAAK,UAEf,kBAACF,GAAD,CAAKE,KAAK,UAAUmD,QAAS,kBAAMiC,EAAmB,aACpD,kBAACrF,GAAD,CAAQC,KAAK,eAIjB,KAEJ,wBAAImD,QAAS,kBAAMgC,GAAU,KAC3B,kBAAC,IAAD,CAAQuB,MAAOlL,EAAMgD,eAAeiB,OACpC,gDAGF,wBAAI0D,QAAS,WA9DS,UAAtB7E,EAAa0B,KACf6E,EAAS,QAETA,EAAS,WA4DkB,UAAtBvG,EAAa0B,KACZ,oCACE,kBAAC,IAAD,CAAQ0G,MAAOlL,EAAMgD,eAAeiB,OACpC,+CAGF,oCACE,kBAAC,IAAD,CAAOiH,MAAOlL,EAAMgD,eAAeiB,OACnC,gDAKN,wBAAI0D,QAjIY,WACpBvG,EAAK+J,UAAUZ,MAAK,SAAAa,GAClBnB,QAAQoB,IAAI,oBAgIR,kBAAC,IAAD,CAAaH,MAAOlL,EAAMgD,eAAeiB,OACzC,+CErMKqH,GAZS,CACtBC,aAAc,eACdC,oBAAqB,sBACrBC,uBAAwB,yBACxBC,2BAA4B,6BAC5BC,oBAAqB,sBACrBC,uBAAwB,yBACxBrJ,qBAAsB,uBACtBsJ,eAAgB,iBAChBC,YAAa,eCPFC,GAAc,SAAAC,GAAQ,MAAK,CACtCvJ,KAAM6I,GAAgBC,aACtB7I,QAASsJ,IAGEC,GAAoB,SAAAC,GAAO,MAAK,CAC3CzJ,KAAM6I,GAAgBE,oBACtB9I,QAASwJ,IAaEC,GAAoB,SAAAC,GAAS,MAAK,CAC7C3J,KAAM6I,GAAgBK,oBACtBjJ,QAAS0J,IAaEC,GAAgB,SAAAC,GAAO,MAAK,CACvC7J,KAAM6I,GAAgBO,eACtBnJ,QAAS4J,IAGEC,GAAa,SAAAD,GAAO,MAAK,CACpC7J,KAAM6I,GAAgBQ,YACtBpJ,QAAS4J,IC1CLE,GAAa,SAAA/K,GAAK,OAAIA,EAAMgL,MAErBC,GAAiB9K,YAC5B,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKT,YAGFW,GAAuB/K,YAClC,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKG,kBAGFC,GAAuBjL,YAClC,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKK,kBAGFC,GAA6BnL,YACxC,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKO,wBAGFC,GAAyBrL,YACpC,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKS,oBAGFC,GAAyBvL,YACpC,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKW,oBAUFC,IAPuBzL,YAClC,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKa,mBAKqB1L,YAClC,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKpM,mBAGFkN,GAAoB3L,YAC/B,CAAC4K,KACD,SAAAC,GAAI,OAAIA,EAAKe,e,2lCC9CR,IAAMC,GAAmB3N,IAAOC,IAAV,MAKP,qBAAGC,MAAkB0N,QAAQzN,MAGtC0N,GAAiB7N,IAAOC,IAAV,MAGhB,qBAAGC,MAAkB0N,QAAQlN,QAU3BoN,GAAc9N,IAAOqE,GAAV,MAIX0J,GAAc/N,IAAOgO,GAAV,MAGb,qBAAG9N,MAAkB0N,QAAQlN,QAIlB,gBAAGuN,EAAH,EAAGA,SAAU/N,EAAb,EAAaA,MAAb,OAClB+N,EAAW/N,EAAM0N,QAAQM,MAAQ,iBACxB,qBAAGD,SAA2B,EAAI,MASvB,qBAAG/N,MAAkB0N,QAAQM,SAIxCC,GAAkBnO,IAAOwD,EAAV,MAMjB,qBAAGtD,MAAkB0N,QAAQlN,QC9BlC0N,G,4MACJC,iBAAmB,SAAAjC,GACjB,EAAK/E,SAAS,CAAEiH,cAAelC,EAAQ7D,M,EAGzCgG,cAAgB,SAAAnC,GAAY,IAAD,EACwB,EAAK7F,MAA9C4F,EADiB,EACjBA,kBAAmBE,EADF,EACEA,kBAC3BF,EAAkBC,GAClBC,GAAkB,GAClB,EAAKgC,iBAAiBjC,I,EAGxBoC,mBAAqB,WAAO,IAClBtC,EAAa,EAAK3F,MAAlB2F,SAER,OAAI,EAAK3F,MAAM2F,SACNA,EAASuC,QAAO,SAAArC,GAAO,OAAIA,EAAQwB,WAEnC,I,uDAID,IAAD,EACyDjG,KAAKpB,MAA7D4F,EADD,EACCA,kBAAmBW,EADpB,EACoBA,eAAgBM,EADpC,EACoCA,iBAE3C,OACE,kBAACO,GAAD,KACE,kBAACE,GAAD,KACE,yCACA,kBAAC,IAAD,CACEhG,QAASF,KAAK+G,UACdC,MAAO,CAAEC,UAAW,YACpBC,KAAM,MAGTlH,KAAK6G,qBAAqBxH,OAAS,KAClC,kBAACmH,GAAD,CAAiBW,IAAI,oBAArB,8CAIF,kBAAChB,GAAD,KACGnG,KAAK6G,qBAAqBO,KAAI,SAAA3C,GAAY,IACjC7D,EAAa6D,EAAb7D,GAAI7D,EAAS0H,EAAT1H,KACZ,OACE,kBAACqJ,GAAD,CACEe,IAAKvG,EACLV,QAAS,kBAAMsE,EAAkBC,IACjC6B,UAAWb,GAAoBhB,EAAQ7D,KAAOuE,EAAevE,IAH/D,KAKK7D,Y,GAjDGgE,IAAMC,WA2DtBO,GAAkBC,YAAyB,CAC/C+C,SAAUU,GACVE,eAAgBD,GAChBO,iBAAkBD,KAQL/D,eAAQF,IALI,SAAAG,GAAQ,MAAK,CACtC8C,kBAAmB,SAAAC,GAAO,OAAI/C,EAAS8C,GAAkBC,KACzDC,kBAAmB,SAAAC,GAAS,OAAIjD,EAASgD,GAAkBC,QAG9ClD,CAA6CgF,I,+sGC7F5D,IAAMzJ,GAAmBC,YAAH,MAOI,qBAAG1E,MAAkBgM,SAASrH,MAAM1E,MAMpC,qBAAGD,MAAkBgM,SAASrH,MAAM1E,MAG1C,qBAAG2E,QAAyB,UAAY,YAQxC,qBAAGA,QAAyB,YAAc,gBAMxDC,GAAiBH,YAAH,MAeA,qBAAGE,QAAyB,UAAY,YAQxC,qBAAGA,QAAyB,UAAY,cAM/CkK,GAAiBhP,IAAOC,IAAV,KAYvB0E,IAGSM,GAAQjF,IAAOkF,KAAV,MAIF,qBAAGhF,MAAkBgM,SAASrH,MAAMM,UAIhDJ,IAGSK,GAAUpF,IAAOqF,GAAV,MACT,qBAAGnF,MAAkBgM,SAASrH,MAAMS,eAKlCE,GAASxF,IAAOC,IAAV,MAKNwF,GAAQzF,IAAOC,IAAV,MAeL,qBAAGC,MAAkBgM,SAASrH,MAAMa,iBACzB,qBAAGxF,MAAkBgM,SAASrH,MAAMS,eAMpC,qBAAGpF,MAAkBgM,SAASrH,MAAM1E,MAC/C,qBAAGD,MAAkBgM,SAASrH,MAAMS,eAUlC,qBAAGpF,MAAkBgM,SAASrH,MAAMS,eAKtClB,GAAUpE,IAAOC,IAAV,MAMP0F,GAAS3F,IAAO4F,OAAV,MAYN,qBAAG1F,MAAkBgM,SAASrH,MAAMS,eACzB,qBAAGpF,MAAkBgM,SAASrH,MAAMa,iBACpC,qBAAGxF,MAAkBgM,SAASrH,MAAMS,eAI/C,qBAAGpF,MAAkBgM,SAASrH,MAAMa,iBACzB,qBAAGxF,MAAkBgM,SAASrH,MAAMS,eC7D7C2J,G,4MAvFbtN,MAAQ,CACN+C,KAAM,GACNwK,MAAO,I,EAGTjJ,kBAAoB,SAAAC,GAClBA,EAAMC,mB,EAGRgJ,eAAiB,SAAA3H,GAOf,OANAA,EAAQA,EACL4H,QAAQ,IAAK,KACbA,QAAQ,KAAM,KACdC,eAEOC,WAAW,OAAM9H,EAAQ,IAC5BA,G,EAGTZ,aAAe,SAAAV,GAAU,IAAD,EAGlBA,EADFY,OAAUpC,EAFU,EAEVA,KAAM8C,EAFI,EAEJA,MAGL,SAAT9C,IAAiB8C,EAAQ,EAAK2H,eAAe3H,IAEjD,EAAKH,SAAL,gBACG3C,EAAO8C,K,EAIZpB,aAAe,SAAAF,GACbA,EAAMG,iBADgB,MAEA,EAAK1E,MAArB+C,EAFgB,EAEhBA,KAAMwK,EAFU,EAEVA,MACZxK,EAAOA,EAAK6K,SAAS,KAAO7K,EAAK8K,UAAU,EAAG9K,EAAKsC,OAAS,GAAKtC,GAEjE4B,EADoB,EAAKC,MAAjBD,SACA,CAAE5B,OAAMwK,W,uDAGR,IAAD,EACoBvH,KAAKpB,MAAxBzB,EADD,EACCA,QAAS8C,EADV,EACUA,MADV,EAEiBD,KAAKhG,MAArB+C,EAFD,EAECA,KAAMwK,EAFP,EAEOA,MAEd,OACE,kBAACF,GAAD,CAAgBlK,QAASA,EAAS+C,QAASD,GACzC,kBAAC,GAAD,CACEC,QAASF,KAAK1B,kBACd6B,SAAUH,KAAKvB,aACftB,QAASA,GAET,kBAAC,GAAD,sBACA,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,sCACA,2BACEnC,KAAK,OACL+B,KAAK,OACL8C,MAAO9C,EACP+K,YAAY,eACZpH,SAAUV,KAAKf,gBAGnB,kBAAC,GAAD,KACE,uCACA,2BACEjE,KAAK,OACL+B,KAAK,QACL8C,MAAO0H,EACPO,YAAY,cACZpH,SAAUV,KAAKf,iBAIrB,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAQ6B,UAAU,QAAQ9F,KAAK,SAASkF,QAASD,GAAjD,UAGA,kBAAC,GAAD,CAAQa,UAAU,UAAU9F,KAAK,UAAjC,c,GA9EkB+F,IAAMC,W,gvBCV7B,IAAM+G,GAAmB1P,IAAOC,IAAV,MAGb,qBAAGC,MAAkByP,QAAQxP,MAOhCyP,GAAS5P,IAAOC,IAAV,MAUP,qBAAG4O,QACJ,qBAAGA,QACQ,gBAAG3O,EAAH,EAAGA,MAAH,SAAUkL,OAAqBlL,EAAMyP,QAAQE,YACvC,qBAAG3P,MAAkByP,QAAQG,YAK5CC,GAAc/P,IAAOwD,EAAV,MAEb,qBAAGtD,MAAkByP,QAAQjP,QACzB,qBAAGsP,YCXHC,GAlBC,SAAC,GAKV,IAJLC,EAII,EAJJA,YAII,IAHJrB,YAGI,MAHG,OAGH,MAFJmB,gBAEI,MAFO,OAEP,EADDzJ,EACC,kDACJ,OACE,kBAACmJ,GAAqBnJ,EACpB,kBAACqJ,GAAD,CAAQf,KAAMA,IACbqB,EACC,kBAACH,GAAD,CAAaC,SAAUA,GAAWE,GAElC,K,4wCCdD,IAAMC,GAAoBnQ,IAAOC,IAAV,MAKR,qBAAGC,MAAkBgM,SAAS/L,MAGvCiQ,GAAkBpQ,IAAOC,IAAV,MAGjB,qBAAGC,MAAkBgM,SAASxL,QAW5B2P,GAAerQ,IAAOqE,GAAV,MAIZiM,GAActQ,IAAOgO,GAAV,MAOF,gBAAGC,EAAH,EAAGA,SAAU/N,EAAb,EAAaA,MAAb,OAClB+N,EAAW/N,EAAMgM,SAASgC,MAAQ,iBACzB,qBAAGD,SAA2B,EAAI,MASvB,qBAAG/N,MAAkBgM,SAASgC,SAGzCqC,GAAOvQ,IAAOwD,EAAV,MAGN,qBAAGtD,MAAkBgM,SAASxL,QAI5B8P,GAAgBxQ,IAAOyQ,KAAV,MAEJ,qBAAGvQ,MAAkBgM,SAASwE,mBACzC,qBAAGxQ,MAAkBgM,SAASyE,mBC1BnCC,G,4MACJjP,MAAQ,CACNyK,QAAS,KACTyE,YAAa,GACbC,eAAgB,GAChBC,YAAaxP,EAAUyP,WAAW,YAClCC,UAAWzP,EAASuG,IAAI,UACxBmJ,2BAA4B,KAC5BC,sBAAuB,GACvBC,cAAe,GACfvM,OAAO,EACPwM,WAAW,EACX/C,cAAe,M,EAgBjBgD,aAAe,WAAO,IACZP,EAAgB,EAAKpP,MAArBoP,YACA9E,EAAgB,EAAK1F,MAArB0F,YAEFsF,EAAcR,EACjBS,QAAQ,YAAa,OACrBC,YAAW,SAAA/G,GACV,IAAMwB,EAAWxB,EAASgH,KAAK3C,KAAI,SAAA4C,GAAG,OAAIA,EAAIC,UAC9C3F,EAAYC,GAGZA,EAAS2F,SAAQ,SAAAzF,GAAO,OAAI,EAAK0F,wBAAwB1F,EAAQ7D,UAGrE,EAAKlB,SAAS,CACZ6J,2BAA4BK,K,EAIhCO,wBAA0B,SAAAC,GAAc,IAGhCC,EAFkB,EAAKrQ,MAArBoP,YAGLY,IAAII,GACJf,WAAW,YACXS,YAAW,SAAA/G,GACN,EAAK/I,MAAMyK,SACb,EAAK6F,oBACHF,EACA,EAAKpQ,MAAMyK,QAAQ7D,GACnB,EAAK5G,MAAMyP,cACX1G,MAKR,EAAKrD,UAAS,gBAAG8J,EAAH,EAAGA,sBAAH,MAAgC,CAC5CA,sBAAsB,gBAAMA,EAAP,gBAA+BY,EAAYC,S,EAIpEC,oBAAsB,SACpBF,EACAG,EACAd,EACA1G,GAEA,IAAIyH,EAAY,EAEVC,EAAQhB,EAAciB,WAC1B,SAAAC,GAAY,OAAIA,EAAa/J,KAAOwJ,MAGvB,IAAXK,EACEL,IAAcG,IAChBC,EAAYf,EAAcgB,GAAOG,eAE7B7H,EAASgH,KAAK1K,OAASmL,EAAY,IACrCf,EAAcgB,GAAOI,MAAQ9H,EAASgH,KAAK1K,OAASmL,EACpDf,EAAcgB,GAAOK,MAAQ/H,EAASgH,KAAK1K,SAI/CoK,EAAcsB,KAAK,CACjBnK,GAAIwJ,EACJU,MAAO/H,EAASgH,KAAK1K,OACrBuL,eAAgB7H,EAASgH,KAAK1K,OAC9BwL,MAAO,IAIX,EAAKnL,SAAS,CACZ+J,mB,EAIJuB,gBAAkB,YAEhBzB,EADuC,EAAKvP,MAApCuP,8BADc,IAGdC,EAA0B,EAAKxP,MAA/BwP,sBACRyB,OAAOC,KAAK1B,GAAuBU,SAAQ,SAAAG,GACzCb,EAAsBa,S,EAI1Bc,gBAAkB,WAAO,IACfzB,EAAc,EAAK1P,MAAnB0P,UADc,EAEkB,EAAK9K,MAArC4F,EAFc,EAEdA,kBAAmBD,EAFL,EAEKA,SACvBmF,GAAanF,EAASlF,SACxBmF,EAAkBD,EAAS,IAC3B,EAAKmC,iBAAiBnC,EAAS,IAC/B,EAAK7E,SAAS,CAAEgK,WAAW,EAAOjF,QAASF,EAAS,O,EAIxD6G,WAAa,YAAsB,IAAnBrO,EAAkB,EAAlBA,KAAMwK,EAAY,EAAZA,MACZ6B,EAAgB,EAAKpP,MAArBoP,YACAhP,EAAgB,EAAKwE,MAArBxE,YAEFgG,EAAMgJ,EAAYY,MAElBqB,EAAa,CACjBzK,GAAIR,EAAIQ,GACR7D,OACAuO,QAAS/D,EACTgE,UAAW,CACTxO,KAAM3C,EAAYiJ,YAClBmI,OAAQpR,EAAYkJ,SACpBjB,IAAKjI,EAAYiI,KAEnBoJ,UAAWzS,EAASY,UAAU8R,WAAWC,mBAG3CvC,EACGY,IAAI5J,EAAIQ,IACR0B,IAAI+I,GACJvI,MAAK,WACJ,EAAKpD,SAAS,CAAEwJ,YAAa,GAAIC,eAAgB,GAAIjM,OAAO,IAC5DsF,QAAQoB,IAAI,sBAEbgI,OAAM,SAAArJ,GACLC,QAAQC,MAAMF,O,EAIpBsJ,YAAc,WACZ,EAAKnM,SAAS,CAAExC,OAAO,K,EAGzB4O,cAAgB,YAAsB,IAAnB/O,EAAkB,EAAlBA,KAAMwK,EAAY,EAAZA,MACvB,EAAK7H,SAAS,CAAEwJ,YAAanM,EAAMoM,eAAgB5B,IAC/CxK,GAAQwK,GACV,EAAK6D,WAAW,CAAErO,OAAMwK,W,EAI5BR,UAAY,WACV,EAAKrH,SAAS,CAAExC,OAAO,K,EAGzBwJ,iBAAmB,SAAAjC,GACjB,EAAK/E,SAAS,CAAEiH,cAAelC,EAAQ7D,M,EAGzCgG,cAAgB,SAAAnC,GAAY,IAClB6E,EAAc,EAAKtP,MAAnBsP,UADiB,EAOrB,EAAK1K,MAJP4F,EAHuB,EAGvBA,kBACAE,EAJuB,EAIvBA,kBACAtK,EALuB,EAKvBA,YACA+K,EANuB,EAMvBA,eAEFmE,EAAUlH,MAAM+C,EAAevE,IAAIwB,MAAMhI,EAAYiI,KAAK0J,SAC1DvH,EAAkBC,GAClBC,GAAkB,GAClB,EAAKgC,iBAAiBjC,GACtB,EAAK/E,SAAS,CAAE+E,YAAW,kBAAM,EAAKuH,yB,EAGxCA,mBAAqB,WACnB,IAAIvB,EAAQ,EAAKzQ,MAAMyP,cAAciB,WACnC,SAAAC,GAAY,OAAIA,EAAa/J,KAAO,EAAK5G,MAAMyK,QAAQ7D,MAGzD,IAAe,IAAX6J,EAAc,CAChB,IAAIwB,EAAoB,aAAO,EAAKjS,MAAMyP,eAC1CwC,EAAqBxB,GAAOG,eAAiB,EAAK5Q,MAAMyP,cACtDgB,GACAK,MACFmB,EAAqBxB,GAAOI,MAAQ,EACpC,EAAKnL,SAAS,CACZ+J,cAAewC,M,EAKrBC,qBAAuB,SAAAzH,GACrB,IAAIoG,EAAQ,EAOZ,OANA,EAAK7Q,MAAMyP,cAAcS,SAAQ,SAAAS,GAC3BA,EAAa/J,KAAO6D,EAAQ7D,KAC9BiK,EAAQF,EAAaE,UAIlBA,G,kEApMP7K,KAAK2J,iB,2CAIgB3J,KAAKpB,MAAlB2F,UACMvE,KAAKmL,oB,6CAInBnL,KAAKgL,oB,+BA8LG,IAAD,SACsBhL,KAAKhG,MAA1BkD,EADD,EACCA,MAAOwM,EADR,EACQA,UADR,EAEgD1J,KAAKpB,MAApD6G,EAFD,EAECA,iBAAkBN,EAFnB,EAEmBA,eAAgBZ,EAFnC,EAEmCA,SAE1C,OACE,kBAACiE,GAAD,KACE,kBAAC,GAAD,CACEvI,MAAOD,KAAK6L,YACZlN,QAASqB,KAAK8L,cACd3O,QAASD,IAEX,kBAACuL,GAAD,KACE,0CACA,kBAAC,IAAD,CACEvI,QAASF,KAAK+G,UACdC,MAAO,CAAEC,UAAW,YACpBC,KAAM,MAGTwC,EACC,kBAAC,GAAD,CACE1C,MAAO,CAAEmF,gBAAiB,cAAeC,UAAW,IACpDlF,KAAK,SAGP,kBAACwB,GAAD,KACGnE,EAAS6C,KAAI,SAAA3C,GAAY,IAChB7D,EAAa6D,EAAb7D,GAAI7D,EAAS0H,EAAT1H,KACZ,OACE,kBAAC4L,GAAD,CACExB,IAAKvG,EACL0F,SACE7B,EAAQ7D,KAAOuE,EAAevE,KAAO6E,EAEvCvF,QAAS,kBAAM,EAAK0G,cAAcnC,KAElC,kBAACmE,GAAD,UAAS7L,GAAa,IACrB,EAAKmP,qBAAqBzH,GACzB,kBAACoE,GAAD,KACG,EAAKqD,qBAAqBzH,IAE3B,e,GAhQC1D,IAAMC,WA2QvBO,GAAkBC,YAAyB,CAC/CpH,YAAaF,EACbqK,SAAUU,GACVE,eAAgBD,GAChBO,iBAAkBD,KASL/D,eAAQF,IANI,SAAAG,GAAQ,MAAK,CACtC4C,YAAa,SAAAC,GAAQ,OAAI7C,EAAS4C,GAAYC,KAC9CC,kBAAmB,SAAAC,GAAO,OAAI/C,EAAS8C,GAAkBC,KACzDC,kBAAmB,SAAAC,GAAS,OAAIjD,EAASgD,GAAkBC,QAG9ClD,CAA6CwH,I,stCCvTrD,IAAMoD,GAA0BhU,IAAOC,IAAV,MAKd,qBAAGC,MAAkB+T,eAAe9T,MAG7C+T,GAAwBlU,IAAOC,IAAV,MAGvB,qBAAGC,MAAkB+T,eAAevT,QAWlCyT,GAAqBnU,IAAOqE,GAAV,MAIlB+P,GAAqBpU,IAAOgO,GAAV,MAIT,gBAAGC,EAAH,EAAGA,SAAU/N,EAAb,EAAaA,MAAb,OAClB+N,EAAW/N,EAAM+T,eAAe/F,MAAQ,iBAC/B,qBAAGD,SAA2B,EAAI,MASvB,qBAAG/N,MAAkB+T,eAAe/F,SAI/CmG,GAAOrU,IAAOC,IAAV,MAOJ,qBAAGC,MAAkB+T,eAAevT,QAKpC4T,GAAStU,IAAOC,IAAV,MAKG,YAAwB,IAArBC,EAAoB,EAApBA,MAAOiC,EAAa,EAAbA,OACpB8R,EAAmB/T,EAAnB+T,eACR,MAAe,WAAX9R,EAA4B8R,EAAe9R,OAAO0B,OACvC,SAAX1B,EAA0B8R,EAAe9R,OAAO2B,KACxCmQ,EAAe9R,OAAO4B,WCpChCwQ,G,4MACJ5S,MAAQ,CACN6S,MAAO,GACPC,cAAe,KACfC,aAAclT,EAASuG,IAAI,mBAC3B4M,YAAanT,EAASuG,IAAI,YAC1BuG,cAAe,M,EAcjBgD,aAAe,SAAAsD,GAAmB,IAAD,EACO,EAAKjT,MAAnC+S,EADuB,EACvBA,aAAcC,EADS,EACTA,YACdE,EAAe,EAAKtO,MAApBsO,WAEFJ,EAAgBlT,EAAUyP,WAAW,SAASS,YAAW,SAAA/G,GAC7D,IACMoK,EADapK,EAASgH,KAAKjD,QAAO,SAAAkD,GAAG,OAAIA,EAAIpJ,KAAOqM,KACtB7F,KAAI,SAAAnN,GAOtC,OANmB,gBACdA,EAAKgQ,OADS,CAEjB5H,IAAKpI,EAAK2G,GACVpG,OAAQ,eAMZ,EAAKkF,SACH,CACEmN,MAAOM,GAET,EAAKC,sBAIT,EAAK1N,SAAS,CACZoN,kBAKFC,EAAaM,GAAG,SAAS,SAAAtK,GACvB,GAAIA,EAASuK,MAAO,CAClB,IAAMlN,EAAM4M,EAAY5K,MAAM6K,GAG9B7M,EAAIkC,IAAI4K,GACR9M,EAAImN,eAAejL,IAAI,gB,EAK7B0I,gBAAkB,WAAO,IAAD,EAC+B,EAAKhR,MAAlD8S,EADc,EACdA,cAAeC,EADD,EACCA,aAAcC,EADf,EACeA,YAC7B5S,EAAgB,EAAKwE,MAArBxE,YAER0S,IACAC,EAAaS,MAGbR,EAAY5K,MAAMhI,EAAYiI,KAAKC,IAAI,WAEvC0K,EAAYQ,O,EAGdJ,kBAAoB,WAAO,IACjBJ,EAAgB,EAAKhT,MAArBgT,YACAS,EAAwB,EAAK7O,MAA7B6O,oBAERT,EAAYK,GAAG,SAAS,SAAAtK,GACtB,IAAM2K,EAAiB3K,EAASuK,MAEhCG,EAAoBC,GAEpBzC,OAAOC,KAAKwC,GAAgBxD,SAAQ,SAAAyD,GAClC,EAAKC,gBAAgBD,EAAQD,EAAeC,W,EAKlDC,gBAAkB,SAACD,GAA+B,IAAvBnT,EAAsB,uDAAb,SAC1BqS,EAAU,EAAK7S,MAAf6S,MACFgB,EAAehB,EAAMiB,QAAO,SAACC,EAAK9T,GAItC,OAHIA,EAAKoI,MAAQsL,IACf1T,EAAI,OAAaO,GAEZuT,EAAIC,OAAO/T,KACjB,IAEH,EAAKyF,SAAS,CACZmN,MAAOgB,K,EAIXjH,cAAgB,SAAA3M,GAAS,IAAD,EAC2B,EAAK2E,MAA9C4F,EADc,EACdA,kBAAmBE,EADL,EACKA,kBACrB0F,EAAY,EAAK6D,aAAahU,EAAKoI,KAQzCmC,EAPoB,CAClB5D,GAAIwJ,EACJrN,KAAM9C,EAAK8C,KACXsF,IAAKpI,EAAKoI,IACVrH,KAAM,WAIR0J,GAAkB,GAClB,EAAKgC,iBAAiB0D,I,EAGxB6D,aAAe,SAAAN,GAAW,IAElBO,EADkB,EAAKtP,MAArBxE,YAC0BiI,IAClC,OAAOsL,EAASO,EAAT,UACAP,EADA,YACUO,GADV,UAEAA,EAFA,YAEiBP,I,EAG1BjH,iBAAmB,SAAA0D,GACjB,EAAK1K,SAAS,CAAEiH,cAAeyD,K,kEAtHZ,IACXhQ,EAAgB4F,KAAKpB,MAArBxE,YACJA,GACF4F,KAAK2J,aAAavP,EAAYiI,O,6CAKhCrC,KAAKgL,oB,+BAiHG,IAAD,SAC0BhL,KAAKhG,MAA9B6S,EADD,EACCA,MAAOlG,EADR,EACQA,cACPlB,EAAqBzF,KAAKpB,MAA1B6G,iBAER,OACE,kBAAC4G,GAAD,KACE,kBAACE,GAAD,KACE,iDACA,kBAAC,IAAD,CACErM,QAASF,KAAK+G,UACdC,MAAO,CAAEC,UAAW,YACpBC,KAAM,MAGT2F,EAAMxN,OACL,kBAACmN,GAAD,KACGK,EAAMzF,KAAI,SAAAnN,GAAS,IACVoI,EAAkCpI,EAAlCoI,IAAKtF,EAA6B9C,EAA7B8C,KADI,EACyB9C,EAAvBO,cADF,MACW,UADX,EAEjB,OACE,kBAACiS,GAAD,CACEtF,IAAK9E,EACLiE,SACEK,IAAkB,EAAKsH,aAAa5L,IAAQoD,GAG9C,kBAACiH,GAAD,CAAMxM,QAAS,kBAAM,EAAK0G,cAAc3M,KACtC,kBAAC0S,GAAD,CAAQnS,OAAQA,IADlB,IAC6B,2BAAIuC,SAOzC,kBAAC,GAAD,CACEiK,MAAO,CAAEmF,gBAAiB,cAAeC,UAAW,IACpDlF,KAAK,c,GArKYnG,IAAMC,WA6K7BO,GAAkBC,YAAyB,CAC/CpH,YAAaF,EACbgT,WAAY3S,EACZkL,iBAAkBD,KASL/D,eAAQF,IANI,SAAAG,GAAQ,MAAK,CACtC8C,kBAAmB,SAAAC,GAAO,OAAI/C,EAAS8C,GAAkBC,KACzDC,kBAAmB,SAAAC,GAAS,OAAIjD,EAASgD,GAAkBC,KAC3D8I,oBAAqB,SAAAU,GAAW,OAAIzM,EX3LkB,CACtD1G,KAAM6I,GAAgBM,uBACtBlJ,QWyLiEkT,QAGpD1M,CAA6CmL,IC1LtDrL,GAAkBC,YAAyB,CAC/C5I,eAAgBgN,KAOHnE,eAAQF,IAJI,SAAAG,GAAQ,MAAK,CACtCkD,cAAe,SAAAC,GAAO,OAAInD,EAASkD,GAAcC,QAGpCpD,EAvBG,SAAC,GAAuC,IAArC7I,EAAoC,EAApCA,eAAgBgM,EAAoB,EAApBA,cACnC,OACE,kBAACnM,EAAD,CAAoBG,eAAgBA,GAClC,kBAACC,EAAD,CAAcqH,QAAS,kBAAM0E,GAAc,KACzC,kBAAC,IAAD,MACA,wCAEF,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,U,qMCxBC,IAAMwJ,GAAyB/V,IAAOC,IAAV,M,yyGCA5B,IAAM+V,GAAyBhW,IAAOC,IAAV,MASb,qBAAGC,MAAS+V,cAAoC9V,MAC3D,qBAAGD,MAAS+V,cAAoCvV,QAO9CwV,GAAclW,IAAOC,IAAV,MAQXkW,GAAgBnW,IAAO4F,OAAV,MACV,qBAAG1F,MAAkB+V,cAAcG,OAAOjW,MAa7C,qBAAGD,MAAkB+V,cAAcI,eAQnCjR,GAAUpF,IAAOqF,GAAV,MASP,qBAAGnF,MAAkB+V,cAAcK,YAKnCC,GAAQvW,IAAOwD,EAAV,MAULgT,GAAUxW,IAAOyQ,KAAV,MAQPgG,GAAuBzW,IAAOC,IAAV,MAQpByW,GAAS1W,IAAOC,IAAV,MAMN,qBAAGC,MAAkB+V,cAAcG,OAAO3G,eAc1CkH,GAAc3W,IAAO4W,MAAV,MACb,qBAAG1W,MAAkB+V,cAAcG,OAAO1V,QAC/B,qBAAGR,MAAkB+V,cAAcG,OAAOjW,MAUnD,qBAAGD,MAAkB+V,cAAcG,OAAO3G,eAQ1ChM,GAAazD,IAAOC,IAAV,MAOVuE,GAAMxE,IAAOC,IAAV,MAKM,YAAwB,IAArBC,EAAoB,EAApBA,MAAOiC,EAAa,EAAbA,OACpB8R,EAAmB/T,EAAnB+T,eACR,MAAe,WAAX9R,EAA4B8R,EAAe9R,OAAO0B,OACvC,SAAX1B,EAA0B8R,EAAe9R,OAAO2B,KACxCmQ,EAAe9R,OAAO4B,WAIzBuQ,GAAStU,IAAOwD,EAAV,MAMNqT,GAAa7W,IAAO4F,OAAV,MAYZ,qBAAG1F,MAAkB+V,cAAca,YCzHxCC,G,4MACJpV,MAAQ,CACNqV,QAAS,CACPtW,KAAM,IAERyB,OAAQ,UACR8U,SAAU1V,EAAUyP,WAAW,U,EAGjCpK,aAAe,SAAAV,GAAU,IAAD,EACEA,EAAMY,OAAtBpC,EADc,EACdA,KAAM8C,EADQ,EACRA,MAEd,EAAKH,SACH,CACE2P,QAAQ,gBACLtS,EAAO8C,KAGZ,WACE,EAAK0P,WAAW,EAAKvV,MAAMqV,a,EAKjCG,2BAA6B,K,EAoB7BD,WAAa,SAAAF,IAGXI,EAFoC,EAAK7Q,MAAjC6Q,yBAEgBJ,I,EAG1BK,UAAY,WACV,EAAKhQ,SACH,CACE2P,QAAS,CACPtW,KAAM,MAGV,WACE,EAAKwW,WAAW,EAAKvV,MAAMqV,a,EAKjCM,eAAiB,WAAO,IAAD,EACwB,EAAK/Q,MAA1C+G,EADa,EACbA,iBAAkBR,EADL,EACKA,eAC1B,OAAIA,GAAkBA,EAAc,IAC3BQ,EAAiBR,EAAc,KAE/B,W,EAIXyK,WAAa,SAAA3J,GACX,EAAK4J,YAAY5J,I,EAGnB4J,YAAc,WAAO,IACXP,EAAa,EAAKtV,MAAlBsV,SADU,EAEsB,EAAK1Q,MAArCxE,EAFU,EAEVA,YAAa+K,EAFH,EAEGA,eAEjBU,EAAkB,GAGtByJ,EACGtF,IAAI5P,EAAYiI,KAChByN,MACAhN,MAAK,SAAAC,GACJ,IAAMkH,EAAOlH,EAASkH,OAQhBQ,GANJ5E,EADEoE,EAAI,QACS,aAAOA,EAAI,SAER,IAIU8F,QAAQ5K,EAAevE,KACtC,IAAX6J,EACF5E,EAAgBkF,KAAK5F,EAAevE,IAEpCiF,EAAgBmK,OAAOvF,EAAO,GAIhC6E,EACGtF,IAAI5P,EAAYiI,KAChB4N,OAAO,CACNhK,QAASJ,IAEV/C,MAAK,kBAAMN,QAAQoB,IAAI,+BACvBgI,OAAM,SAAArJ,GAAG,OAAIC,QAAQC,MAAMF,U,kEAnFf,IACX+M,EAAatP,KAAKhG,MAAlBsV,SADU,EAE0BtP,KAAKpB,MAAzCxE,EAFU,EAEVA,YAAa8V,EAFH,EAEGA,mBAErBlQ,KAAKwP,2BAA6BF,EAC/BtF,IAAI5P,EAAYiI,KAChByH,YAAW,SAAA/G,GACV,IAAMkD,EAAUlD,EAASkH,OACrBhE,GACFiK,EAAmBjK,EAAO,c,6CAMhCjG,KAAKwP,+B,+BAwEG,IAAD,SAOHxP,KAAKpB,MALPuG,EAFK,EAELA,eACAgL,EAHK,EAGLA,QACAC,EAJK,EAILA,eACAxL,EALK,EAKLA,cACAE,EANK,EAMLA,WAEMuK,EAAYrP,KAAKhG,MAAjBqV,QAGF7U,EAASwF,KAAK2P,iBAEpB,OACE,kBAACtB,GAAD,KACGlJ,EACC,oCACE,kBAACoJ,GAAD,KACE,kBAAC,GAAD,KACE,kBAACC,GAAD,CAAetO,QAAS,kBAAM0E,MAC5B,kBAAC,IAAD,OAEF,8BACGwL,EAAiB,IAAM,IAD1B,IACgCjL,EAAepI,MACvC,IACNqT,EAME,KALFjL,EAAec,QACb,kBAAC,IAAD,CAAQiB,KAAM,GAAIhH,QAAS,kBAAM,EAAK0P,gBAEtC,kBAAC,IAAD,CAAW1I,KAAM,GAAIhH,QAAS,kBAAM,EAAK0P,iBAI7CQ,EAGA,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAK5V,OAAQA,IADf,IAC0B,kBAAC,GAAD,KAASA,IAHnC,kBAACoU,GAAD,KAAQzJ,EAAemG,SAMvB8E,EAME,KALF,kBAACvB,GAAD,KACGsB,GAA6B,IAAlBA,EAAQtF,MAAnB,UACMsF,EAAQtF,MADd,qBAEMsF,EAAQtF,MAFd,cAMP,kBAACiE,GAAD,KACE,kBAACC,GAAD,KACE,kBAACC,GAAD,CACEhU,KAAK,OACL+B,KAAK,OACL2D,SAAUV,KAAKf,aACfY,MAAOwP,EAAQtW,KACf+O,YAAY,oBAEbuH,EAAQtW,KAAKsG,OACZ,kBAAC,IAAD,CAASa,QAASF,KAAK0P,YAEvB,kBAAC,IAAD,OAGJ,kBAACR,GAAD,CAAYhP,QAAS,kBAAM4E,MACzB,kBAAC,IAAD,SAKN,kBAAC,GAAD,CACEkC,MAAO,CAAEmF,gBAAiB,cAAekE,WAAY,qB,GAvLrCtP,IAAMC,WA+L5BO,GAAkBC,YAAyB,CAC/C2O,QAAS/K,GACTgL,eAAgB5K,GAChBG,iBAAkBD,KAYLjE,eAAQF,IATI,SAAAG,GAAQ,MAAK,CACtC+N,wBAAyB,SAAAJ,GAAO,OAC9B3N,EfpOmC,SAAA2N,GAAO,MAAK,CACjDrU,KAAM6I,GAAgBI,2BACtBhJ,QAASoU,GekOEI,CAAwBJ,KACnCa,mBAAoB,SAAArK,GAAe,OACjCnE,EfvN8B,SAAAmE,GAAe,MAAK,CACpD7K,KAAM6I,GAAgB/I,qBACtBG,QAAS4K,GeqNEqK,CAAmBrK,KAC9BjB,cAAe,SAAAC,GAAO,OAAInD,EAASkD,GAAcC,KACjDC,WAAY,SAAAD,GAAO,OAAInD,EAASoD,GAAWD,QAG9BpD,CAA6C2N,I,+hDC1P5D,IAAMkB,GAAYrT,YAAH,MAUG,qBAAG1E,MAAkB+X,UAAUC,MAO/B,qBAAGhY,MAAkB+X,UAAUE,WAU/B,qBAAGjY,MAAkB+X,UAAU9X,MAQpCiY,GAAoBpY,IAAOC,IAAV,MAKR,qBAAGC,MAAkBmY,SAASlY,MAKvCmY,GAAYtY,IAAOC,IAAV,KAclBgY,IAGSM,GAAkBvY,IAAOC,IAAV,MAKfuY,GAAmBxY,IAAOC,IAAV,MAUhB,qBAAGC,MAAkBmY,SAAS5I,e,6hCC7EpC,IAAMgJ,GAAmBzY,IAAOC,IAAV,MAOhByY,GAAS1Y,IAAOC,IAAV,MAWN0Y,GAAc3Y,IAAOC,IAAV,MACb,qBAAGC,MAAkB0Y,QAAQtT,eAG3BF,GAAUpF,IAAOC,IAAV,MAYP,qBAAGC,MAAkB0Y,QAAQlT,iBAK7BmT,GAAU7Y,IAAOwD,EAAV,MCLLsV,GApBC,SAAC,GAAsB,IAAD,IAAnBF,eAAmB,MAAT,GAAS,EAC5BG,EAAoCH,EAApCG,QAASC,EAA2BJ,EAA3BI,UAAWpX,EAAgBgX,EAAhBhX,KAAMoG,EAAU4Q,EAAV5Q,MAElC,OACE,kBAACyQ,GAAD,KACE,kBAACC,GAAD,KACE,yBAAKxN,IAAKtJ,EAAKuR,OAAQhI,IAAI,YAE7B,kBAACwN,GAAD,KACE,kBAAC,GAAD,KACE,4BAAK/W,EAAK8C,MADZ,IACuB,wCAfX,SAAAsU,GAClB,OAAIA,EAAkBC,KAAOD,EAAUE,UAAUC,SAAQ,GAC7C,WAa2BC,CAAYJ,GAAtB,UAEvB,kBAACH,GAAD,CAAS7Q,QAASA,GACf+Q,GAAW,yBAAK7N,IAAKlD,EAAOmD,IAAI,2B,o5BC3BpC,IAAMkO,GAAuBrZ,IAAOC,IAAV,MAgBpBoU,GAAOrU,IAAOC,IAAV,MAGD,qBAAGC,MAAkBoZ,YAAYC,UAMpC,qBAAGrZ,MAAkBoZ,YAAY5Y,QAOjC8D,GAAMxE,IAAOC,IAAV,MCvBVuZ,G,4MACJ7X,MAAQ,CACNsP,UAAWzP,EAASuG,IAAI,UACxB2M,aAAclT,EAASuG,IAAI,mBAC3B0R,OAAQ,I,EAmCVC,eAAiB,SAAA3H,GAAc,IACrB0H,EAAW,EAAK9X,MAAhB8X,OACA1X,EAAgB,EAAKwE,MAArBxE,YAER,GAAI0X,GAAUA,EAAO1H,GAAY,CAC/B,IAAM3F,EAAUqN,EAAO1H,GAEvB,OAAOa,OAAOC,KAAKzG,GAChBqC,QAAO,SAAA6G,GAAM,OAAIvT,EAAYiI,MAAQsL,KACrCvG,KAAI,SAAAuG,GAAM,OAAIlJ,EAAQkJ,MAEzB,MAAO,I,kEA3CU,IAAD,SACkB3N,KAAKhG,MAAjCsP,EADU,EACVA,UAAWyD,EADD,EACCA,aACX3S,EAAgB4F,KAAKpB,MAArBxE,YAERkP,EAAU+D,GAAG,SAAS,SAAAtK,GACpB,EAAKrD,SAAS,CACZoS,OAAQ/O,EAASuK,WAIrBP,EAAaM,GAAG,SAAS,SAAAtK,GACvB,IAAuB,IAAnBA,EAASuK,MAAgB,CAAC,IACpBnI,EAAmB,EAAKvG,MAAxBuG,eAERmE,EACGlH,MAAM+C,EAAevE,IACrBwB,MAAMhI,EAAYiI,KAClBkL,eACAxB,QAAO,SAAAxJ,GACFA,GAAKC,QAAQC,MAAMF,Y,6CAMT,IAAD,EACevC,KAAKhG,MAAjCsP,EADa,EACbA,UAAWyD,EADE,EACFA,aAEnBzD,EAAUkE,MACVT,EAAaS,Q,+BAkBL,IACArI,EAAmBnF,KAAKpB,MAAxBuG,eAER,OACE,oCACGnF,KAAK+R,eAAe5M,EAAevE,IAAIvB,OACtC,kBAACqS,GAAD,KACG1R,KAAK+R,eAAe5M,EAAevE,IAAIwG,KAAI,SAACnN,EAAMwQ,GAAP,OAC1C,kBAAC,GAAD,CAAMtD,IAAKsD,GACT,8BAAOxQ,EAAP,KACA,kBAAC,GAAD,CAAK+M,MAAO,CAAEgL,eAAgB,WAC9B,kBAAC,GAAD,CAAKhL,MAAO,CAAEgL,eAAgB,WAC9B,kBAAC,GAAD,CAAKhL,MAAO,CAAEgL,eAAgB,gBAIlC,U,GAtEcjR,IAAMC,WA4E1BO,GAAkBC,YAAyB,CAC/CpH,YAAaF,EACbiL,eAAgBD,KAGHzD,eAAQF,GAARE,CAAyBoQ,ICxElCI,G,4MACJjY,MAAQ,CACNkY,iBAAkB,GAClBxB,SAAU,GACVyB,SAAS,G,EAgBXC,eAAiB,WACf,EAAKC,YAAYC,kB,EAOnBC,eAAiB,SAAA7B,GAAa,IACpBrB,EAAY,EAAKzQ,MAAjByQ,QACFmD,EAAQ,IAAIC,OAAOpD,EAAQtW,KAAM,MAEvC,OAAI2X,EACoBA,EAAS5C,QAAO,SAACC,EAAKkD,GAS1C,OAPEA,EAAQG,UACPH,EAAQG,QAAQsB,MAAMF,IAAUvB,EAAQhX,KAAK8C,KAAK2V,MAAMF,KAGhDvB,EAAQ5Q,OAAS4Q,EAAQhX,KAAK8C,KAAK2V,MAAMF,KADlDzE,EAAIhD,KAAKkG,GAIJlD,IACN,IAKE,I,EAGTpE,aAAe,SAACS,EAAWuI,GAGzB,GAF6B,EAAK3Y,MAA1BkY,iBAEc9H,GAiCf,KAEGsG,EAAa,EAAK1W,MAAlB0W,SAFH,EAGqC,EAAK9R,MAAvCgU,EAHH,EAGGA,cAAezN,EAHlB,EAGkBA,eAEnBA,GAAkBuL,EAASvL,EAAevE,KAC5CgS,EAAc,CACZ/H,MAAO,EAAKgI,mBAAmBnC,EAASvL,EAAevE,KACvDuP,QAAS,EAAK2C,qBAAqBpC,EAASvL,EAAevE,WAzC/B,CAChC,IAeMmS,GAbc,WAAhBJ,EAEY/Y,EAAUyP,WAAV,yBAAuCe,IAGvCxQ,EACXyP,WAAW,YACXW,IAAII,GACJf,WAAW,aAGUQ,QAAQ,YAAa,OAEXC,YAAW,SAAA/G,GAC7C,IAAMiQ,EAAkBjQ,EAASgH,KAAK3C,KAAI,SAAA6J,GAAO,OAAIA,EAAQhH,UAE7D,EAAKvK,UAAS,gBAAGgR,EAAH,EAAGA,SAAH,MAAmB,CAC/BA,SAAS,gBAAMA,EAAP,gBAAkBtG,EAAY4I,IACtCb,SAAS,SAKb,EAAKzS,UAAS,gBAAGwS,EAAH,EAAGA,iBAAH,MAA2B,CACvCA,iBAAiB,gBACZA,EADW,gBAEb9H,EAAY2I,IAEfZ,SAAS,Q,EAgBfnH,gBAAkB,WAAO,IACfkH,EAAqB,EAAKlY,MAA1BkY,iBACRjH,OAAOC,KAAKgH,GAAkBhI,SAAQ,SAAAG,GACpC6H,EAAiB7H,S,EAIrB4I,gBAAkB,WAAoB,IAAnBvC,EAAkB,uDAAP,GACpBtW,EAAgB,EAAKwE,MAArBxE,YAER,OAAOsW,EAAStJ,KAAI,SAAC6J,EAASiC,GAC5B,IAAMC,EAAa/Y,EAAYiI,MAAQ4O,EAAQhX,KAAK2G,GACpD,OAAO,kBAAC,GAAD,CAASuG,IAAK+L,EAAGjC,QAASA,EAASkC,WAAYA,Q,EAI1DN,mBAAqB,WAAoB,IAAnBnC,EAAkB,uDAAP,GACzB0C,EAAgB1C,EAAS5C,QAAO,SAACC,EAAKkD,GAI1C,OAHKlD,EAAIsF,SAASpC,EAAQhX,KAAK2G,KAC7BmN,EAAIhD,KAAKkG,EAAQhX,KAAK2G,IAEjBmN,IACN,IAEH,OAAOqF,EAAc/T,Q,EAGvByT,qBAAuB,WAAoB,IAAnBpC,EAAkB,uDAAP,GAC3BP,EAAU,GAiBhB,OAhBA3N,QAAQoB,IAAI8M,GAEZA,EAASxG,SAAQ,SAAA+G,GAAY,IAAD,EAGtBA,EADFhX,KAAQ2G,EAFgB,EAEhBA,GAAI7D,EAFY,EAEZA,KAAMyO,EAFM,EAENA,OAEpB2E,EAAQvP,GAAM,CACZ7D,OACAyO,SACA8H,cACEnD,EAAQvP,IAAOuP,EAAQvP,GAAR,cACXuP,EAAQvP,GAAR,cAA+B,EAC/B,MAIHqK,OAAOC,KAAKiF,GAChB/I,KAAI,SAAAuG,GAAM,uBACNwC,EAAQxC,GADF,CAET/M,GAAI+M,OAEL4F,MAAK,SAACC,EAAMC,GACX,OAAID,EAAKF,cAAgBG,EAAKH,eAAuB,EAC5CE,EAAKF,cAAgBG,EAAKH,cAAsB,EAC7C,M,mEAnJI,IAAD,EACqBtT,KAAKpB,MAArCuG,EADW,EACXA,eAAgB/K,EADL,EACKA,YAEpB+K,GAAkB/K,GACpB4F,KAAK2J,aAAaxE,EAAevE,GAAIuE,EAAenK,MAIlDgF,KAAKqS,aACPrS,KAAKoS,mB,6CASPpS,KAAKgL,oB,+BAqIG,IAAD,SACuBhL,KAAKhG,MAA3B0W,EADD,EACCA,SAAUyB,EADX,EACWA,QACVhN,EAAmBnF,KAAKpB,MAAxBuG,eAER,OACE,kBAACsL,GAAD,KACE,kBAACE,GAAD,KACGxL,GACDuL,EAASvL,EAAevE,MACvBuR,IACAzB,EAASvL,EAAevE,IAAIvB,OAC3B,kBAACwR,GAAD,KACE,wEAEA,KACH1L,IAAmBgN,EAClBnS,KAAKiT,gBACHjT,KAAKuS,eAAe7B,EAASvL,EAAevE,MAG9C,kBAAC,GAAD,CAASoG,MAAO,CAAEmF,gBAAiB,iBAErC,0BAAM/L,IAAK,SAAAsT,GAAI,OAAK,EAAKrB,YAAcqB,MAGxCvO,GACC,kBAACyL,GAAD,KACE,kBAAC,GAAD,Y,GAzLW7P,IAAMC,WAiMvBO,GAAkBC,YAAyB,CAC/C6N,QAAS/J,KAOI7D,eAAQF,IAJI,SAAAG,GAAQ,MAAK,CACtCkR,cAAe,SAAAzC,GAAO,OAAIzO,ErB9MQ,SAAAyO,GAAO,MAAK,CAC9CnV,KAAM6I,GAAgBG,uBACtB/I,QAASkV,GqB4M0BwD,CAAqBxD,QAG3C1O,CAA6CwQ,I,23GC3N5D,IAAMjV,GAAmBC,YAAH,MAOI,qBAAG1E,MAAkBgM,SAASrH,MAAM1E,MAMpC,qBAAGD,MAAkBgM,SAASrH,MAAM1E,MAG1C,qBAAG2E,QAAyB,UAAY,YAQxC,qBAAGA,QAAyB,YAAc,gBAMxDC,GAAiBH,YAAH,MAeA,qBAAGE,QAAyB,UAAY,YAQxC,qBAAGA,QAAyB,UAAY,cAM/CyW,GAAqBvb,IAAOC,IAAV,KAY3B0E,IAGSM,GAAQjF,IAAOkF,KAAV,MAIF,qBAAGhF,MAAkBgM,SAASrH,MAAMM,UAIhDJ,IAGSK,GAAUpF,IAAOqF,GAAV,MACT,qBAAGnF,MAAkBgM,SAASrH,MAAMS,eAKlCE,GAASxF,IAAOC,IAAV,MAKNwF,GAAQzF,IAAOC,IAAV,MAgBL,qBAAGC,MAAkBgM,SAASrH,MAAMa,iBACzB,qBAAGxF,MAAkBgM,SAASrH,MAAMS,eAOpC,qBAAGpF,MAAkBgM,SAASrH,MAAM1E,MAC/C,qBAAGD,MAAkBgM,SAASrH,MAAMS,eAmBlC,qBAAGpF,MAAkBgM,SAASrH,MAAMS,eAKtClB,GAAUpE,IAAOC,IAAV,MAMP0F,GAAS3F,IAAO4F,OAAV,MAYN,qBAAG1F,MAAkBgM,SAASrH,MAAMS,eACzB,qBAAGpF,MAAkBgM,SAASrH,MAAMa,iBACpC,qBAAGxF,MAAkBgM,SAASrH,MAAMS,eAI/C,qBAAGpF,MAAkBgM,SAASrH,MAAMa,iBACzB,qBAAGxF,MAAkBgM,SAASrH,MAAMS,eCjG7CkW,G,4MA9Db7Z,MAAQ,CACNoF,KAAM,M,EAGRd,kBAAoB,SAAAC,GAClBA,EAAMC,mB,EAGRC,aAAe,SAAAF,GACbA,EAAMG,iBADgB,IAEdU,EAAS,EAAKpF,MAAdoF,MAERT,EADoB,EAAKC,MAAjBD,SACAS,I,EAGVH,aAAe,SAAAV,GACb,IAAMW,EAAQX,EAAMY,OAAOD,MACrBE,EAAOF,GAASA,EAAMG,OAASH,EAAM,GAAK,KAChD,EAAKQ,SAAS,CACZN,U,uDAIM,IACAA,EAASY,KAAKhG,MAAdoF,KADD,EAEoBY,KAAKpB,MAAxBzB,EAFD,EAECA,QAAS8C,EAFV,EAEUA,MAEjB,OACE,kBAAC2T,GAAD,CAAoBzW,QAASA,EAAS+C,QAASD,GAC7C,kBAAC,GAAD,CACEC,QAASF,KAAK1B,kBACd6B,SAAUH,KAAKvB,aACftB,QAASA,GAET,kBAAC,GAAD,mBACA,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,8BAAOiC,EAAOA,EAAKrC,KAAO,iBAC1B,2BAAO4D,QAAQ,QAAf,UACA,2BACE3F,KAAK,OACL+B,KAAK,OACL6D,GAAG,OACHC,OAAO,UACPH,SAAUV,KAAKf,iBAIrB,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAQ6B,UAAU,QAAQ9F,KAAK,SAASkF,QAASD,GAAjD,UAGA,kBAAC,GAAD,CAAQa,UAAU,UAAU9F,KAAK,UAAjC,iB,GArDkB+F,IAAMC,W,gtFCTpC,IAAM8S,GAAU7W,YAAH,MAsBA0T,GAAYtY,IAAOC,IAAV,MAMTyb,GAAuB1b,IAAOC,IAAV,MAUpB0b,GAAwB3b,IAAOkF,KAAV,MAOrB0W,GAAa5b,IAAO4W,MAAV,MAKD,qBAAG1W,MAAkB2b,aAAa1b,MAE7C,qBAAGD,MAAkB2b,aAAanb,QAKhC,qBAAGR,MAAkB2b,aAAapM,eAKb,qBAAGvP,MAAkB2b,aAAaC,WAIvDC,GAAa/b,IAAO4F,OAAV,MACZ,qBAAG1F,MAAkB2b,aAAaG,WACzCP,IAaSQ,GAAYjc,IAAO4F,OAAV,MACA,qBAAG1F,MAAkB2b,aAAaK,UACpDT,IAISU,GAAWnc,IAAO4F,OAAV,MACC,qBAAG1F,MAAkB2b,aAAaO,UAC7C,qBAAGlc,MAAkB2b,aAAaQ,SACzCZ,IASSxL,GAAUjQ,IAAOC,IAAV,MAYE,qBAAGC,MAAkB2b,aAAaQ,UAM3CC,GAActc,IAAOuc,SAAV,MAkBN,qBAAGrc,MAAkB2b,aAAaU,YAKvCC,GAAcxc,YAAOyc,KAAPzc,CAAH,MC9GlB0c,G,4MACJ/a,MAAQ,CACNoP,YAAaxP,EAAUyP,WAAW,YAClC2L,WAAYlb,EAAQsG,MACpBkJ,UAAWzP,EAASuG,IAAI,UACxB6U,aAAc,GACdC,WAAY,KACZC,gBAAiB,EACjBlE,QAAS,GACTkB,SAAS,EACTiD,OAAQ,GACRlY,OAAO,EACPmY,aAAa,G,EAYf5W,aAAe,SAAAF,GACbA,EAAMG,iBACN,EAAK4W,e,EAGPrW,aAAe,SAAAV,GAAU,IAAD,EACEA,EAAMY,OAAtBpC,EADc,EACdA,KAAM8C,EADQ,EACRA,MAEd,EAAKH,SAAL,gBACG3C,EAAO8C,K,EAIZyV,YAAc,WAAO,IAAD,EACsB,EAAKtb,MAArCiX,EADU,EACVA,QAASkB,EADC,EACDA,QAAS7I,EADR,EACQA,UADR,EAEsB,EAAK1K,MAArCxE,EAFU,EAEVA,YAAa+K,EAFH,EAEGA,eAErB,GAAK8L,IAAWkB,EAAhB,CAEA,EAAKzS,SAAS,CAAEyS,SAAS,IANP,MAQQ,EAAKoD,gBARb,mBAQXnV,EARW,KAQNoV,EARM,KAUlBpV,EACGkC,IAAI,EAAKmT,cAAc,CAAE7U,GAAI4U,EAAW5U,MACxCkC,MAAK,WACJ,EAAKpD,SAAS,CAAEyS,SAAS,EAAOlB,QAAS,KACzC3H,EAAUlH,MAAM+C,EAAevE,IAAIwB,MAAMhI,EAAYiI,KAAK0J,YAE3DH,OAAM,SAAArJ,GACLC,QAAQC,MAAMF,GACd,EAAK7C,UAAS,kBAAiB,CAC7B0V,OADY,EAAGA,OACApH,OAAOzL,GACtB4P,SAAS,W,EAKjBoD,cAAgB,WAAM,IAEZpQ,EAAmB,EAAKvG,MAAxBuG,eACAiE,EAAgB,EAAKpP,MAArBoP,YAEJhJ,EAAM,KACNoV,EAAa,KAEjB,GAA4B,WAAxBrQ,EAAenK,KAAmB,CACpC,IAAM0a,EAAoB9b,EAAUyP,WAAV,yBACNlE,EAAevE,KAEnC4U,EAAaE,EAAkB1L,MAC/B5J,EAAMsV,EAAkB1L,IAAIwL,EAAW5U,SAGvC4U,EAAapM,EACVY,IAAI7E,EAAevE,IACnByI,WAAW,YACXW,MAEH5J,EAAMgJ,EACHY,IAAI7E,EAAevE,IACnByI,WAAW,YACXW,IAAIwL,EAAW5U,IAGpB,MAAO,CAACR,EAAKoV,I,EAGf1J,cAAgB,SAAA1M,GACd,EAAKM,SAAS,CACZxC,OAAO,IAET,EAAKyY,YAAYvW,GACjBoD,QAAQoB,IAAI,YAAaxE,I,EAG3ByM,YAAc,WACZ,EAAKnM,SAAS,CACZxC,OAAO,IAETsF,QAAQoB,IAAI,W,EAGd6R,cAAgB,YAAsB,IAAnB7U,EAAkB,EAAlBA,GAAIgV,EAAc,EAAdA,QACb3E,EAAY,EAAKjX,MAAjBiX,QACA7W,EAAgB,EAAKwE,MAArBxE,YAEFyb,EAAiB,CACrBxE,UAAWrY,EAASY,UAAU8R,WAAWC,kBACzC/K,KACA3G,KAAM,CACJ2G,GAAIxG,EAAYiI,IAChBtF,KAAM3C,EAAYiJ,YAClBmI,OAAQpR,EAAYkJ,WAUxB,OANe,MAAXsS,EACFC,EAAc,MAAYD,EAE1BC,EAAc,QAAc5E,EAGvB4E,G,EAGTC,QAAU,WAAO,IACP3Q,EAAmB,EAAKvG,MAAxBuG,eACR,OAAIA,GAA0C,WAAxBA,EAAenK,KAC7B,gBAAN,OAAuBmK,EAAevE,IAE/B,e,EAIX+U,YAAc,SAAAvW,GAAS,IACb4V,EAAe,EAAKhb,MAApBgb,WAEFe,EADqB,EAAKnX,MAAxBuG,eAC4BvE,GAC9BoV,EAAQ,UAAM,EAAKF,UAAX,YAAwBG,eAAxB,QAEd,EAAKvW,SACH,CACEwW,YAAa,YACbhB,WAAYF,EAAW5S,MAAM4T,GAAUpT,IAAIxD,KAE7C,WACE,EAAKpF,MAAMkb,WAAW7H,GACpB,iBACA,SAAA8I,GACE,IAAMhB,EAAkBiB,KAAKC,MAC1BF,EAAKG,iBAAmBH,EAAKI,WAAc,KAE9C,EAAK7W,SAAS,CAAEyV,uBAElB,SAAA5S,GACEC,QAAQC,MAAMF,GAEd,EAAK7C,SAAS,CACZ0V,OAAQ,EAAKpb,MAAMob,OAAOpH,OAAOzL,GACjC2T,YAAa,QACbhB,WAAY,UAGhB,WACE,EAAKlb,MAAMkb,WAAWnS,SAAS3C,IAC5B4C,iBACAF,MAAK,SAAA0T,GACJ,EAAKC,gBAAgBD,EAAaT,MAEnCnK,OAAM,SAAArJ,GACLC,QAAQC,MAAMF,GACd,EAAK7C,UAAS,gBAAG0V,EAAH,EAAGA,OAAH,EAAWc,YAAX,EAAwBhB,WAAxB,MAA0C,CACtDE,OAAQA,EAAOpH,OAAOzL,GACtB2T,YAAa,QACbhB,WAAY,mB,EAS5BuB,gBAAkB,SAACb,EAASG,GAAkB,IAAD,EACjB,EAAKR,gBADY,mBACpCnV,EADoC,KAC/BoV,EAD+B,KAG3CpV,EACGkC,IAAI,EAAKmT,cAAc,CAAE7U,GAAI4U,EAAW5U,GAAIgV,aAC5C9S,MAAK,WACJ,EAAKpD,SAAS,CACZwW,YAAa,YAGhBtK,OAAM,SAAArJ,GACLC,QAAQC,MAAMF,GACd,EAAK7C,UAAS,kBAAiB,CAC7B0V,OADY,EAAGA,OACApH,OAAOzL,W,EAK9BmU,cAAgB,WAAO,IAAD,EACW,EAAK1c,MAA5BiX,EADY,EACZA,QAAS3H,EADG,EACHA,UADG,EAEoB,EAAK1K,MAArCuG,EAFY,EAEZA,eAAgB/K,EAFJ,EAEIA,YAEpB+K,GAAkB8L,EAAQ5R,OAAS,EACrCiK,EACGlH,MAAM+C,EAAevE,IACrBwB,MAAMhI,EAAYiI,KAClBC,IAAIlI,EAAYiJ,aACV8B,GAAkB/K,GAC3BkP,EAAUlH,MAAM+C,EAAevE,IAAIwB,MAAMhI,EAAYiI,KAAK0J,U,EAI9D4K,mBAAqB,WACnB,EAAKjX,UAAS,kBAAsB,CAClC2V,aADY,EAAGA,iB,EAKnBuB,gBAAkB,SAAA3F,GAChB,OAAOA,EAAQxJ,QAAQ,sBAAsB,SAAA9D,GAC3CA,EAAIA,EAAE8D,QAAQ,KAAM,IACpB,IAAIoP,EAAQC,KAAWC,OAAOpT,GAC9B,GAAqB,qBAAVkT,EAAuB,CAChC,IAAIG,EAAUH,EAAMI,OACpB,GAAuB,qBAAZD,EACT,OAAOA,EAIX,OADArT,EAAC,WAAOA,EAAP,S,EAKLuT,eAAiB,SAAAL,GAAU,IACjB5F,EAAY,EAAKjX,MAAjBiX,QACFkG,EAAa,EAAKP,gBAAL,UAAwB3F,GAAxB,OAAkC4F,EAAMO,SAC3D,EAAK1X,SACH,CACEuR,QAASkG,EACT9B,aAAa,IAEf,kBAAM,EAAKgC,gBAAgBC,Y,qEAzOC,OAA1BtX,KAAKhG,MAAMkb,aACblV,KAAKhG,MAAMkb,WAAWqC,SACtBvX,KAAKN,SAAS,CACZwV,WAAY,U,+BA0OR,IAAD,SAQHlV,KAAKhG,MANPiX,EAFK,EAELA,QACAkB,EAHK,EAGLA,QACAjV,EAJK,EAILA,MACAiY,EALK,EAKLA,gBACAe,EANK,EAMLA,YACAb,EAPK,EAOLA,YAPK,EAS2BrV,KAAKpB,MAA/BuG,EATD,EASCA,eAAgB5M,EATjB,EASiBA,MAExB,OACE,kBAAC,GAAD,KACE,kBAACwb,GAAD,KACGsB,GACC,kBAACR,GAAD,CACE/T,UAAU,cACVwB,IAAI,UACJkV,MAAM,gBACNX,MAAM,WACNY,SAAUzX,KAAKkX,eACflQ,MAAO,CACL0Q,MAAO,SAETnf,MAAsB,SAAfA,EAAMwE,KAAkB,OAAS,QACxC4a,SAAUpf,EACVkL,MAAM,aAIZ,kBAAC,GAAD,CACEtG,QAASD,EACTyB,QAASqB,KAAK8L,cACd7L,MAAOD,KAAK6L,cAEd,kBAACmI,GAAD,CAAuB7T,SAAUH,KAAKvB,cACnB,cAAhByX,EACC,kBAACvB,GAAD,CAAa3Z,KAAK,WAAWyF,IAAI,MAAMZ,MAAOsV,IAC5C,KACJ,kBAAClB,GAAD,CACE7T,IAAK,SAAAsT,GAAI,OAAK,EAAK2D,gBAAkB3D,GACrCkE,UAAQ,EACR5c,KAAK,OACL+B,KAAK,UACL2D,SAAUV,KAAKf,aACf4Y,UAAW7X,KAAK0W,cAChB7W,MAAOoR,EACP6G,aAAa,MACbhQ,YACE3C,GAAkBA,EAAepI,KAAjC,kBACuC,WAAxBoI,EAAenK,KAAoB,IAAM,KADxD,OAEMmK,EAAepI,MAEjB,YAGR,kBAACqX,GAAD,CACEpZ,KAAK,SACLkF,QAAS,kBAAM,EAAKR,SAAS,CAAExC,OAAO,KACtC6a,SAA0B,cAAhB7B,GAEO,cAAhBA,EAA8B,kBAAC,GAAD,MAAc,kBAAC,IAAD,OAE/C,kBAAC5B,GAAD,CAAWtZ,KAAK,SAASkF,QAASF,KAAK2W,oBACrC,0BAAMqB,KAAK,MAAMC,aAAW,SAA5B,iBAIF,kBAACzD,GAAD,CAAUxZ,KAAK,SAAS+c,SAAU5F,IAAYhN,GAC3CgN,EAAU,kBAAC,GAAD,MAAc,kBAAC,IAAD,a,GAlUVpR,IAAMC,WA0U3BO,GAAkBC,YAAyB,CAC/CjJ,MAAO6C,IAGMqG,eAAQF,GAARE,CAAyBsT,ICpVlCmD,GAAiB1W,YAAyB,CAC9CpH,YAAaF,EACbiL,eAAgBD,KAGHzD,eAAQyW,GAARzW,EAnBO,SAAC,GAAqC,IAAnCrH,EAAkC,EAAlCA,YAAa+K,EAAqB,EAArBA,eACpC,OACE,kBAACiJ,GAAD,KACE,kBAAC,GAAD,CACEhU,YAAaA,EACb+K,eAAgBA,IAGlB,kBAAC,GAAD,CAAU/K,YAAaA,EAAa+K,eAAgBA,IACpD,kBAAC,GAAD,CAAc/K,YAAaA,EAAa+K,eAAgBA,Q,i5ECpBvD,IAAMgT,GAAqB9f,IAAOC,IAAV,MAcP,qBAAGC,MAAkB6f,KAAK5f,MACf,qBAAGD,MAAkB6f,KAAKzf,UAC5C,qBAAGoN,YACA,kBAAoB,uBAI3BsS,GAAOhgB,IAAOC,IAAV,MAGK,qBAAGC,MAAkB6f,KAAK5f,MAUnC,qBAAGD,MAAkB6f,KAAKza,eAM1B,qBAAGpF,MAAkB6f,KAAKra,iBAK1Bua,GAAYjgB,IAAOC,IAAV,MACX,qBAAGC,MAAkB6f,KAAKtf,YAAYC,QAC3B,qBAAGR,MAAkB6f,KAAKtf,YAAYN,MAmB/CoW,GAAQvW,IAAOC,IAAV,MAQLigB,GAAYlgB,IAAOC,IAAV,MAWTkgB,GAAYngB,IAAOC,IAAV,MAWTmgB,GAAgBpgB,IAAOqE,GAAV,MAWbgc,GAASrgB,IAAOgO,GAAV,MAkBNsS,GAAOtgB,IAAOC,IAAV,MCtCXiJ,GAAkBC,YAAyB,CAC/C2D,eAAgBD,GAChBG,eAAgBD,GAChBK,iBAAkBD,GAClBO,YAAaD,KAOArE,eAAQF,IAJI,SAAAG,GAAQ,MAAK,CACtCoD,WAAY,SAAAD,GAAO,OAAInD,EAASoD,GAAWD,QAG9BpD,EApEG,SAAC,GAMZ,IATY4P,EAIjBlM,EAKI,EALJA,eACAE,EAII,EAJJA,eACAI,EAGI,EAHJA,iBACAM,EAEI,EAFJA,YACAjB,EACI,EADJA,WAEA,OACE,kBAACqT,GAAD,CAAoBpS,YAAaA,GAC/B,kBAACuS,GAAD,CAAWpY,QAAS,kBAAM4E,GAAW,KACnC,kBAAC,IAAD,MACA,wCAEF,kBAACuT,GAAD,KACGlT,IAAmBM,EAClB,oCACE,kBAAC,GAAD,KACE,sCAAYN,EAAepI,MAC3B,2BAAIoI,EAAemG,UAErB,kBAACiN,GAAD,KACE,0CACA,kCAAQpT,EAAeoG,UAAUxO,OAEnC,kBAACyb,GAAD,KACE,0CACA,+BA7BKnH,EA6BalM,EAAesG,UA5B7C6F,KAAOD,EAAUE,UAAUqH,OAAO,oBA+BxB,KAEHvT,IACAI,GACDJ,EAAe8K,QAAQ9Q,OACrB,kBAACoZ,GAAD,KACE,8CACCpT,EAAe8K,QAAQ/I,KACtB,WAAkCqD,GAAlC,IAAG1N,EAAH,EAAGA,KAAMyO,EAAT,EAASA,OAAQ8H,EAAjB,EAAiBA,cAAjB,OACE,kBAACoF,GAAD,CAAQvR,IAAKsD,GACX,yBAAKlH,IAAKiI,EAAQhI,IAAI,WACtB,kBAACmV,GAAD,KACE,4BAAK5b,GACL,8BACGuW,EAAe,IACfA,EAAgB,EAAI,WAAa,UAAW,WAOvD,UCjEGuF,GAVH,WACV,OACE,kBAACzgB,EAAD,KACE,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,QCDc0gB,QACW,cAA7B5V,OAAOC,SAAS4V,UAEe,UAA7B7V,OAAOC,SAAS4V,UAEhB7V,OAAOC,SAAS4V,SAASrG,MACvB,2DCZN,IAMMnR,GAAkBC,YAAyB,CAC/CnG,aAAcD,IAGDqG,eAAQF,GAARE,EAVa,SAAC,GAAD,IAAGuX,EAAH,EAAGA,SAAU3d,EAAb,EAAaA,aAAiBuD,EAA9B,mDAC1B,kBAAC,IAAD,eAAerG,MAAO8C,GAAkBuD,GACrCoa,M,moCCNE,IAAMC,GAAwB5gB,IAAOC,IAAV,MAGZ,qBAAGC,MAAkBC,MAO9B0gB,GAAwB7gB,IAAOC,IAAV,MASrBmF,GAAUpF,IAAO8gB,GAAV,MAET,qBAAG5gB,MAAkBgF,KAAK6b,eAKxBC,GAAehhB,IAAOkF,KAAV,MACH,qBAAGhF,MAAkBgF,KAAK/E,MAYnC8gB,GAAwBjhB,IAAOC,IAAV,MAKrB,qBAAGC,MAAkBQ,Q,w6BC5C3B,IAAMiF,GAAS3F,IAAO4F,OAAV,MAEG,gBAAG1F,EAAH,EAAGA,MAAH,SAAUwf,SACjBxf,EAAM0F,OAAOsb,WAAahhB,EAAM0F,OAAOzF,MAC3C,qBAAGD,MAAkB0F,OAAOlF,QAGxB,qBAAGsP,YAEN,gBAAGmR,EAAH,EAAGA,OAAH,OAAiBA,GAAkB,UAClC,qBAAGC,WAUQ,qBAAGlhB,MAAkB0F,OAAOzF,MAC5B,qBAAGD,MAAkB0F,OAAOlF,QACvC,qBAAGR,MAAkB0F,OAAOzF,MAKhB,qBAAGD,MAAkB0F,OAAOlF,QAGxCuP,GAAUjQ,IAAOC,IAAV,MAYE,qBAAGC,MAAkB0F,OAAOzF,MCrCnCkhB,GAJM,SAAC,GAAqC,IAAnCV,EAAkC,EAAlCA,SAAU7G,EAAwB,EAAxBA,QAAYvT,EAAY,uCACxD,OAAO,kBAAC,GAAWA,EAAQuT,EAAU,kBAAC,GAAD,MAAc6G,I,glCCFrD,IAAMW,GAAc1c,YAAH,MACe,qBAAG1E,MAAkBgF,KAAKkF,MAAMqF,eAC1C,qBAAGvP,MAAkBgF,KAAKkF,MAAMjK,MAC3C,qBAAGD,MAAkBgF,KAAKkF,MAAM1J,QAG9B,qBAAGR,MAAkBgF,KAAKkF,MAAMqF,eAIhC8R,GAAiBvhB,IAAOC,IAAV,MAKdwF,GAAQzF,IAAO4W,MAAV,MACI,qBAAG1W,MAAkBgF,KAAKsc,MAAMrhB,MAMvC,qBAAG6P,UAA2B,UAClC,qBAAG9P,MAAkBgF,KAAKsc,MAAM9gB,QAEzB,qBAAG+gB,KAAmB,OAAS,UAGpC,qBAAGvhB,MAAkBgF,KAAKsc,MAAM/R,eAMrC,gBAAGvP,EAAH,EAAGA,MAAH,SAAUkK,MACFlK,EAAMgF,KAAKkF,MAAM1J,KAAOR,EAAMgF,KAAKsc,MAAME,eAGrD,qBAAGtX,MAAqBkX,GAAc,MAMX,qBAAGphB,MAAkBgF,KAAKsc,MAAM9gB,QAIlDihB,GAAqB3hB,IAAOyQ,KAAV,MCrBhBmR,GApBK,SAAC,GAAyC,IAAvCC,EAAsC,EAAtCA,SAAUJ,EAA4B,EAA5BA,KAAMrX,EAAsB,EAAtBA,MAAU7D,EAAY,4CACrDrG,EAAQ2I,cAEd,OACE,kBAAC0Y,GAAD,KACE,kBAACI,GAAD,KACGF,EACC,kBAACA,EAAD,CACErW,MAAOhB,EAAQlK,EAAMgF,KAAKkF,MAAMqF,YAAcvP,EAAMgF,KAAKsc,MAAMrd,KAC/D0K,KAAMgT,GAAY,KAGpB,IAGJ,kBAAC,GAAD,iBAAWtb,EAAX,CAAkB6D,MAAOA,EAAOqX,KAAMA,O,odCtBrC,IAAMK,GAAqB9hB,IAAOC,IAAV,MAET,qBAAGC,MAAkBgF,KAAKkF,MAAMjK,MAC3C,qBAAGD,MAAkBgF,KAAKkF,MAAM1J,QAO9B0E,GAAUpF,IAAOqF,GAAV,MAIP0c,GAAQ/hB,IAAOwD,EAAV,MCDHwe,GAXG,SAAC,GAAsD,IAAD,IAAnDjF,cAAmD,MAA1C,CAAC,CAAEnE,QAAS,uBAA8B,EACtE,OACE,kBAACkJ,GAAD,KACE,kBAAC,GAAD,cACC/E,EAAOhO,KAAI,SAAC3E,EAAOyQ,GAAR,OACV,kBAACkH,GAAD,CAAOjT,IAAK+L,GAAIzQ,EAAMwO,c,yMCNvB,IAAMqJ,GAAOjiB,YAAOkiB,KAAPliB,CAAH,MACN,qBAAGE,MAAkBiiB,KAAKzhB,QAIb,qBAAGR,MAAkBiiB,KAAKhiB,MAIrC,qBAAGD,MAAkBiiB,KAAKzhB,QCLxB0hB,GAJI,SAAC,GAA4B,IAA1BzB,EAAyB,EAAzBA,SAAapa,EAAY,6BAC7C,OAAO,kBAAC0b,GAAS1b,EAAQoa,ICQZ0B,GAZc,SAAAC,GAC3B,IAAMC,EAAYC,WAAWC,KAC3BC,KAAKJ,GACFK,MAAM,IACN5T,KAAI,SAAA6T,GAAI,OAAIA,EAAKC,WAAW,OAEjC,OAAO,IAAIC,KAAK,CAACP,GAAY,CAAE5f,KAAM,cAMxB0f,CAFb,gntBCcIU,G,4MACJphB,MAAQ,CACNqhB,SAAU,GACVC,MAAO,GACPC,SAAU,GACVC,gBAAiB,GACjBpG,OAAQ,GACRjD,SAAS,EACT7C,SAAU1V,EAAUyP,WAAW,U,EAGjCoS,YAAc,WACZ,IACIhZ,EADE2S,EAAS,GAGf,GAAI,EAAKsG,YAAY,EAAK1hB,OACxByI,EAAQ,CAAEwO,QAAS,uBACnB,EAAKvR,SAAS,CAAE0V,OAAQA,EAAOpH,OAAOvL,SACjC,IAAK,EAAKkZ,gBAAgB,EAAK3hB,OAIpC,OAAO,EAHPyI,EAAQ,CAAEwO,QAAS,wBACnB,EAAKvR,SAAS,CAAE0V,OAAQA,EAAOpH,OAAOvL,O,EAM1CiZ,YAAc,YAAqD,IAAlDL,EAAiD,EAAjDA,SAAUC,EAAuC,EAAvCA,MAAOC,EAAgC,EAAhCA,SAAUC,EAAsB,EAAtBA,gBAC1C,OACGH,EAAShc,SACTic,EAAMjc,SACNkc,EAASlc,SACTmc,EAAgBnc,Q,EAIrBsc,gBAAkB,YAAoC,IAAjCJ,EAAgC,EAAhCA,SAAUC,EAAsB,EAAtBA,gBAC7B,QAAID,EAASlc,OAAS,GAAKmc,EAAgBnc,OAAS,IAC3Ckc,IAAaC,G,EAIxB/c,aAAe,SAAAF,GACbA,EAAMG,iBADgB,MAGyB,EAAK1E,MAA5CqhB,EAHc,EAGdA,SAAUC,EAHI,EAGJA,MAAOC,EAHH,EAGGA,SAAUpJ,EAHb,EAGaA,QAC3BpX,EAAmB,EAAK6D,MAAxB7D,eAEH,EAAK0gB,gBAAiBtJ,IAE3B,EAAKzS,SAAS,CAAE0V,OAAQ,GAAIjD,SAAS,IAErCxY,EACGiiB,+BAA+BN,EAAOC,GACtCzY,KAFH,iCAAA+Y,EAAA,MAEQ,WAAMC,GAAN,gBAAAD,EAAA,6DACJrZ,QAAQoB,IAAIkY,GAERC,EAAY,KAHZ,kBAMgB,EAAKC,aAAa,CAClCV,QACAjZ,IAAKyZ,EAAY7hB,KAAKoI,MARtB,OAMF0Z,EANE,uDAWFvZ,QAAQC,MAAR,MAXE,QAcJqZ,EAAY7hB,KACTgiB,cAAc,CACb5Y,YAAagY,EACb/X,SAAUyY,IAEXjZ,MAAK,WACJ,EAAKoZ,SAASJ,GAAahZ,MAAK,WAC9B/H,EAAe,gBAAK+gB,EAAY7hB,OAChCuI,QAAQoB,IAAI,oBAIfgI,OAAM,SAAArJ,GACLC,QAAQC,MAAMF,GACd,EAAK7C,UAAS,kBAAiB,CAC7B0V,OADY,EAAGA,OACApH,OAAOzL,UA7BxB,yDAFR,uDAmCGqJ,OAAM,SAAArJ,GACLC,QAAQC,MAAMF,GACd,EAAK7C,UAAS,kBAAiB,CAC7B0V,OADY,EAAGA,OACApH,OAAOzL,UAGzB4Z,SAAQ,WACP,EAAKzc,SAAS,CAAEyS,SAAS,S,EAI/B+J,SAAW,SAAAJ,GAAgB,IACjBxM,EAAa,EAAKtV,MAAlBsV,SADgB,EAEewM,EAAY7hB,KAA3CoI,EAFgB,EAEhBA,IAAKgB,EAFW,EAEXA,YAAaC,EAFF,EAEEA,SAC1B,OAAOgM,EAAStF,IAAI3H,GAAKC,IAAI,CAC3BvF,KAAMsG,EACNmI,OAAQlI,K,EAIZrE,aAAe,SAAAV,GACb,EAAKmB,SAAL,gBACGnB,EAAMY,OAAOpC,KAAOwB,EAAMY,OAAOU,S,EAQtCmc,aAAe,YAAc,IAAX3Z,EAAU,EAAVA,IAChB,OAAO,IAAI+Z,SAAQ,SAACC,EAASC,GAC3BxiB,EACGsG,MACAgC,MAFH,wBAE0BC,IACvBO,IAAI5D,GAAY,CAAE6D,YAAa,eAC/BC,MAAK,SAAAC,GACJA,EAAS3C,IAAI4C,iBAAiBF,MAAK,SAAAG,GAAG,OAAIoZ,EAAQpZ,SAEnD2I,OAAM,SAAArJ,GACLC,QAAQC,MAAMF,GACd+Z,EAAO/Z,U,+DAfE6S,EAAQmH,GACvB,OAAOnH,EAAOoH,MAAK,SAAA/Z,GAAK,OAAIA,EAAMwO,QAAQvJ,cAAc2L,SAASkJ,Q,+BAmBzD,IAAD,EAQHvc,KAAKhG,MANPqhB,EAFK,EAELA,SACAC,EAHK,EAGLA,MACAC,EAJK,EAILA,SACAC,EALK,EAKLA,gBACApG,EANK,EAMLA,OACAjD,EAPK,EAOLA,QAGF,OACE,kBAAC8G,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,GAAD,iBACA,kBAACG,GAAD,CAAclZ,SAAUH,KAAKvB,cAC3B,kBAAC,GAAD,CACEqb,KAAM2C,IACN1f,KAAK,WACL+K,YAAY,WACZpH,SAAUV,KAAKf,aACfY,MAAOwb,IAET,kBAAC,GAAD,CACEvB,KAAM4C,IACN1hB,KAAK,QACL+B,KAAK,QACL+K,YAAY,QACZpH,SAAUV,KAAKf,aACfY,MAAOyb,EACP7Y,MAAOzC,KAAK2c,iBAAiBvH,EAAQ,WAEvC,kBAAC,GAAD,CACE0E,KAAM8C,IACN5hB,KAAK,WACL+B,KAAK,WACL+K,YAAY,WACZpH,SAAUV,KAAKf,aACfY,MAAO0b,EACP9Y,MAAOzC,KAAK2c,iBAAiBvH,EAAQ,cAEvC,kBAAC,GAAD,CACE0E,KAAM8C,IACN5hB,KAAK,WACL+B,KAAK,kBACL+K,YAAY,mBACZpH,SAAUV,KAAKf,aACfY,MAAO2b,EACP/Y,MAAOzC,KAAK2c,iBAAiBvH,EAAQ,cAEvC,kBAAC,GAAD,CACE2C,SAAU5F,EACVA,QAASA,EACTqH,OAAO,OACPxe,KAAK,SACLqN,SAAS,QALX,WAUD+M,EAAO/V,OAAS,kBAAC,GAAD,CAAW+V,OAAQA,IAAa,KACjD,kBAACkE,GAAD,KACE,6BACE,iDACA,kBAAC,GAAD,CAAYuD,GAAG,UAAf,yB,GAnMa9b,IAAMC,WAgNlBS,eAAQ,MAJI,SAAAC,GAAQ,MAAK,CACtC3G,eAAgB,SAAAd,GAAI,OAAIyH,EAAS3G,EAAed,QAGnCwH,CAAkC2Z,I,olCCtO1C,IAAM0B,GAAqBzkB,IAAOC,IAAV,MAGT,qBAAGC,MAAkBC,MAO9BukB,GAAqB1kB,IAAOC,IAAV,MASlBmF,GAAUpF,IAAO8gB,GAAV,MAET,qBAAG5gB,MAAkBgF,KAAK6b,eAKxB4D,GAAY3kB,IAAOkF,KAAV,MACA,qBAAGhF,MAAkBgF,KAAK/E,MAYnCykB,GAA2B5kB,IAAOC,IAAV,MAKxB,qBAAGC,MAAkBQ,QCmEnBmkB,G,4MA7FbljB,MAAQ,CACNshB,MAAO,GACPC,SAAU,GACVnG,OAAQ,GACRjD,SAAS,G,EAGX1T,aAAe,SAAAF,GAEb,GADAA,EAAMG,iBACD,EAAK+c,YAAY,EAAKzhB,OAA3B,CAEA,EAAK0F,SAAS,CAAE0V,OAAQ,GAAIjD,SAAS,IAJf,MAMM,EAAKnY,MAAzBshB,EANc,EAMdA,MAAOC,EANO,EAMPA,SAEf5hB,EACGwjB,2BAA2B7B,EAAOC,GAClCzY,MAAK,SAAAsa,GACJ5a,QAAQoB,IAAIwZ,MAGbxR,OAAM,SAAArJ,GACLC,QAAQC,MAAMF,GACd,EAAK7C,UAAS,kBAAiB,CAC7B0V,OADY,EAAGA,OACApH,OAAOzL,GACtB4P,SAAS,W,EAKjBsJ,YAAc,gBAAGH,EAAH,EAAGA,MAAOC,EAAV,EAAUA,SAAV,OAAyBD,GAASC,G,EAEhDtc,aAAe,SAAAV,GACb,EAAKmB,SAAL,gBACGnB,EAAMY,OAAOpC,KAAOwB,EAAMY,OAAOU,S,+DAIrBuV,EAAQmH,GACvB,OAAOnH,EAAOoH,MAAK,SAAA/Z,GAAK,OAAIA,EAAMwO,QAAQvJ,cAAc2L,SAASkJ,Q,+BAGzD,IAAD,EACsCvc,KAAKhG,MAA1CshB,EADD,EACCA,MAAOC,EADR,EACQA,SAAUnG,EADlB,EACkBA,OAAQjD,EAD1B,EAC0BA,QAEjC,OACE,kBAAC2K,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,GAAD,cACA,kBAACC,GAAD,CAAW7c,SAAUH,KAAKvB,cACxB,kBAAC,GAAD,CACEqb,KAAM4C,IACN1hB,KAAK,QACL+B,KAAK,QACL+K,YAAY,QACZpH,SAAUV,KAAKf,aACfY,MAAOyb,EACP7Y,MAAOzC,KAAK2c,iBAAiBvH,EAAQ,WAEvC,kBAAC,GAAD,CACE0E,KAAM8C,IACN5hB,KAAK,WACL+B,KAAK,WACL+K,YAAY,WACZpH,SAAUV,KAAKf,aACfY,MAAO0b,EACP9Y,MAAOzC,KAAK2c,iBAAiBvH,EAAQ,cAEvC,kBAAC,GAAD,CACE2C,SAAU5F,EACVA,QAASA,EACTqH,OAAO,OACPxe,KAAK,SACLqN,SAAS,QALX,WAWD+M,EAAO/V,OAAS,kBAAC,GAAD,CAAW+V,OAAQA,IAAa,KAEjD,kBAAC6H,GAAD,KACE,6BACE,wDACA,kBAAC,GAAD,CAAYJ,GAAG,aAAf,4B,GArFU9b,IAAMC,W,mCCjBjBqc,GAAS,CACpBC,IAAK,UACLC,eAAgB,wBAChBC,SAAU,yBACVC,MAAO,UACPC,YAAa,UACbC,WAAY,0BACZC,KAAM,UACNC,UAAW,0BACXC,KAAM,UACNC,gBAAiB,2BACjBC,kBAAmB,4BACnBC,UAAW,4BACXC,cAAe,4BACfC,MAAO,UACPC,kBAAmB,UACnBC,YAAa,UACbC,MAAO,UACPC,WAAY,2BACZC,eAAgB,2BAChBC,SAAU,UACVC,OAAQ,UACRC,YAAa,2BAgUA,IACbC,MA3TmB,CACnB7hB,KAAM,QACNvE,GAAI6kB,GAAOoB,SACX1lB,KAAMskB,GAAOS,KACbxN,UAAW,CACT9X,GAAI6kB,GAAOY,UACX1N,GAAI8M,GAAOW,kBACXxN,QAAS6M,GAAOU,iBAElBrlB,UAAW,CACTF,GAAI6kB,GAAOiB,MACX3lB,OAAQ0kB,GAAOQ,UACf/kB,YAAa,CACXN,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,OAGjB3M,QAAS,CACPtT,YAAa0f,GAAOc,MACpBpgB,cAAesf,GAAOU,iBAExBrN,SAAU,CACRlY,GAAI6kB,GAAOiB,MACXxW,YAAauV,GAAOU,iBAEtBpM,YAAa,CACXC,OAAQyL,GAAOa,cACfW,IAAKxB,GAAOS,KACZ/kB,KAAMskB,GAAOS,MAEf5J,aAAc,CACZ1b,GAAI6kB,GAAOiB,MACXjK,SAAUgJ,GAAOS,KACjBvJ,QAAS8I,GAAOsB,YAChBlK,OAAQ4I,GAAOQ,UACfnJ,OAAQ2I,GAAOO,KACf9V,YAAauV,GAAOS,KACpB/kB,KAAMskB,GAAOc,MACbhK,QAASkJ,GAAOO,KAChBkB,QAASzB,GAAOG,SAChB5I,SAAUyI,GAAOM,YAEnBrP,cAAe,CACb9V,GAAI6kB,GAAOiB,MACXvlB,KAAMskB,GAAOc,MACbxP,SAAU0O,GAAOqB,OACjBhQ,YAAa2O,GAAOO,KACpBzO,SAAUkO,GAAOO,KACjBnP,OAAQ,CACN1V,KAAMskB,GAAOS,KACbhW,YAAauV,GAAOU,gBACpBvlB,GAAI6kB,GAAOY,WAEbzjB,OAAQ,CACN0B,OAAQmhB,GAAOI,MACfrhB,QAASihB,GAAOC,IAChBnhB,KAAMkhB,GAAOqB,SAGjBnjB,eAAgB,CACd/C,GAAI6kB,GAAOO,KACX7kB,KAAMskB,GAAOiB,MACbviB,QAASshB,GAAOoB,SAChBjiB,KAAM6gB,GAAOoB,SACb9hB,SAAU0gB,GAAOmB,eACjBviB,aAAc,CACZC,OAAQmhB,GAAOK,YACfthB,QAASihB,GAAOC,IAChBnhB,KAAMkhB,GAAOqB,QAEfxhB,MAAO,CACL1E,GAAI6kB,GAAOQ,UACXrgB,QAAS6f,GAAOiB,MAChB3gB,YAAa0f,GAAOO,KACpB7f,cAAesf,GAAOiB,MACtBS,cAAe1B,GAAOO,KACtBoB,eAAgB3B,GAAOiB,QAG3BrY,QAAS,CACPzN,GAAI6kB,GAAOsB,YACX5lB,KAAMskB,GAAOqB,OACbnY,MAAO8W,GAAOsB,YACdniB,KAAM6gB,GAAOqB,QAEfna,SAAU,CACR/L,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,KACbrX,MAAO8W,GAAOQ,UACdrhB,KAAM6gB,GAAOO,KACb1gB,MAAO,CACL1E,GAAI6kB,GAAOQ,UACXrgB,QAAS6f,GAAOiB,MAChB3gB,YAAa0f,GAAOO,KACpB7f,cAAesf,GAAOiB,MACtBS,cAAe1B,GAAOO,KACtBoB,eAAgB3B,GAAOiB,OAEzBvV,gBAAiBsU,GAAOiB,MACxBtV,gBAAiBqU,GAAOO,MAE1BtR,eAAgB,CACd9T,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,KACbrX,MAAO8W,GAAOQ,UACdrhB,KAAM6gB,GAAOO,KACbpjB,OAAQ,CACN0B,OAAQmhB,GAAOI,MACfrhB,QAASihB,GAAOC,IAChBnhB,KAAMkhB,GAAOqB,SAGjBtG,KAAM,CACJ5f,GAAI6kB,GAAOiB,MACX3gB,YAAa0f,GAAOc,MACpBpgB,cAAesf,GAAOS,KACtBnlB,OAAQ0kB,GAAOQ,UACf/kB,YAAa,CACXN,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,OAGjB5V,QAAS,CACPxP,GAAI6kB,GAAOoB,SACX1lB,KAAMskB,GAAOO,KACb1V,SAAUmV,GAAOO,KACjBzV,SAAUkV,GAAOQ,WAEnBtgB,KAAM,CACJ/E,GAAI6kB,GAAOiB,MACXlF,YAAaiE,GAAOS,KACpB/kB,KAAMskB,GAAOS,KACbjE,MAAO,CACLrd,KAAM6gB,GAAOS,KACb/kB,KAAMskB,GAAOS,KACbtlB,GAAI6kB,GAAOoB,SACX3W,YAAauV,GAAOU,gBACpBhE,YAAasD,GAAOO,MAEtBnb,MAAO,CACLjK,GAAI6kB,GAAOG,SACXzkB,KAAMskB,GAAOC,IACbxV,YAAauV,GAAOE,iBAGxBtf,OAAQ,CACNlF,KAAMskB,GAAOiB,MACb9lB,GAAI6kB,GAAOO,KACXrE,WAAY8D,GAAOQ,WAErBrD,KAAM,CACJhiB,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,OAoKfqB,KA/JkB,CAClBliB,KAAM,OACNvE,GAAI6kB,GAAOe,kBACXrlB,KAAMskB,GAAOiB,MACbhO,UAAW,CACT9X,GAAI6kB,GAAOY,UACX1N,GAAI8M,GAAOW,kBACXxN,QAAS6M,GAAOU,iBAElBrlB,UAAW,CACTF,GAAI6kB,GAAOgB,YACX1lB,OAAQ0kB,GAAOQ,UACf/kB,YAAa,CACXN,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,OAGjB3M,QAAS,CACPtT,YAAa0f,GAAOiB,MACpBvgB,cAAesf,GAAOkB,YAExB7N,SAAU,CACRlY,GAAI6kB,GAAOgB,YACXvW,YAAauV,GAAOkB,YAEtB5M,YAAa,CACXC,OAAQyL,GAAOe,kBACfS,IAAKxB,GAAOkB,WACZxlB,KAAMskB,GAAOkB,YAEfrK,aAAc,CACZ1b,GAAI6kB,GAAOgB,YACXhK,SAAUgJ,GAAOkB,WACjBhK,QAAS8I,GAAOsB,YAChBlK,OAAQ4I,GAAOQ,UACfnJ,OAAQ2I,GAAOO,KACf9V,YAAauV,GAAOkB,WACpBxlB,KAAMskB,GAAOiB,MACbnK,QAASkJ,GAAOO,KAChBkB,QAASzB,GAAOG,SAChB5I,SAAUyI,GAAOM,YAEnBrP,cAAe,CACb9V,GAAI6kB,GAAOgB,YACXtlB,KAAMskB,GAAOiB,MACb3P,SAAU0O,GAAOqB,OACjBhQ,YAAa2O,GAAOO,KACpBzO,SAAUkO,GAAOO,KACjBnP,OAAQ,CACN1V,KAAMskB,GAAOiB,MACbxW,YAAauV,GAAO6B,YACpB1mB,GAAI6kB,GAAOe,mBAEb5jB,OAAQ,CACN0B,OAAQmhB,GAAOI,MACfrhB,QAASihB,GAAOC,IAChBnhB,KAAMkhB,GAAOqB,SAGjBnjB,eAAgB,CACd/C,GAAI6kB,GAAOO,KACX7kB,KAAMskB,GAAOiB,MACbviB,QAASshB,GAAOoB,SAChBjiB,KAAM6gB,GAAOoB,SACb9hB,SAAU0gB,GAAOmB,eACjBviB,aAAc,CACZC,OAAQmhB,GAAOK,YACfthB,QAASihB,GAAOC,IAChBnhB,KAAMkhB,GAAOqB,QAEfxhB,MAAO,CACL1E,GAAI6kB,GAAOQ,UACXrgB,QAAS6f,GAAOgB,YAChB1gB,YAAa0f,GAAOO,KACpB7f,cAAesf,GAAOe,kBACtBW,cAAe1B,GAAOO,KACtBoB,eAAgB3B,GAAOe,oBAG3BnY,QAAS,CACPzN,GAAI6kB,GAAOsB,YACX5lB,KAAMskB,GAAOqB,OACbnY,MAAO8W,GAAOsB,YACdniB,KAAM6gB,GAAOqB,QAEfna,SAAU,CACR/L,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,KACbrX,MAAO8W,GAAOQ,UACdrhB,KAAM6gB,GAAOO,KACb1gB,MAAO,CACL1E,GAAI6kB,GAAOQ,UACXrgB,QAAS6f,GAAOgB,YAChB1gB,YAAa0f,GAAOO,KACpB7f,cAAesf,GAAOe,kBACtBW,cAAe1B,GAAOe,kBACtBY,eAAgB3B,GAAOe,mBAEzBrV,gBAAiBsU,GAAOiB,MACxBtV,gBAAiBqU,GAAOO,MAE1BtR,eAAgB,CACd9T,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,KACbrX,MAAO8W,GAAOQ,UACdrhB,KAAM6gB,GAAOO,KACbpjB,OAAQ,CACN0B,OAAQmhB,GAAOI,MACfrhB,QAASihB,GAAOC,IAChBnhB,KAAMkhB,GAAOqB,SAGjBtG,KAAM,CACJ5f,GAAI6kB,GAAOgB,YACX1gB,YAAa0f,GAAOiB,MACpBvgB,cAAesf,GAAOkB,WACtB5lB,OAAQ0kB,GAAOQ,UACf/kB,YAAa,CACXN,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,OAGjB5V,QAAS,CACPxP,GAAI6kB,GAAOe,kBACXrlB,KAAMskB,GAAOO,KACb1V,SAAUmV,GAAOO,KACjBzV,SAAUkV,GAAOQ,WAEnBtgB,KAAM,CACJ/E,GAAI6kB,GAAOgB,YACXjF,YAAaiE,GAAOiB,MACpBvlB,KAAMskB,GAAOiB,MACbzE,MAAO,CACLrd,KAAM6gB,GAAOiB,MACbvlB,KAAMskB,GAAOiB,MACb9lB,GAAI6kB,GAAOe,kBACXtW,YAAauV,GAAOS,KACpB/D,YAAasD,GAAOO,MAEtBnb,MAAO,CACLjK,GAAI6kB,GAAOG,SACXzkB,KAAMskB,GAAOC,IACbxV,YAAauV,GAAOE,iBAGxBtf,OAAQ,CACNlF,KAAMskB,GAAOgB,YACb7lB,GAAI6kB,GAAOO,KACXrE,WAAY8D,GAAOQ,WAErBrD,KAAM,CACJhiB,GAAI6kB,GAAOQ,UACX9kB,KAAMskB,GAAOO,QC/UXuB,GAAgB,CACpB9jB,aAAc+jB,GAAM,OAePC,GAZM,WAAoC,IAAnCrlB,EAAkC,uDAA1BmlB,GAAeG,EAAW,uCACtD,OAAQA,EAAOtkB,MACb,KAAKE,EAAiBC,UACpB,OAAO,gBACFnB,EADL,CAEEqB,aAAc+jB,GAAOE,EAAOrkB,WAEhC,QACE,OAAOjB,ICdPmlB,GAAgB,CACpB/kB,YAAa,KACbE,WAAW,EACXE,OAAQ,UAgCK+kB,GA7BK,WAAoC,IAAnCvlB,EAAkC,uDAA1BmlB,GAAeG,EAAW,uCACrD,OAAQA,EAAOtkB,MACb,KAAKP,EAAgBG,oBACnB,OAAO,gBACFZ,EADL,CAEEM,UAAWglB,EAAOrkB,UAEtB,KAAKR,EAAgBE,mBACnB,OAAO,gBACFX,EADL,CAEEI,YAAa,KACbE,WAAW,IAEf,KAAKG,EAAgBC,iBACnB,OAAO,gBACFV,EADL,CAEEI,YAAaklB,EAAOrkB,QACpBX,WAAW,IAEf,KAAKG,EAAgBI,gBACnB,OAAO,gBACFb,EADL,CAEEQ,OAAQ8kB,EAAOrkB,UAEnB,QACE,OAAOjB,IC/BPmlB,GAAgB,CACpBha,eAAgB,KAChBZ,SAAU,KACVc,eAAgB,EAChBE,qBAAsB,CACpBxM,KAAM,IAER0M,kBAAkB,EAClBE,iBAAkB,GAClBE,gBAAiB,KAEjBjN,gBAAgB,EAChBmN,aAAa,GAgEAyZ,GA7DK,WAAoC,IAAnCxlB,EAAkC,uDAA1BmlB,GAAeG,EAAW,uCACrD,OAAQA,EAAOtkB,MACb,KAAK6I,GAAgBC,aACnB,OAAO,gBACF9J,EADL,CAEEuK,SAAU+a,EAAOrkB,UAErB,KAAK4I,GAAgBE,oBACnB,OAAO,gBACF/J,EADL,CAEEmL,eAAgBma,EAAOrkB,UAE3B,KAAK4I,GAAgBG,uBACnB,OAAO,gBACFhK,EADL,CAEEqL,eAAgBia,EAAOrkB,UAE3B,KAAK4I,GAAgBI,2BACnB,OAAO,gBACFjK,EADL,CAEEuL,qBAAqB,gBAChBvL,EAAMuL,qBADS,GAEf+Z,EAAOrkB,WAGhB,KAAK4I,GAAgBK,oBACnB,OAAO,gBACFlK,EADL,CAEEyL,iBAAkB6Z,EAAOrkB,UAE7B,KAAK4I,GAAgBM,uBACnB,OAAO,gBACFnK,EADL,CAEE2L,iBAAkB2Z,EAAOrkB,UAE7B,KAAK4I,GAAgB/I,qBACnB,OAAO,gBACFd,EADL,CAEE6L,gBAAiByZ,EAAOrkB,UAE5B,KAAK4I,GAAgBO,eACnB,IAAMqb,OACeC,IAAnBJ,EAAOrkB,QAAwBqkB,EAAOrkB,SAAWjB,EAAMpB,eACzD,OAAO,gBACFoB,EADL,CAEEpB,eAAgB6mB,IAGpB,KAAK5b,GAAgBQ,YACnB,IAAMob,OACeC,IAAnBJ,EAAOrkB,QAAwBqkB,EAAOrkB,SAAWjB,EAAM+L,YACzD,OAAO,gBACF/L,EADL,CAEE+L,YAAa0Z,IAGjB,QACE,OAAOzlB,IC9DE2lB,GANKC,2BAAgB,CAClCrnB,MAAO8mB,GACPplB,KAAMslB,GACNva,KAAMwa,K,SCTKK,GAAyB,SAACtb,EAAU0B,GAa/C,YAZgByZ,IAAZzZ,GACF1B,EAAS6C,KAAI,SAAA3C,GAOX,OANIwB,EAAQoN,SAAS5O,EAAQ7D,IAC3B6D,EAAQwB,SAAU,EAElBxB,EAAQwB,SAAU,EAGbxB,KAIJ,aAAIF,I,aCJHub,I,aAmBOC,I,aAOAC,IA1BjB,SAAUF,GAAV,mFAEmB,OAFoB7kB,EAAvC,EAAuCA,QAC/BgL,EAAUhL,EADlB,SAEyBglB,aAAOhb,IAFhC,OAME,OAJMV,EAFR,OAGQ2b,EAAsBL,GAAuBtb,EAAU0B,GAH/D,SAMQrD,aAAI0B,GAAY4b,IANxB,OAQuB,OARvB,UAQ6BD,aAAO/a,IARpC,WAQMC,EARN,QASMc,EATN,iBAeI,OAJEd,EADEc,EAAQoN,SAASlO,EAAevE,IACpB,gBAAQuE,EAAR,CAAwBc,SAAS,IAEjC,gBAAQd,EAAR,CAAwBc,SAAS,IAbrD,UAeUrD,aAAI4B,GAAkBW,IAfhC,yCAmBO,SAAU4a,KAAV,kEACL,OADK,SACCI,aACJtc,GAAgB/I,qBAChBglB,IAHG,wCAOA,SAAUE,KAAV,kEACL,OADK,SACCI,aAAI,CAACC,aAAKN,MADX,wC,iBC/BkBO,IAAV,SAAUA,KAAV,kEACb,OADa,SACPF,aAAI,CAACC,aAAKL,MADH,wCCIf,IAAMO,GAAiBC,eAEjBC,GAAc,CAACF,IAIrB,IAAMG,GAAQC,uBACZhB,GACAiB,+BAAoBC,mBAAe,WAAf,EAAmBJ,MAGzCF,GAAeO,IAAIR,IAEJI,UCKTK,G,4MACJC,oBAAsB,K,kEAED,IAAD,EACoChhB,KAAKpB,MAAnDqiB,EADU,EACVA,QAASlmB,EADC,EACDA,eAAgBmmB,EADf,EACeA,iBAEjClhB,KAAKghB,oBAAsBrnB,EAAKwnB,oBAAmB,SAAAlnB,GAC7CA,GACFc,EAAed,GACfgnB,EAAQlW,KAAK,OAEbkW,EAAQlW,KAAK,UACbmW,U,6CAMJlhB,KAAKghB,wB,+BAML,OAFsBhhB,KAAKpB,MAAnBtE,UAGN,kBAAC,GAAD,MAEA,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAO8mB,OAAK,EAACC,KAAK,IAAIC,UAAWzI,KACjC,kBAAC,KAAD,CAAOuI,OAAK,EAACC,KAAK,YAAYC,UAAWlG,KACzC,kBAAC,KAAD,CAAOgG,OAAK,EAACC,KAAK,SAASC,UAAWpE,U,GA9B3Bnc,IAAMC,WAoCnBO,GAAkBC,YAAyB,CAC/ClH,UAAWD,IAQPknB,GAAiBC,aACrB/f,YAAQF,IANiB,SAAAG,GAAQ,MAAK,CACtC3G,eAAgB,SAAAd,GAAI,OAAIyH,EAAS3G,EAAed,KAChDinB,iBAAkB,kBAAMxf,E/DxDa,CACrC1G,KAAMP,EAAgBE,yB+D2DtB8G,CAA6Csf,KAG/CU,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,CAAUjB,MAAOA,IACf,kBAAC,GAAD,KACE,kBAAC,KAAD,CAAQkB,SAAS,KACf,kBAACL,GAAD,UAKRM,SAASC,eAAe,SxB8CpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBnf,MAAK,SAAAof,GACJA,EAAaC,gBAEdvW,OAAM,SAAAnJ,GACLD,QAAQC,MAAMA,EAAMwO,c","file":"static/js/main.a160d416.chunk.js","sourcesContent":["import styled from 'styled-components'\r\n\r\nexport const AppContainer = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  /* display: grid; */\r\n  /* grid-template-columns: minmax(260px, 25%) auto 25%; */\r\n  display: flex;\r\n  background-color: ${({ theme }) => theme.bg};\r\n\r\n  @media only screen and (max-width: 1100px) {\r\n    /* grid-template-columns: minmax(260px, 25%) 1fr auto; */\r\n    display: flex;\r\n  }\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    display: flex;\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const SidePanelContainer = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  max-width: 280px;\r\n  background-color: ${({ theme }) => theme.sidePanel.bg};\r\n  padding: 14px;\r\n\r\n  > :nth-child(n) {\r\n    margin-bottom: 16px;\r\n  }\r\n\r\n  > :last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  transition: ease-in-out transform 200ms;\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    position: fixed;\r\n    z-index: 10;\r\n    top: 0;\r\n    left: 0;\r\n    width: 280px;\r\n    box-shadow: 0px 0px 10px 5px ${({ theme }) => theme.sidePanel.shadow};\r\n    transform: ${({ sidebarShowing }) =>\r\n      sidebarShowing ? 'translateX(0px)' : 'translateX(-300px)'};\r\n  }\r\n`\r\n\r\nexport const CloseSidebar = styled.div`\r\n  color: ${({ theme }) => theme.sidePanel.closeButton.text};\r\n  background-color: ${({ theme }) => theme.sidePanel.closeButton.bg};\r\n  font-family: 'archiabold';\r\n  padding: 8px;\r\n  border-radius: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  span {\r\n    margin-left: 8px;\r\n  }\r\n\r\n  cursor: pointer;\r\n\r\n  @media only screen and (min-width: 768px) {\r\n    display: none;\r\n  }\r\n`\r\n","import firebase from 'firebase/app'\r\nimport 'firebase/analytics'\r\nimport 'firebase/firestore'\r\nimport 'firebase/auth'\r\nimport 'firebase/database'\r\nimport 'firebase/storage'\r\n\r\nconst firebaseConfig = {\r\n  apiKey: 'AIzaSyBKsHwiG5NuXxuvSN-7jZZLMDqqUDpIlbA',\r\n  authDomain: 'chat-react-app-9357c.firebaseapp.com',\r\n  databaseURL: 'https://chat-react-app-9357c.firebaseio.com',\r\n  projectId: 'chat-react-app-9357c',\r\n  storageBucket: 'chat-react-app-9357c.appspot.com',\r\n  messagingSenderId: '700067181378',\r\n  appId: '1:700067181378:web:a3b7eeb1503a2e1a728edb',\r\n  measurementId: 'G-NJ947Z6DGB'\r\n}\r\n\r\nfirebase.initializeApp(firebaseConfig)\r\nfirebase.analytics()\r\n\r\nexport const auth = firebase.auth()\r\nexport const firestore = firebase.firestore()\r\nexport const database = firebase.database()\r\nexport const storage = firebase.storage()\r\n\r\nexport default firebase\r\n","import { createSelector } from 'reselect'\r\n\r\nconst selectUser = state => state.user\r\n\r\nexport const selectCurrentUser = createSelector(\r\n  [selectUser],\r\n  user => user.currentUser\r\n)\r\n\r\nexport const selectUserIsLoading = createSelector(\r\n  [selectUser],\r\n  user => user.isLoading\r\n)\r\n\r\nexport const selectUserStatus = createSelector(\r\n  [selectUser],\r\n  user => user.status\r\n)\r\n","const UserActionTypes = {\r\n  SET_CURRENT_USER: 'SET_CURRENT_USER',\r\n  CLEAR_CURRENT_USER: 'CLEAR_CURRENT_USER',\r\n  SET_USER_IS_LOADING: 'SET_USER_IS_LOADING',\r\n  SET_USER_STATUS: 'SET_USER_STATUS',\r\n  SET_STARRED_CHANNELS: 'SET_STARRED_CHANNELS'\r\n}\r\n\r\nexport default UserActionTypes\r\n","import UserActionTypes from './user.types'\r\n\r\nexport const setCurrentUser = user => ({\r\n  type: UserActionTypes.SET_CURRENT_USER,\r\n  payload: user\r\n})\r\n\r\nexport const setUserIsLoading = loading => ({\r\n  type: UserActionTypes.SET_USER_IS_LOADING,\r\n  payload: loading\r\n})\r\n\r\nexport const clearCurrentUser = () => ({\r\n  type: UserActionTypes.CLEAR_CURRENT_USER\r\n})\r\n\r\nexport const setUserStatus = status => ({\r\n  type: UserActionTypes.SET_USER_STATUS,\r\n  payload: status\r\n})\r\n","const ThemeActionTypes = {\r\n  SET_THEME: 'SET_THEME'\r\n}\r\n\r\nexport default ThemeActionTypes\r\n","import { createSelector } from 'reselect'\r\n\r\nconst selectTheme = state => state.theme\r\n\r\nexport const selectCurrentTheme = createSelector(\r\n  [selectTheme],\r\n  theme => theme.currentTheme\r\n)\r\n","import styled from 'styled-components'\r\n\r\nexport const UserAndOptionsContainer = styled.div`\r\n  width: 100%;\r\n  height: 76px;\r\n  border-radius: 14px;\r\n  background-color: ${({ theme }) => theme.userStatusCard.bg};\r\n  transition: ease max-height 0.4s;\r\n  position: relative;\r\n  /* max-height: ${({ opened }) => (opened ? '76px' : '200px')}; */\r\n`\r\n\r\nexport const UserStatusCardContainer = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 52px auto 20px;\r\n  padding: 12px;\r\n`\r\n\r\nexport const UserAvatar = styled.div`\r\n  width: 52px;\r\n  height: 52px;\r\n  border: 8px;\r\n  border-radius: 12px;\r\n  background-color: white;\r\n  overflow: hidden;\r\n`\r\n\r\nexport const UserInfo = styled.div`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  padding: 0px 10px;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n`\r\n\r\nexport const Username = styled.p`\r\n  color: ${({ theme }) => theme.userStatusCard.text};\r\n  font-family: 'archiasemibold';\r\n  font-size: 16px;\r\n  margin-bottom: 4px;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`\r\n\r\nexport const UserStatus = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  span {\r\n    color: ${({ theme }) => theme.userStatusCard.subText};\r\n    font-family: 'archiaregular';\r\n    text-transform: capitalize;\r\n    margin-left: 5px;\r\n    font-size: 13px;\r\n  }\r\n`\r\n\r\nexport const Indicator = styled.div`\r\n  height: 12px;\r\n  width: 12px;\r\n  margin: auto 0px;\r\n  border-radius: 9999px;\r\n  background-color: ${({\r\n    theme: {\r\n      userStatusCard: { statusColors }\r\n    },\r\n    status\r\n  }) => {\r\n    if (status === 'online') return statusColors.online\r\n    else if (status === 'away') return statusColors.away\r\n    else return statusColors.offline\r\n  }};\r\n`\r\n\r\nexport const OptionsToggle = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  svg {\r\n    width: 16px;\r\n    cursor: pointer;\r\n    transition: ease transform 0.2s;\r\n    transform: ${({ opened }) => (opened ? 'rotate(180deg)' : 'rotate(0deg)')};\r\n  }\r\n`\r\n\r\nexport const Line = styled.hr`\r\n  margin-top: 12px;\r\n  height: 1px;\r\n  background-color: ${({ theme }) => theme.userStatusCard.icon};\r\n  border: none;\r\n`\r\n\r\nexport const Options = styled.ul`\r\n  max-height: ${({ opened }) => (opened ? '180px' : '0px')};\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.userStatusCard.bg};\r\n  position: absolute;\r\n  z-index: 2;\r\n  top: 64px;\r\n  border-radius: 0px 0px 14px 14px;\r\n  transition: ease max-height 0.3s;\r\n  overflow: hidden;\r\n  padding: 0px 12px;\r\n\r\n  li {\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 8px;\r\n    margin-bottom: 3px;\r\n\r\n    :last-child {\r\n      border-radius: 0px 0px 6px 6px;\r\n      margin-bottom: 15px;\r\n    }\r\n\r\n    span {\r\n      color: ${({ theme }) => theme.userStatusCard.subText};\r\n      font-family: 'archiaregular';\r\n      font-size: 14px;\r\n      margin-left: 6px;\r\n    }\r\n\r\n    &:hover {\r\n      background-color: ${({ theme }) => theme.userStatusCard.optionBg};\r\n    }\r\n\r\n    &.status-box {\r\n      padding: 0px;\r\n\r\n      &:hover {\r\n        background-color: transparent;\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const Dots = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: grid;\r\n  grid-gap: 6px;\r\n  grid-template-columns: repeat(3, 1fr);\r\n`\r\n\r\nexport const Dot = styled.div`\r\n  background-color: ${({ theme }) => theme.userStatusCard.icon};\r\n  padding: 10px;\r\n  display: flex;\r\n  align-items: center;\r\n  border-radius: 6px;\r\n  justify-content: center;\r\n`\r\n\r\nexport const Circle = styled.div`\r\n  height: 12px;\r\n  width: 12px;\r\n  border-radius: 14px;\r\n  background-color: ${({ theme, name }) => {\r\n    if (name === 'online') return theme.userStatusCard.statusColors.online\r\n    else if (name === 'offline')\r\n      return theme.userStatusCard.statusColors.offline\r\n    else return theme.userStatusCard.statusColors.away\r\n  }};\r\n`\r\n","import styled, { css } from 'styled-components'\r\n\r\nconst opacityAnimation = css`\r\n  @keyframes opacityIn {\r\n    from {\r\n      background-color: transparent;\r\n    }\r\n    to {\r\n      visibility: visible;\r\n      background-color: ${({ theme }) => theme.userStatusCard.modal.bg};\r\n    }\r\n  }\r\n\r\n  @keyframes opacityOut {\r\n    from {\r\n      background-color: ${({ theme }) => theme.userStatusCard.modal.bg};\r\n      /* at start showing is false so in \r\n      order to avoit flicker issue visibility is set dynamically */\r\n      visibility: ${({ showing }) => (showing ? 'visible' : 'hidden')};\r\n    }\r\n    to {\r\n      visibility: hidden;\r\n      background-color: transparent;\r\n    }\r\n  }\r\n\r\n  animation-name: ${({ showing }) => (showing ? 'opacityIn' : 'opacityOut')};\r\n  animation-duration: 500ms;\r\n  animation-timing-function: ease-in-out;\r\n  animation-fill-mode: forwards;\r\n`\r\n\r\nconst scaleAnimation = css`\r\n  @keyframes scaleIn {\r\n    from {\r\n      opacity: 0;\r\n      transform: scale(0.5);\r\n    }\r\n    to {\r\n      visibility: visible;\r\n      opacity: 1;\r\n      transform: scale(1);\r\n    }\r\n  }\r\n\r\n  @keyframes scaleOut {\r\n    from {\r\n      visibility: ${({ showing }) => (showing ? 'visible' : 'hidden')};\r\n    }\r\n    to {\r\n      visibility: hidden;\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  animation-name: ${({ showing }) => (showing ? 'scaleIn' : 'scaleOut')};\r\n  animation-duration: 500ms;\r\n  animation-timing-function: cubic-bezier(0.19, 0.67, 0.01, 1.3);\r\n  animation-fill-mode: forwards;\r\n`\r\n\r\nexport const AvatarModalContainer = styled.div`\r\n  width: 100vw;\r\n  height: 100vh;\r\n  top: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  z-index: 10;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  visibility: hidden;\r\n\r\n  ${opacityAnimation}\r\n`\r\n\r\nexport const Modal = styled.form`\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  visibility: hidden;\r\n  background: ${({ theme }) => theme.userStatusCard.modal.modalBg};\r\n  display: grid;\r\n  grid-gap: 16px;\r\n\r\n  ${scaleAnimation}\r\n`\r\n\r\nexport const Heading = styled.h2`\r\n  color: ${({ theme }) => theme.userStatusCard.modal.textPrimary};\r\n  font-size: 20px;\r\n  font-family: 'archiasemibold';\r\n`\r\n\r\nexport const Editor = styled.div`\r\n  display: grid;\r\n  grid-template-rows: auto 30px;\r\n  justify-content: center;\r\n  align-items: center;\r\n\r\n  input {\r\n    margin-top: 10px;\r\n    -webkit-appearance: none;\r\n    appearance: none;\r\n    width: 100%;\r\n    height: 8px;\r\n    background-color: ${({ theme }) => theme.userStatusCard.modal.bg};\r\n    outline: none;\r\n\r\n    &::-webkit-slider-thumb {\r\n      -webkit-appearance: none;\r\n      appearance: none;\r\n      width: 14px;\r\n      height: 14px;\r\n      border-radius: 10px;\r\n      background-color: ${({ theme }) =>\r\n        theme.userStatusCard.modal.textPrimary};\r\n      cursor: pointer;\r\n    }\r\n  }\r\n`\r\n\r\nexport const Inputs = styled.div`\r\n  display: grid;\r\n  grid-gap: 10px;\r\n`\r\n\r\nexport const Input = styled.div`\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: auto 80px 0px;\r\n\r\n  label {\r\n    font-family: 'archiasemibold';\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 6px 12px;\r\n    font-size: 16px;\r\n    height: 100%;\r\n    width: 100%;\r\n    cursor: pointer;\r\n    border-radius: 0px 8px 8px 0px;\r\n    color: ${({ theme }) => theme.userStatusCard.modal.textSecondary};\r\n    background-color: ${({ theme }) => theme.userStatusCard.modal.textPrimary};\r\n  }\r\n\r\n  span {\r\n    min-width: 160px;\r\n    padding: 8px;\r\n    border: 0px;\r\n    background-color: ${({ theme }) => theme.userStatusCard.modal.bg};\r\n    color: ${({ theme }) => theme.userStatusCard.modal.textPrimary};\r\n    border-radius: 8px;\r\n    font-family: 'archiaregular';\r\n    font-size: 16px;\r\n  }\r\n\r\n  input {\r\n    width: 0.1px;\r\n    height: 0.1px;\r\n    opacity: 0;\r\n    overflow: hidden;\r\n    position: absolute;\r\n    z-index: -1;\r\n\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n\r\n    &::placeholder {\r\n      color: ${({ theme }) => theme.userStatusCard.modal.textPrimary};\r\n    }\r\n  }\r\n`\r\n\r\nexport const Options = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding-top: 10px;\r\n`\r\n\r\nexport const Button = styled.button`\r\n  margin-left: 10px;\r\n  border: 2px solid transparent;\r\n  font-family: 'archiasemibold';\r\n  cursor: pointer;\r\n  outline: none;\r\n  border-radius: 8px;\r\n  padding: 6px;\r\n  min-width: 70px;\r\n  font-size: 15px;\r\n\r\n  &.close {\r\n    color: ${({ theme }) => theme.userStatusCard.modal.textPrimary};\r\n    background-color: ${({ theme }) =>\r\n      theme.userStatusCard.modal.textSecondary};\r\n    border: 2px solid ${({ theme }) => theme.userStatusCard.modal.textPrimary};\r\n  }\r\n\r\n  &.confirm {\r\n    color: ${({ theme }) => theme.userStatusCard.modal.textSecondary};\r\n    background-color: ${({ theme }) => theme.userStatusCard.modal.textPrimary};\r\n  }\r\n`\r\n","import React from 'react'\r\nimport AvatarEditor from 'react-avatar-editor'\r\n\r\nimport {\r\n  AvatarModalContainer,\r\n  Modal,\r\n  Heading,\r\n  Inputs,\r\n  Input,\r\n  Options,\r\n  Button,\r\n  Editor\r\n} from './change-avatar-modal.styles'\r\n\r\nclass ChangeAvatarModal extends React.Component {\r\n  state = {\r\n    avatarImage: null,\r\n    avatarImageData: null,\r\n    scale: 120\r\n  }\r\n\r\n  handlePropogation = event => {\r\n    event.stopPropagation()\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n    const { confirm } = this.props\r\n\r\n    if (this.avatarEditor) {\r\n      this.avatarEditor.getImageScaledToCanvas().toBlob(avatarBlob => {\r\n        confirm(avatarBlob)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleChange = event => {\r\n    const files = event.target.files\r\n    const file = files && files.length ? files[0] : null\r\n    const reader = new FileReader()\r\n\r\n    if (file) {\r\n      reader.readAsDataURL(file)\r\n      reader.addEventListener('load', () => {\r\n        this.setState({\r\n          avatarImage: file,\r\n          avatarImageData: reader.result\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  setScale = event => {\r\n    const { value } = event.target\r\n\r\n    this.setState({\r\n      scale: value\r\n    })\r\n  }\r\n\r\n  setEditorRef = editor => (this.avatarEditor = editor)\r\n\r\n  render() {\r\n    const { avatarImage, avatarImageData, scale } = this.state\r\n    const { showing, close } = this.props\r\n\r\n    return (\r\n      <AvatarModalContainer showing={showing} onClick={close}>\r\n        <Modal\r\n          onClick={this.handlePropogation}\r\n          onSubmit={this.handleSubmit}\r\n          showing={showing}\r\n        >\r\n          <Heading>Upload an image</Heading>\r\n          {avatarImageData ? (\r\n            <Editor>\r\n              <AvatarEditor\r\n                ref={this.setEditorRef}\r\n                image={avatarImageData}\r\n                scale={scale / 100}\r\n                onImageChange={this.onImageCrop}\r\n              />\r\n              <input\r\n                type=\"range\"\r\n                min=\"100\"\r\n                max=\"200\"\r\n                value={this.state.scale}\r\n                onChange={this.setScale}\r\n              />\r\n            </Editor>\r\n          ) : null}\r\n          <Inputs>\r\n            <Input>\r\n              <span>{avatarImage ? avatarImage.name : 'select a file'}</span>\r\n              <label htmlFor=\"avatarImage\">choose</label>\r\n              <input\r\n                type=\"file\"\r\n                name=\"avatarImage\"\r\n                id=\"avatarImage\"\r\n                accept=\"image/*\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </Input>\r\n          </Inputs>\r\n          <Options>\r\n            <Button className=\"close\" type=\"button\" onClick={close}>\r\n              CANCEL\r\n            </Button>\r\n            <Button className=\"confirm\" type=\"submit\">\r\n              UPLOAD\r\n            </Button>\r\n          </Options>\r\n        </Modal>\r\n      </AvatarModalContainer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ChangeAvatarModal\r\n","import React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\nimport { useTheme } from 'styled-components'\r\n\r\nimport { FaUser, FaGlobeAsia, FaSun, FaMoon } from 'react-icons/fa'\r\nimport { MdExitToApp } from 'react-icons/md'\r\n\r\nimport { auth, database, storage } from '../../firebase/firebase.utils'\r\n\r\nimport {\r\n  selectCurrentUser,\r\n  selectUserStatus\r\n} from '../../redux/user/user.selectors'\r\n\r\nimport { setCurrentUser } from '../../redux/user/user.actions'\r\n\r\nimport { setUserStatus } from '../../redux/user/user.actions'\r\n\r\nimport { setTheme } from '../../redux/theme/theme.actions'\r\nimport { selectCurrentTheme } from '../../redux/theme/theme.selectors'\r\n\r\nimport {\r\n  UserAndOptionsContainer,\r\n  UserStatusCardContainer,\r\n  UserAvatar,\r\n  UserInfo,\r\n  Username,\r\n  UserStatus,\r\n  Indicator,\r\n  OptionsToggle,\r\n  Options,\r\n  Dots,\r\n  Dot,\r\n  Circle,\r\n  Line\r\n} from './user-status-card.styles'\r\n\r\nimport ChangeAvatarModal from '../change-avatar-modal/change-avatar-modal.component'\r\n\r\nconst ArrowSVG = props => {\r\n  const theme = useTheme()\r\n\r\n  return (\r\n    <svg {...props} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 18\">\r\n      <path\r\n        fill={theme.userStatusCard.icon}\r\n        d=\"M0 3c-1-1 1-3 2-3h20c2 0 3 2 2 3L14 17a3 3 0 01-4 0L0 3z\"\r\n      />\r\n    </svg>\r\n  )\r\n}\r\n\r\nconst UserStatusCard = ({\r\n  currentUser,\r\n  status,\r\n  setUserStatus,\r\n  setCurrentUser,\r\n  currentTheme,\r\n  setTheme\r\n}) => {\r\n  const theme = useTheme()\r\n  const [opened, setOpened] = useState(false)\r\n  const [statusBox, setStatusBox] = useState(false)\r\n  const [modal, showModal] = useState(false)\r\n\r\n  const handleStatusChange = status => {\r\n    setStatusBox(false)\r\n\r\n    database\r\n      .ref('presence')\r\n      .child(currentUser.uid)\r\n      .set(status, err => {\r\n        setUserStatus(status)\r\n        if (err) console.error(err)\r\n      })\r\n  }\r\n\r\n  const handleSignout = () => {\r\n    auth.signOut().then(x => {\r\n      console.log('signed out ')\r\n    })\r\n  }\r\n\r\n  const handleModalConfirm = avatarBlob => {\r\n    uploadCroppedImage(avatarBlob)\r\n    showModal(false)\r\n  }\r\n\r\n  const handleModalClose = () => {\r\n    showModal(false)\r\n  }\r\n\r\n  const updateAvatarImage = url => {\r\n    // just refreshing page to show updated image as url remains same user reset wont help\r\n    window.location.reload()\r\n\r\n    // THIS WILL BE USELESS AFTER I UPDATE HOW INITiAL USER AVATAR\r\n    // IMAGE SYSTEM WORKS DUE TO STATIC URLS\r\n\r\n    // auth.currentUser\r\n    //   .updateProfile({\r\n    //     photoURL: url\r\n    //   })\r\n    //   .then(() => {\r\n    //     console.log('photoURL updated')\r\n    //   })\r\n    //   .catch(err => console.error(err))\r\n\r\n    // firestore\r\n    //   .doc(`users/${currentUser.uid}`)\r\n    //   .update({\r\n    //     avatar: url\r\n    //   })\r\n    //   .then(() => {\r\n    //     console.log('user avatar update')\r\n    //   })\r\n    //   .catch(err => console.error(err))\r\n  }\r\n\r\n  const uploadCroppedImage = imageBlob => {\r\n    storage\r\n      .ref()\r\n      .child(`avatars/users/${currentUser.uid}`)\r\n      .put(imageBlob, { contentType: 'image/jpeg' })\r\n      .then(snapshot => {\r\n        snapshot.ref.getDownloadURL().then(url => updateAvatarImage(url))\r\n      })\r\n  }\r\n\r\n  const toggleTheme = () => {\r\n    if (currentTheme.name === 'light') {\r\n      setTheme('dark')\r\n    } else {\r\n      setTheme('light')\r\n    }\r\n  }\r\n\r\n  const { displayName, photoURL } = currentUser\r\n\r\n  return (\r\n    <UserAndOptionsContainer opened={opened}>\r\n      <ChangeAvatarModal\r\n        showing={modal}\r\n        close={handleModalClose}\r\n        confirm={handleModalConfirm}\r\n      />\r\n\r\n      <UserStatusCardContainer>\r\n        <UserAvatar>\r\n          <img src={photoURL} alt=\"user avatar\" />\r\n        </UserAvatar>\r\n        <UserInfo>\r\n          <Username>{displayName}</Username>\r\n          <UserStatus>\r\n            <Indicator status={status} /> <span>{status}</span>\r\n          </UserStatus>\r\n        </UserInfo>\r\n        <OptionsToggle opened={opened}>\r\n          <ArrowSVG onClick={() => setOpened(!opened)} />\r\n        </OptionsToggle>\r\n      </UserStatusCardContainer>\r\n\r\n      <Options opened={opened}>\r\n        <Line />\r\n        {statusBox ? null : (\r\n          <li onClick={() => setStatusBox(true)}>\r\n            <FaGlobeAsia color={theme.userStatusCard.icon} />\r\n            <span>set status</span>\r\n          </li>\r\n        )}\r\n\r\n        {statusBox ? (\r\n          <li className=\"status-box\">\r\n            <Dots>\r\n              <Dot name=\"online\" onClick={() => handleStatusChange('online')}>\r\n                <Circle name=\"online\" />\r\n              </Dot>\r\n              <Dot name=\"away\" onClick={() => handleStatusChange('away')}>\r\n                <Circle name=\"away\" />\r\n              </Dot>\r\n              <Dot name=\"offline\" onClick={() => handleStatusChange('offline')}>\r\n                <Circle name=\"offline\" />\r\n              </Dot>\r\n            </Dots>\r\n          </li>\r\n        ) : null}\r\n\r\n        <li onClick={() => showModal(true)}>\r\n          <FaUser color={theme.userStatusCard.icon} />\r\n          <span>change avatar</span>\r\n        </li>\r\n\r\n        <li onClick={() => toggleTheme()}>\r\n          {currentTheme.name === 'light' ? (\r\n            <>\r\n              <FaMoon color={theme.userStatusCard.icon} />\r\n              <span>toggle theme</span>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <FaSun color={theme.userStatusCard.icon} />\r\n              <span>toggle theme</span>\r\n            </>\r\n          )}\r\n        </li>\r\n\r\n        <li onClick={handleSignout}>\r\n          <MdExitToApp color={theme.userStatusCard.icon} />\r\n          <span>log out</span>\r\n        </li>\r\n      </Options>\r\n    </UserAndOptionsContainer>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentUser: selectCurrentUser,\r\n  status: selectUserStatus,\r\n  currentTheme: selectCurrentTheme\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setUserStatus: status => dispatch(setUserStatus(status)),\r\n  setCurrentUser: user => dispatch(setCurrentUser(user)),\r\n  setTheme: themeName => dispatch(setTheme(themeName))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserStatusCard)\r\n","import ThemeActionTypes from './theme.types'\r\n\r\nexport const setTheme = themeName => ({\r\n  type: ThemeActionTypes.SET_THEME,\r\n  payload: themeName\r\n})\r\n","const ChatActionTypes = {\r\n  SET_CHANNELS: 'SET_CHANNELS',\r\n  SET_CURRENT_CHANNEL: 'SET_CURRENT_CHANNEL',\r\n  UPDATE_CHANNEL_MEMBERS: 'UPDATE_CHANNEL_MEMBERS',\r\n  SET_MESSAGE_SEARCH_FILTERS: 'SET_MESSAGE_SEARCH_FILTERS',\r\n  SET_PRIVATE_CHANNEL: 'SET_PRIVATE_CHANNEL',\r\n  SET_OTHER_USERS_STATUS: 'SET_OTHER_USERS_STATUS',\r\n  SET_STARRED_CHANNELS: 'SET_STARRED_CHANNELS',\r\n  TOGGLE_SIDEBAR: 'TOGGLE_SIDEBAR',\r\n  TOGGLE_META: 'TOGGLE_META'\r\n}\r\n\r\nexport default ChatActionTypes\r\n","import ChatActionTypes from './chat.types'\r\n\r\nexport const setChannels = channels => ({\r\n  type: ChatActionTypes.SET_CHANNELS,\r\n  payload: channels\r\n})\r\n\r\nexport const setCurrentChannel = channel => ({\r\n  type: ChatActionTypes.SET_CURRENT_CHANNEL,\r\n  payload: channel\r\n})\r\n\r\nexport const updateChannelMembers = members => ({\r\n  type: ChatActionTypes.UPDATE_CHANNEL_MEMBERS,\r\n  payload: members\r\n})\r\n\r\nexport const setMessageSearchFilters = filters => ({\r\n  type: ChatActionTypes.SET_MESSAGE_SEARCH_FILTERS,\r\n  payload: filters\r\n})\r\n\r\nexport const setPrivateChannel = isPrivate => ({\r\n  type: ChatActionTypes.SET_PRIVATE_CHANNEL,\r\n  payload: isPrivate\r\n})\r\n\r\nexport const setOtherUsersStatus = otherUsersStatus => ({\r\n  type: ChatActionTypes.SET_OTHER_USERS_STATUS,\r\n  payload: otherUsersStatus\r\n})\r\n\r\nexport const setStarredChannels = starredChannels => ({\r\n  type: ChatActionTypes.SET_STARRED_CHANNELS,\r\n  payload: starredChannels\r\n})\r\n\r\nexport const toggleSidebar = boolean => ({\r\n  type: ChatActionTypes.TOGGLE_SIDEBAR,\r\n  payload: boolean\r\n})\r\n\r\nexport const toggleMeta = boolean => ({\r\n  type: ChatActionTypes.TOGGLE_META,\r\n  payload: boolean\r\n})\r\n","import { createSelector } from 'reselect'\r\n\r\nconst selectChat = state => state.chat\r\n\r\nexport const selectChannels = createSelector(\r\n  [selectChat],\r\n  chat => chat.channels\r\n)\r\n\r\nexport const selectCurrentChannel = createSelector(\r\n  [selectChat],\r\n  chat => chat.currentChannel\r\n)\r\n\r\nexport const selectChannelMembers = createSelector(\r\n  [selectChat],\r\n  chat => chat.channelMembers\r\n)\r\n\r\nexport const selectMessageSearchFilters = createSelector(\r\n  [selectChat],\r\n  chat => chat.messageSearchFilters\r\n)\r\n\r\nexport const selectIsPrivateChannel = createSelector(\r\n  [selectChat],\r\n  chat => chat.isPrivateChannel\r\n)\r\n\r\nexport const selectOtherUsersStatus = createSelector(\r\n  [selectChat],\r\n  chat => chat.otherUsersStatus\r\n)\r\n\r\nexport const selectStarredChannes = createSelector(\r\n  [selectChat],\r\n  chat => chat.starredChannels\r\n)\r\n\r\n// for mobile views\r\n\r\nexport const selectSidebarShowing = createSelector(\r\n  [selectChat],\r\n  chat => chat.sidebarShowing\r\n)\r\n\r\nexport const selectMetaShowing = createSelector(\r\n  [selectChat],\r\n  chat => chat.metaShowing\r\n)\r\n","import styled from 'styled-components'\r\n\r\nexport const StarredContainer = styled.div`\r\n  width: 100%;\r\n  height: auto;\r\n  border-radius: 14px;\r\n  padding: 18px;\r\n  background-color: ${({ theme }) => theme.starred.bg};\r\n`\r\n\r\nexport const StarredHeading = styled.div`\r\n  font-family: 'archiasemibold';\r\n  font-size: 17px;\r\n  color: ${({ theme }) => theme.starred.text};\r\n  display: grid;\r\n  grid-template-columns: auto 20px;\r\n\r\n  svg {\r\n    justify-self: center;\r\n    align-self: center;\r\n  }\r\n`\r\n\r\nexport const StarredList = styled.ul`\r\n  margin-top: 10px;\r\n`\r\n\r\nexport const StarredItem = styled.li`\r\n  font-family: 'archiasemibold';\r\n  font-size: 16px;\r\n  color: ${({ theme }) => theme.starred.text};\r\n  cursor: pointer;\r\n  padding: 4px;\r\n  border-radius: 8px;\r\n  background-color: ${({ selected, theme }) =>\r\n    selected ? theme.starred.hover : 'transparent'};\r\n  opacity: ${({ selected }) => (selected ? 1 : 0.8)};\r\n\r\n  margin-bottom: 4px;\r\n\r\n  :last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  &:hover {\r\n    background-color: ${({ theme }) => theme.starred.hover};\r\n  }\r\n`\r\n\r\nexport const PlaceholderText = styled.p`\r\n  width: 100%;\r\n  text-align: center;\r\n  padding: 10px;\r\n  font-family: 'archiaregular';\r\n  font-size: 15px;\r\n  color: ${({ theme }) => theme.starred.text};\r\n  opacity: 0.9;\r\n`\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\n\r\nimport { FaStar } from 'react-icons/fa'\r\n\r\nimport {\r\n  setCurrentChannel,\r\n  setPrivateChannel\r\n} from '../../redux/chat/chat.actions'\r\n\r\nimport {\r\n  selectChannels,\r\n  selectCurrentChannel,\r\n  selectIsPrivateChannel\r\n} from '../../redux/chat/chat.selectors'\r\n\r\nimport {\r\n  StarredContainer,\r\n  StarredHeading,\r\n  StarredList,\r\n  StarredItem,\r\n  PlaceholderText\r\n} from './starred.styles'\r\n\r\nclass Starred extends React.Component {\r\n  setActiveChannel = channel => {\r\n    this.setState({ activeChannel: channel.id })\r\n  }\r\n\r\n  changeChannel = channel => {\r\n    const { setCurrentChannel, setPrivateChannel } = this.props\r\n    setCurrentChannel(channel)\r\n    setPrivateChannel(false)\r\n    this.setActiveChannel(channel)\r\n  }\r\n\r\n  getStarredChannels = () => {\r\n    const { channels } = this.props\r\n\r\n    if (this.props.channels) {\r\n      return channels.filter(channel => channel.starred)\r\n    } else {\r\n      return []\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { setCurrentChannel, currentChannel, isPrivateChannel } = this.props\r\n\r\n    return (\r\n      <StarredContainer>\r\n        <StarredHeading>\r\n          <span>STARRED</span>\r\n          <FaStar\r\n            onClick={this.openModal}\r\n            style={{ alignSelf: 'flex-end' }}\r\n            size={20}\r\n          />\r\n        </StarredHeading>\r\n        {this.getStarredChannels().length ? null : (\r\n          <PlaceholderText key=\"placeholder-text\">\r\n            Your favourite channels will show up here.\r\n          </PlaceholderText>\r\n        )}\r\n        <StarredList>\r\n          {this.getStarredChannels().map(channel => {\r\n            const { id, name } = channel\r\n            return (\r\n              <StarredItem\r\n                key={id}\r\n                onClick={() => setCurrentChannel(channel)}\r\n                selected={!isPrivateChannel && channel.id === currentChannel.id}\r\n              >\r\n                # {name}\r\n              </StarredItem>\r\n            )\r\n          })}\r\n        </StarredList>\r\n      </StarredContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  channels: selectChannels,\r\n  currentChannel: selectCurrentChannel,\r\n  isPrivateChannel: selectIsPrivateChannel\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setCurrentChannel: channel => dispatch(setCurrentChannel(channel)),\r\n  setPrivateChannel: isPrivate => dispatch(setPrivateChannel(isPrivate))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Starred)\r\n","import styled, { css } from 'styled-components'\r\n\r\nconst opacityAnimation = css`\r\n  @keyframes opacityIn {\r\n    from {\r\n      background-color: transparent;\r\n    }\r\n    to {\r\n      visibility: visible;\r\n      background-color: ${({ theme }) => theme.channels.modal.bg};\r\n    }\r\n  }\r\n\r\n  @keyframes opacityOut {\r\n    from {\r\n      background-color: ${({ theme }) => theme.channels.modal.bg};\r\n      /* at start showing is false so in \r\n      order to avoit flicker issue visibility is set dynamically */\r\n      visibility: ${({ showing }) => (showing ? 'visible' : 'hidden')};\r\n    }\r\n    to {\r\n      visibility: hidden;\r\n      background-color: transparent;\r\n    }\r\n  }\r\n\r\n  animation-name: ${({ showing }) => (showing ? 'opacityIn' : 'opacityOut')};\r\n  animation-duration: 500ms;\r\n  animation-timing-function: ease-in-out;\r\n  animation-fill-mode: forwards;\r\n`\r\n\r\nconst scaleAnimation = css`\r\n  @keyframes scaleIn {\r\n    from {\r\n      opacity: 0;\r\n      transform: scale(0.5);\r\n    }\r\n    to {\r\n      visibility: visible;\r\n      opacity: 1;\r\n      transform: scale(1);\r\n    }\r\n  }\r\n\r\n  @keyframes scaleOut {\r\n    from {\r\n      visibility: ${({ showing }) => (showing ? 'visible' : 'hidden')};\r\n    }\r\n    to {\r\n      visibility: hidden;\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  animation-name: ${({ showing }) => (showing ? 'scaleIn' : 'scaleOut')};\r\n  animation-duration: 500ms;\r\n  animation-timing-function: cubic-bezier(0.19, 0.67, 0.01, 1.3);\r\n  animation-fill-mode: forwards;\r\n`\r\n\r\nexport const ModalContainer = styled.div`\r\n  width: 100vw;\r\n  height: 100vh;\r\n  top: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  z-index: 10;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  visibility: hidden;\r\n\r\n  ${opacityAnimation}\r\n`\r\n\r\nexport const Modal = styled.form`\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  visibility: hidden;\r\n  background: ${({ theme }) => theme.channels.modal.modalBg};\r\n  display: grid;\r\n  grid-gap: 16px;\r\n\r\n  ${scaleAnimation}\r\n`\r\n\r\nexport const Heading = styled.h2`\r\n  color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n  font-size: 20px;\r\n  font-family: 'archiasemibold';\r\n`\r\n\r\nexport const Inputs = styled.div`\r\n  display: grid;\r\n  grid-gap: 10px;\r\n`\r\n\r\nexport const Input = styled.div`\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: 80px auto;\r\n\r\n  span {\r\n    font-family: 'archiasemibold';\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 6px 12px;\r\n    font-size: 16px;\r\n    height: 100%;\r\n    width: 100%;\r\n    border-radius: 8px 0px 0px 8px;\r\n    color: ${({ theme }) => theme.channels.modal.textSecondary};\r\n    background-color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n  }\r\n\r\n  input {\r\n    padding: 8px;\r\n    border: 0px;\r\n    background-color: ${({ theme }) => theme.channels.modal.bg};\r\n    color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n    border-radius: 8px;\r\n    font-family: 'archiaregular';\r\n    font-size: 16px;\r\n\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n\r\n    &::placeholder {\r\n      color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n    }\r\n  }\r\n`\r\n\r\nexport const Options = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding-top: 10px;\r\n`\r\n\r\nexport const Button = styled.button`\r\n  margin-left: 10px;\r\n  border: 2px solid transparent;\r\n  font-family: 'archiasemibold';\r\n  cursor: pointer;\r\n  outline: none;\r\n  border-radius: 8px;\r\n  padding: 6px;\r\n  min-width: 70px;\r\n  font-size: 15px;\r\n\r\n  &.close {\r\n    color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n    background-color: ${({ theme }) => theme.channels.modal.textSecondary};\r\n    border: 2px solid ${({ theme }) => theme.channels.modal.textPrimary};\r\n  }\r\n\r\n  &.confirm {\r\n    color: ${({ theme }) => theme.channels.modal.textSecondary};\r\n    background-color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n  }\r\n`\r\n","import React from 'react'\r\n\r\nimport {\r\n  ModalContainer,\r\n  Modal,\r\n  Heading,\r\n  Inputs,\r\n  Input,\r\n  Options,\r\n  Button\r\n} from './add-channel-modal.styles'\r\n\r\nclass AddChannelModal extends React.Component {\r\n  state = {\r\n    name: '',\r\n    about: ''\r\n  }\r\n\r\n  handlePropogation = event => {\r\n    event.stopPropagation()\r\n  }\r\n\r\n  formattedValue = value => {\r\n    value = value\r\n      .replace(' ', '-')\r\n      .replace('--', '-')\r\n      .toLowerCase()\r\n\r\n    if (value.startsWith('-')) value = ''\r\n    return value\r\n  }\r\n\r\n  handleChange = event => {\r\n    let {\r\n      target: { name, value }\r\n    } = event\r\n\r\n    if (name === 'name') value = this.formattedValue(value)\r\n\r\n    this.setState({\r\n      [name]: value\r\n    })\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n    let { name, about } = this.state\r\n    name = name.endsWith('-') ? name.substring(0, name.length - 1) : name\r\n    const { confirm } = this.props\r\n    confirm({ name, about })\r\n  }\r\n\r\n  render() {\r\n    const { showing, close } = this.props\r\n    const { name, about } = this.state\r\n\r\n    return (\r\n      <ModalContainer showing={showing} onClick={close}>\r\n        <Modal\r\n          onClick={this.handlePropogation}\r\n          onSubmit={this.handleSubmit}\r\n          showing={showing}\r\n        >\r\n          <Heading>Add a channel</Heading>\r\n          <Inputs>\r\n            <Input>\r\n              <span>name</span>\r\n              <input\r\n                type=\"text\"\r\n                name=\"name\"\r\n                value={name}\r\n                placeholder=\"channel-name\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </Input>\r\n            <Input>\r\n              <span>about</span>\r\n              <input\r\n                type=\"text\"\r\n                name=\"about\"\r\n                value={about}\r\n                placeholder=\"description\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </Input>\r\n          </Inputs>\r\n          <Options>\r\n            <Button className=\"close\" type=\"button\" onClick={close}>\r\n              CANCEL\r\n            </Button>\r\n            <Button className=\"confirm\" type=\"submit\">\r\n              ADD\r\n            </Button>\r\n          </Options>\r\n        </Modal>\r\n      </ModalContainer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AddChannelModal\r\n","import styled from 'styled-components'\r\n\r\nexport const SpinnerContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  background: ${({ theme }) => theme.spinner.bg};\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nexport const Loader = styled.div`\r\n  @keyframes spin {\r\n    from {\r\n      transform: rotate(-45deg);\r\n    }\r\n    to {\r\n      transform: rotate(315deg);\r\n    }\r\n  }\r\n\r\n  height: ${({ size }) => size};\r\n  width: ${({ size }) => size};\r\n  border: 8px solid ${({ theme, color }) => color || theme.spinner.loaderFg};\r\n  border-right: 8px Solid ${({ theme }) => theme.spinner.loaderBg};\r\n  border-radius: 9999px;\r\n  animation: linear spin 1.2s infinite;\r\n`\r\n\r\nexport const LoadingText = styled.p`\r\n  font-family: 'archiasemibold';\r\n  color: ${({ theme }) => theme.spinner.text};\r\n  font-size: ${({ fontSize }) => fontSize};\r\n  padding: 20px;\r\n`\r\n","import React from 'react'\r\n\r\nimport { SpinnerContainer, LoadingText, Loader } from './spinner.styles'\r\n\r\nconst Spinner = ({\r\n  loadingText,\r\n  size = '50px',\r\n  fontSize = '16px',\r\n  ...props\r\n}) => {\r\n  return (\r\n    <SpinnerContainer {...props}>\r\n      <Loader size={size} />\r\n      {loadingText ? (\r\n        <LoadingText fontSize={fontSize}>{loadingText}</LoadingText>\r\n      ) : (\r\n        ''\r\n      )}\r\n    </SpinnerContainer>\r\n  )\r\n}\r\n\r\nexport default Spinner\r\n","import styled from 'styled-components'\r\n\r\nexport const ChannelsContainer = styled.div`\r\n  width: 100%;\r\n  height: auto;\r\n  border-radius: 14px;\r\n  padding: 18px;\r\n  background-color: ${({ theme }) => theme.channels.bg};\r\n`\r\n\r\nexport const ChannelsHeading = styled.div`\r\n  font-family: 'archiasemibold';\r\n  font-size: 17px;\r\n  color: ${({ theme }) => theme.channels.text};\r\n  display: grid;\r\n  grid-template-columns: auto 20px;\r\n\r\n  svg {\r\n    justify-self: center;\r\n    align-self: center;\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nexport const ChannelsList = styled.ul`\r\n  margin-top: 10px;\r\n`\r\n\r\nexport const ChannelItem = styled.li`\r\n  cursor: pointer;\r\n  padding: 4px;\r\n  border-radius: 8px;\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  background-color: ${({ selected, theme }) =>\r\n    selected ? theme.channels.hover : 'transparent'};\r\n  opacity: ${({ selected }) => (selected ? 1 : 0.8)};\r\n\r\n  margin-bottom: 4px;\r\n\r\n  :last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  &:hover {\r\n    background-color: ${({ theme }) => theme.channels.hover};\r\n  }\r\n`\r\nexport const Name = styled.p`\r\n  font-family: 'archiasemibold';\r\n  font-size: 16px;\r\n  color: ${({ theme }) => theme.channels.text};\r\n  flex: 1 0;\r\n`\r\n\r\nexport const Notifications = styled.span`\r\n  font-family: 'archiasemibold';\r\n  background-color: ${({ theme }) => theme.channels.notificationsBg};\r\n  color: ${({ theme }) => theme.channels.notificationsFg};\r\n  padding: 2px 4px;\r\n  font-size: 13px;\r\n  border-radius: 6px;\r\n  justify-self: flex-end;\r\n`\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\n\r\nimport { FaPlusSquare } from 'react-icons/fa'\r\n\r\nimport AddChannelModal from '../add-channel-modal/add-channel-modal.component'\r\n\r\nimport { selectCurrentUser } from '../../redux/user/user.selectors'\r\nimport {\r\n  selectChannels,\r\n  selectCurrentChannel,\r\n  selectIsPrivateChannel\r\n} from '../../redux/chat/chat.selectors'\r\nimport {\r\n  setCurrentChannel,\r\n  setPrivateChannel,\r\n  setChannels\r\n} from '../../redux/chat/chat.actions'\r\n\r\nimport Spinner from '../spinner/spinner.component'\r\n\r\nimport {\r\n  ChannelsContainer,\r\n  ChannelsHeading,\r\n  ChannelsList,\r\n  ChannelItem,\r\n  Name,\r\n  Notifications\r\n} from './channels.styles'\r\n\r\nimport firebase, { firestore, database } from '../../firebase/firebase.utils'\r\n\r\nclass Channels extends React.Component {\r\n  state = {\r\n    channel: null,\r\n    channelName: '',\r\n    channelDetails: '',\r\n    channelsRef: firestore.collection('channels'),\r\n    typingRef: database.ref('typing'),\r\n    unsubscribeChannelListener: null,\r\n    notificationListeners: {},\r\n    notifications: [],\r\n    modal: false,\r\n    firstLoad: true,\r\n    activeChannel: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.addListeners()\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { channels } = this.props\r\n    if (channels) this.setFirstChannel()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.removeListeners()\r\n  }\r\n\r\n  addListeners = () => {\r\n    const { channelsRef } = this.state\r\n    const { setChannels } = this.props\r\n\r\n    const unsubscribe = channelsRef\r\n      .orderBy('createdAt', 'asc')\r\n      .onSnapshot(snapshot => {\r\n        const channels = snapshot.docs.map(doc => doc.data())\r\n        setChannels(channels)\r\n\r\n        // add notification listener for each channel\r\n        channels.forEach(channel => this.addNotificationListener(channel.id))\r\n      })\r\n\r\n    this.setState({\r\n      unsubscribeChannelListener: unsubscribe\r\n    })\r\n  }\r\n\r\n  addNotificationListener = channelId => {\r\n    const { channelsRef } = this.state\r\n\r\n    const listener = channelsRef\r\n      .doc(channelId)\r\n      .collection('messages')\r\n      .onSnapshot(snapshot => {\r\n        if (this.state.channel) {\r\n          this.handleNotifications(\r\n            channelId,\r\n            this.state.channel.id,\r\n            this.state.notifications,\r\n            snapshot\r\n          )\r\n        }\r\n      })\r\n\r\n    this.setState(({ notificationListeners }) => ({\r\n      notificationListeners: { ...notificationListeners, [channelId]: listener }\r\n    }))\r\n  }\r\n\r\n  handleNotifications = (\r\n    channelId,\r\n    currentChannelId,\r\n    notifications,\r\n    snapshot\r\n  ) => {\r\n    let lastTotal = 0\r\n\r\n    const index = notifications.findIndex(\r\n      notification => notification.id === channelId\r\n    )\r\n\r\n    if (index !== -1) {\r\n      if (channelId !== currentChannelId) {\r\n        lastTotal = notifications[index].lastKnownTotal\r\n\r\n        if (snapshot.docs.length - lastTotal > 0) {\r\n          notifications[index].count = snapshot.docs.length - lastTotal\r\n          notifications[index].total = snapshot.docs.length\r\n        }\r\n      }\r\n    } else {\r\n      notifications.push({\r\n        id: channelId,\r\n        total: snapshot.docs.length,\r\n        lastKnownTotal: snapshot.docs.length,\r\n        count: 0\r\n      })\r\n    }\r\n\r\n    this.setState({\r\n      notifications\r\n    })\r\n  }\r\n\r\n  removeListeners = () => {\r\n    const { unsubscribeChannelListener } = this.state\r\n    unsubscribeChannelListener()\r\n    const { notificationListeners } = this.state\r\n    Object.keys(notificationListeners).forEach(listener => {\r\n      notificationListeners[listener]()\r\n    })\r\n  }\r\n\r\n  setFirstChannel = () => {\r\n    const { firstLoad } = this.state\r\n    const { setCurrentChannel, channels } = this.props\r\n    if (firstLoad && channels.length) {\r\n      setCurrentChannel(channels[0])\r\n      this.setActiveChannel(channels[0])\r\n      this.setState({ firstLoad: false, channel: channels[0] })\r\n    }\r\n  }\r\n\r\n  addChannel = ({ name, about }) => {\r\n    const { channelsRef } = this.state\r\n    const { currentUser } = this.props\r\n\r\n    const ref = channelsRef.doc()\r\n\r\n    const newChannel = {\r\n      id: ref.id,\r\n      name,\r\n      details: about,\r\n      createdBy: {\r\n        name: currentUser.displayName,\r\n        avatar: currentUser.photoURL,\r\n        uid: currentUser.uid\r\n      },\r\n      createdAt: firebase.firestore.FieldValue.serverTimestamp()\r\n    }\r\n\r\n    channelsRef\r\n      .doc(ref.id)\r\n      .set(newChannel)\r\n      .then(() => {\r\n        this.setState({ channelName: '', channelDetails: '', modal: false })\r\n        console.log('channel created')\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n      })\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({ modal: false })\r\n  }\r\n\r\n  handleConfirm = ({ name, about }) => {\r\n    this.setState({ channelName: name, channelDetails: about })\r\n    if (name && about) {\r\n      this.addChannel({ name, about })\r\n    }\r\n  }\r\n\r\n  openModal = () => {\r\n    this.setState({ modal: true })\r\n  }\r\n\r\n  setActiveChannel = channel => {\r\n    this.setState({ activeChannel: channel.id })\r\n  }\r\n\r\n  changeChannel = channel => {\r\n    const { typingRef } = this.state\r\n    const {\r\n      setCurrentChannel,\r\n      setPrivateChannel,\r\n      currentUser,\r\n      currentChannel\r\n    } = this.props\r\n    typingRef.child(currentChannel.id).child(currentUser.uid).remove()\r\n    setCurrentChannel(channel)\r\n    setPrivateChannel(false)\r\n    this.setActiveChannel(channel)\r\n    this.setState({ channel }, () => this.clearNotifications())\r\n  }\r\n\r\n  clearNotifications = () => {\r\n    let index = this.state.notifications.findIndex(\r\n      notification => notification.id === this.state.channel.id\r\n    )\r\n\r\n    if (index !== -1) {\r\n      let updatedNotifications = [...this.state.notifications]\r\n      updatedNotifications[index].lastKnownTotal = this.state.notifications[\r\n        index\r\n      ].total\r\n      updatedNotifications[index].count = 0\r\n      this.setState({\r\n        notifications: updatedNotifications\r\n      })\r\n    }\r\n  }\r\n\r\n  getNotificationCount = channel => {\r\n    let count = 0\r\n    this.state.notifications.forEach(notification => {\r\n      if (notification.id === channel.id) {\r\n        count = notification.count\r\n      }\r\n    })\r\n\r\n    return count\r\n  }\r\n\r\n  render() {\r\n    const { modal, firstLoad } = this.state\r\n    const { isPrivateChannel, currentChannel, channels } = this.props\r\n\r\n    return (\r\n      <ChannelsContainer>\r\n        <AddChannelModal\r\n          close={this.handleClose}\r\n          confirm={this.handleConfirm}\r\n          showing={modal}\r\n        />\r\n        <ChannelsHeading>\r\n          <span>CHANNELS</span>\r\n          <FaPlusSquare\r\n            onClick={this.openModal}\r\n            style={{ alignSelf: 'flex-end' }}\r\n            size={20}\r\n          />\r\n        </ChannelsHeading>\r\n        {firstLoad ? (\r\n          <Spinner\r\n            style={{ backgroundColor: 'transparent', marginTop: 20 }}\r\n            size=\"40px\"\r\n          />\r\n        ) : (\r\n          <ChannelsList>\r\n            {channels.map(channel => {\r\n              const { id, name } = channel\r\n              return (\r\n                <ChannelItem\r\n                  key={id}\r\n                  selected={\r\n                    channel.id === currentChannel.id && !isPrivateChannel\r\n                  }\r\n                  onClick={() => this.changeChannel(channel)}\r\n                >\r\n                  <Name># {name}</Name>{' '}\r\n                  {this.getNotificationCount(channel) ? (\r\n                    <Notifications>\r\n                      {this.getNotificationCount(channel)}\r\n                    </Notifications>\r\n                  ) : null}\r\n                </ChannelItem>\r\n              )\r\n            })}\r\n          </ChannelsList>\r\n        )}\r\n      </ChannelsContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentUser: selectCurrentUser,\r\n  channels: selectChannels,\r\n  currentChannel: selectCurrentChannel,\r\n  isPrivateChannel: selectIsPrivateChannel\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setChannels: channels => dispatch(setChannels(channels)),\r\n  setCurrentChannel: channel => dispatch(setCurrentChannel(channel)),\r\n  setPrivateChannel: isPrivate => dispatch(setPrivateChannel(isPrivate))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Channels)\r\n","import styled from 'styled-components'\r\n\r\nexport const DirectMessagesContainer = styled.div`\r\n  width: 100%;\r\n  height: auto;\r\n  border-radius: 14px;\r\n  padding: 18px;\r\n  background-color: ${({ theme }) => theme.directMessages.bg};\r\n`\r\n\r\nexport const DirectMessagesHeading = styled.div`\r\n  font-family: 'archiasemibold';\r\n  font-size: 17px;\r\n  color: ${({ theme }) => theme.directMessages.text};\r\n  display: grid;\r\n  grid-template-columns: auto 20px;\r\n\r\n  svg {\r\n    justify-self: center;\r\n    align-self: center;\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nexport const DirectMessagesList = styled.ul`\r\n  margin-top: 10px;\r\n`\r\n\r\nexport const DirectMessagesItem = styled.li`\r\n  cursor: pointer;\r\n  padding: 4px;\r\n  border-radius: 8px;\r\n  background-color: ${({ selected, theme }) =>\r\n    selected ? theme.directMessages.hover : 'transparent'};\r\n  opacity: ${({ selected }) => (selected ? 1 : 0.8)};\r\n\r\n  margin-bottom: 4px;\r\n\r\n  :last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  &:hover {\r\n    background-color: ${({ theme }) => theme.directMessages.hover};\r\n  }\r\n`\r\n\r\nexport const User = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n\r\n  p {\r\n    font-family: 'archiasemibold';\r\n    font-size: 16px;\r\n    color: ${({ theme }) => theme.directMessages.text};\r\n    margin-left: 6px;\r\n  }\r\n`\r\n\r\nexport const Status = styled.div`\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 10px;\r\n\r\n  background-color: ${({ theme, status }) => {\r\n    const { directMessages } = theme\r\n    if (status === 'online') return directMessages.status.online\r\n    if (status === 'away') return directMessages.status.away\r\n    else return directMessages.status.offline\r\n  }};\r\n`\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\n\r\nimport { MdMessage } from 'react-icons/md'\r\n\r\nimport {\r\n  selectCurrentUser,\r\n  selectUserStatus\r\n} from '../../redux/user/user.selectors'\r\n\r\nimport {\r\n  setCurrentChannel,\r\n  setPrivateChannel,\r\n  setOtherUsersStatus\r\n} from '../../redux/chat/chat.actions'\r\n\r\nimport { selectIsPrivateChannel } from '../../redux/chat/chat.selectors'\r\n\r\nimport { firestore, database } from '../../firebase/firebase.utils'\r\n\r\nimport Spinner from '../spinner/spinner.component'\r\n\r\nimport {\r\n  DirectMessagesContainer,\r\n  DirectMessagesHeading,\r\n  DirectMessagesList,\r\n  DirectMessagesItem,\r\n  User,\r\n  Status\r\n} from './direct-messages.styles'\r\n\r\nclass DirectMessages extends React.Component {\r\n  state = {\r\n    users: [],\r\n    usersListener: null,\r\n    connectedRef: database.ref('.info/connected'),\r\n    presenceRef: database.ref('presence'),\r\n    activeChannel: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { currentUser } = this.props\r\n    if (currentUser) {\r\n      this.addListeners(currentUser.uid)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.removeListeners()\r\n  }\r\n\r\n  addListeners = currentUserUid => {\r\n    const { connectedRef, presenceRef } = this.state\r\n    const { userStatus } = this.props\r\n\r\n    const usersListener = firestore.collection('users').onSnapshot(snapshot => {\r\n      const otherUsers = snapshot.docs.filter(doc => doc.id !== currentUserUid)\r\n      const usersWithDetails = otherUsers.map(user => {\r\n        let userWithDetails = {\r\n          ...user.data(),\r\n          uid: user.id,\r\n          status: 'offline'\r\n        }\r\n\r\n        return userWithDetails\r\n      })\r\n\r\n      this.setState(\r\n        {\r\n          users: usersWithDetails\r\n        },\r\n        this.updateUsersStatus\r\n      )\r\n    })\r\n\r\n    this.setState({\r\n      usersListener\r\n    })\r\n\r\n    // setting user presence\r\n\r\n    connectedRef.on('value', snapshot => {\r\n      if (snapshot.val()) {\r\n        const ref = presenceRef.child(currentUserUid)\r\n        // set user status from state in case of connection disonnect and reconnect\r\n        // status will be restored from state\r\n        ref.set(userStatus)\r\n        ref.onDisconnect().set('offline')\r\n      }\r\n    })\r\n  }\r\n\r\n  removeListeners = () => {\r\n    const { usersListener, connectedRef, presenceRef } = this.state\r\n    const { currentUser } = this.props\r\n\r\n    usersListener()\r\n    connectedRef.off()\r\n\r\n    // set user status offline\r\n    presenceRef.child(currentUser.uid).set('offline')\r\n\r\n    presenceRef.off()\r\n  }\r\n\r\n  updateUsersStatus = () => {\r\n    const { presenceRef } = this.state\r\n    const { setOtherUsersStatus } = this.props\r\n\r\n    presenceRef.on('value', snapshot => {\r\n      const usersPrescence = snapshot.val()\r\n\r\n      setOtherUsersStatus(usersPrescence)\r\n\r\n      Object.keys(usersPrescence).forEach(userId => {\r\n        this.addStatusToUser(userId, usersPrescence[userId])\r\n      })\r\n    })\r\n  }\r\n\r\n  addStatusToUser = (userId, status = 'online') => {\r\n    const { users } = this.state\r\n    const updatedUsers = users.reduce((acc, user) => {\r\n      if (user.uid === userId) {\r\n        user['status'] = status\r\n      }\r\n      return acc.concat(user)\r\n    }, [])\r\n\r\n    this.setState({\r\n      users: updatedUsers\r\n    })\r\n  }\r\n\r\n  changeChannel = user => {\r\n    const { setCurrentChannel, setPrivateChannel } = this.props\r\n    const channelId = this.getChannelId(user.uid)\r\n    const channelData = {\r\n      id: channelId,\r\n      name: user.name,\r\n      uid: user.uid,\r\n      type: 'direct'\r\n    }\r\n\r\n    setCurrentChannel(channelData)\r\n    setPrivateChannel(true)\r\n    this.setActiveChannel(channelId)\r\n  }\r\n\r\n  getChannelId = userId => {\r\n    const { currentUser } = this.props\r\n    const currentUserId = currentUser.uid\r\n    return userId < currentUserId\r\n      ? `${userId}/${currentUserId}`\r\n      : `${currentUserId}/${userId}`\r\n  }\r\n\r\n  setActiveChannel = channelId => {\r\n    this.setState({ activeChannel: channelId })\r\n  }\r\n\r\n  render() {\r\n    const { users, activeChannel } = this.state\r\n    const { isPrivateChannel } = this.props\r\n\r\n    return (\r\n      <DirectMessagesContainer>\r\n        <DirectMessagesHeading>\r\n          <span>DIRECT MESSAGES</span>\r\n          <MdMessage\r\n            onClick={this.openModal}\r\n            style={{ alignSelf: 'flex-end' }}\r\n            size={20}\r\n          />\r\n        </DirectMessagesHeading>\r\n        {users.length ? (\r\n          <DirectMessagesList>\r\n            {users.map(user => {\r\n              const { uid, name, status = 'offline' } = user\r\n              return (\r\n                <DirectMessagesItem\r\n                  key={uid}\r\n                  selected={\r\n                    activeChannel === this.getChannelId(uid) && isPrivateChannel\r\n                  }\r\n                >\r\n                  <User onClick={() => this.changeChannel(user)}>\r\n                    <Status status={status} /> <p>{name}</p>\r\n                  </User>\r\n                </DirectMessagesItem>\r\n              )\r\n            })}\r\n          </DirectMessagesList>\r\n        ) : (\r\n          <Spinner\r\n            style={{ backgroundColor: 'transparent', marginTop: 20 }}\r\n            size=\"40px\"\r\n          />\r\n        )}\r\n      </DirectMessagesContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentUser: selectCurrentUser,\r\n  userStatus: selectUserStatus,\r\n  isPrivateChannel: selectIsPrivateChannel\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setCurrentChannel: channel => dispatch(setCurrentChannel(channel)),\r\n  setPrivateChannel: isPrivate => dispatch(setPrivateChannel(isPrivate)),\r\n  setOtherUsersStatus: usersStatus => dispatch(setOtherUsersStatus(usersStatus))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DirectMessages)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\n\r\nimport { FaArrowLeft } from 'react-icons/fa'\r\n\r\nimport { SidePanelContainer, CloseSidebar } from './side-panel.styles'\r\n\r\nimport UserStatusCard from '../user-status-card/user-status-card.component'\r\nimport Starred from '../starred/starred.component'\r\nimport Channels from '../channels/channels.component'\r\nimport DirectMessages from '../direct-messages/direct-messages.component'\r\n\r\nimport { selectSidebarShowing } from '../../redux/chat/chat.selectors'\r\nimport { toggleSidebar } from '../../redux/chat/chat.actions'\r\n\r\nconst SidePanel = ({ sidebarShowing, toggleSidebar }) => {\r\n  return (\r\n    <SidePanelContainer sidebarShowing={sidebarShowing}>\r\n      <CloseSidebar onClick={() => toggleSidebar(false)}>\r\n        <FaArrowLeft />\r\n        <span>CLOSE</span>\r\n      </CloseSidebar>\r\n      <UserStatusCard />\r\n      <Starred />\r\n      <Channels />\r\n      <DirectMessages />\r\n    </SidePanelContainer>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  sidebarShowing: selectSidebarShowing\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  toggleSidebar: boolean => dispatch(toggleSidebar(boolean))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SidePanel)\r\n","import styled from 'styled-components'\r\n\r\nexport const MessagesPanelContainer = styled.div`\r\n  flex: 1 0;\r\n  height: 100%;\r\n  padding: 14px;\r\n  display: grid;\r\n  grid-gap: 14px;\r\n  grid-template-rows: auto 1fr auto;\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const ChannelHeaderContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 14px;\r\n  padding: 14px 20px;\r\n  display: grid;\r\n  align-items: center;\r\n  grid-template-columns: minmax(240px, 2fr) minmax(200px, 1fr);\r\n  font-family: 'archiasemibold';\r\n  background-color: ${({ theme: { channelHeader } }) => channelHeader.bg};\r\n  color: ${({ theme: { channelHeader } }) => channelHeader.text};\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    grid-template-columns: auto 0px;\r\n  }\r\n`\r\n\r\nexport const ChannelInfo = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n`\r\n\r\nexport const SidebarButton = styled.button`\r\n  background: ${({ theme }) => theme.channelHeader.search.bg};\r\n  outline: none;\r\n  border: 0px;\r\n  padding: 4px;\r\n  border-radius: 4px;\r\n  margin-right: 8px;\r\n  margin-left: 0px !important;\r\n  font-size: 22px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: none;\r\n\r\n  svg {\r\n    color: ${({ theme }) => theme.channelHeader.sidebarIcon} !important;\r\n  }\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    display: flex;\r\n  }\r\n`\r\n\r\nexport const Heading = styled.h2`\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 30px;\r\n  span {\r\n    margin-right: 4px;\r\n  }\r\n\r\n  svg {\r\n    color: ${({ theme }) => theme.channelHeader.starIcon};\r\n    cursor: pointer;\r\n  }\r\n`\r\n\r\nexport const About = styled.p`\r\n  margin-top: 12px;\r\n  margin-bottom: 2px;\r\n  opacity: 0.8;\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const Members = styled.span`\r\n  font-size: 14px;\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const SearchFieldContainer = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`\r\n\r\nexport const Search = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 46px;\r\n\r\n  svg {\r\n    color: ${({ theme }) => theme.channelHeader.search.placeholder};\r\n    position: absolute;\r\n    right: 12px;\r\n    top: 0;\r\n    bottom: 0;\r\n    margin: auto;\r\n    cursor: pointer;\r\n  }\r\n\r\n  @media only screen and (max-width: 768px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const SearchInput = styled.input`\r\n  color: ${({ theme }) => theme.channelHeader.search.text};\r\n  background-color: ${({ theme }) => theme.channelHeader.search.bg};\r\n  border-radius: 14px;\r\n  border: none;\r\n  font-size: 15px;\r\n  font-family: 'archiaregular';\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 16px 34px 16px 14px;\r\n\r\n  &::placeholder {\r\n    color: ${({ theme }) => theme.channelHeader.search.placeholder};\r\n  }\r\n\r\n  &:focus {\r\n    outline: none;\r\n  }\r\n`\r\n\r\nexport const UserStatus = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-top: 6px;\r\n  margin-left: 6px;\r\n`\r\n\r\nexport const Dot = styled.div`\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 10px;\r\n\r\n  background-color: ${({ theme, status }) => {\r\n    const { directMessages } = theme\r\n    if (status === 'online') return directMessages.status.online\r\n    if (status === 'away') return directMessages.status.away\r\n    else return directMessages.status.offline\r\n  }};\r\n`\r\n\r\nexport const Status = styled.p`\r\n  margin-left: 5px;\r\n  text-transform: capitalize;\r\n  opacity: 0.8;\r\n`\r\n\r\nexport const InfoToggle = styled.button`\r\n  font-size: 24px;\r\n  outline: none;\r\n  border: none;\r\n  background: transparent;\r\n  cursor: pointer;\r\n  height: 100%;\r\n  padding: 6px;\r\n  display: none;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin-left: 8px;\r\n  color: ${({ theme }) => theme.channelHeader.infoIcon};\r\n\r\n  @media only screen and (max-width: 1100px) {\r\n    display: flex;\r\n  }\r\n`\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\n\r\nimport {\r\n  FaStar,\r\n  FaRegStar,\r\n  FaSearch,\r\n  FaTimes,\r\n  FaBars,\r\n  FaInfoCircle\r\n} from 'react-icons/fa'\r\n\r\nimport Spinner from '../spinner/spinner.component'\r\n\r\nimport {\r\n  ChannelHeaderContainer,\r\n  ChannelInfo,\r\n  Heading,\r\n  About,\r\n  Members,\r\n  SearchFieldContainer,\r\n  Search,\r\n  SearchInput,\r\n  UserStatus,\r\n  Dot,\r\n  Status,\r\n  SidebarButton,\r\n  InfoToggle\r\n} from './channel-header.styles'\r\n\r\nimport {\r\n  selectChannelMembers,\r\n  selectIsPrivateChannel,\r\n  selectOtherUsersStatus\r\n} from '../../redux/chat/chat.selectors'\r\n\r\nimport {\r\n  setMessageSearchFilters,\r\n  setStarredChannels,\r\n  toggleSidebar,\r\n  toggleMeta\r\n} from '../../redux/chat/chat.actions'\r\n\r\nimport { firestore } from '../../firebase/firebase.utils'\r\n\r\nclass ChannelHeader extends React.Component {\r\n  state = {\r\n    filters: {\r\n      text: ''\r\n    },\r\n    status: 'offline',\r\n    usersRef: firestore.collection('users')\r\n  }\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target\r\n\r\n    this.setState(\r\n      {\r\n        filters: {\r\n          [name]: value\r\n        }\r\n      },\r\n      () => {\r\n        this.setFilters(this.state.filters)\r\n      }\r\n    )\r\n  }\r\n\r\n  unsubscribeStarredListener = null\r\n\r\n  componentDidMount() {\r\n    const { usersRef } = this.state\r\n    const { currentUser, setStarredChannels } = this.props\r\n\r\n    this.unsubscribeStarredListener = usersRef\r\n      .doc(currentUser.uid)\r\n      .onSnapshot(snapshot => {\r\n        const starred = snapshot.data()\r\n        if (starred) {\r\n          setStarredChannels(starred['starred'])\r\n        }\r\n      })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribeStarredListener()\r\n  }\r\n\r\n  setFilters = filters => {\r\n    const { setMessageSearchFilters } = this.props\r\n\r\n    setMessageSearchFilters(filters)\r\n  }\r\n\r\n  clearText = () => {\r\n    this.setState(\r\n      {\r\n        filters: {\r\n          text: ''\r\n        }\r\n      },\r\n      () => {\r\n        this.setFilters(this.state.filters)\r\n      }\r\n    )\r\n  }\r\n\r\n  getStatusForDM = () => {\r\n    const { otherUsersStatus, currentChannel } = this.props\r\n    if (currentChannel && currentChannel['uid']) {\r\n      return otherUsersStatus[currentChannel['uid']]\r\n    } else {\r\n      return 'offline'\r\n    }\r\n  }\r\n\r\n  handleStar = starred => {\r\n    this.starChannel(starred)\r\n  }\r\n\r\n  starChannel = () => {\r\n    const { usersRef } = this.state\r\n    const { currentUser, currentChannel } = this.props\r\n\r\n    let starredChannels = []\r\n\r\n    // check if starred property exists on user first\r\n    usersRef\r\n      .doc(currentUser.uid)\r\n      .get()\r\n      .then(snapshot => {\r\n        const data = snapshot.data()\r\n        if (data['starred']) {\r\n          starredChannels = [...data['starred']]\r\n        } else {\r\n          starredChannels = []\r\n        }\r\n\r\n        // check if channel already starred\r\n        const index = starredChannels.indexOf(currentChannel.id)\r\n        if (index === -1) {\r\n          starredChannels.push(currentChannel.id)\r\n        } else {\r\n          starredChannels.splice(index, 1)\r\n        }\r\n\r\n        // push new starred channels array to firebase\r\n        usersRef\r\n          .doc(currentUser.uid)\r\n          .update({\r\n            starred: starredChannels\r\n          })\r\n          .then(() => console.log('starred channels updated'))\r\n          .catch(err => console.error(err))\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      currentChannel,\r\n      members,\r\n      privateChannel,\r\n      toggleSidebar,\r\n      toggleMeta\r\n    } = this.props\r\n    const { filters } = this.state\r\n\r\n    // status for direct message user\r\n    const status = this.getStatusForDM()\r\n\r\n    return (\r\n      <ChannelHeaderContainer>\r\n        {currentChannel ? (\r\n          <>\r\n            <ChannelInfo>\r\n              <Heading>\r\n                <SidebarButton onClick={() => toggleSidebar()}>\r\n                  <FaBars />\r\n                </SidebarButton>\r\n                <span>\r\n                  {privateChannel ? '@' : '#'} {currentChannel.name}\r\n                </span>{' '}\r\n                {!privateChannel ? (\r\n                  currentChannel.starred ? (\r\n                    <FaStar size={26} onClick={() => this.handleStar()} />\r\n                  ) : (\r\n                    <FaRegStar size={26} onClick={() => this.handleStar()} />\r\n                  )\r\n                ) : null}\r\n              </Heading>\r\n              {!privateChannel ? (\r\n                <About>{currentChannel.details}</About>\r\n              ) : (\r\n                <UserStatus>\r\n                  <Dot status={status} /> <Status>{status}</Status>\r\n                </UserStatus>\r\n              )}\r\n              {!privateChannel ? (\r\n                <Members>\r\n                  {members && members.count === 1\r\n                    ? `${members.count} member`\r\n                    : `${members.count} members`}\r\n                </Members>\r\n              ) : null}\r\n            </ChannelInfo>\r\n            <SearchFieldContainer>\r\n              <Search>\r\n                <SearchInput\r\n                  type=\"text\"\r\n                  name=\"text\"\r\n                  onChange={this.handleChange}\r\n                  value={filters.text}\r\n                  placeholder=\"search messages\"\r\n                />\r\n                {filters.text.length ? (\r\n                  <FaTimes onClick={this.clearText} />\r\n                ) : (\r\n                  <FaSearch />\r\n                )}\r\n              </Search>\r\n              <InfoToggle onClick={() => toggleMeta()}>\r\n                <FaInfoCircle />\r\n              </InfoToggle>\r\n            </SearchFieldContainer>\r\n          </>\r\n        ) : (\r\n          <Spinner\r\n            style={{ backgroundColor: 'transparent', gridColumn: '1 / span 2' }}\r\n          />\r\n        )}\r\n      </ChannelHeaderContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  members: selectChannelMembers,\r\n  privateChannel: selectIsPrivateChannel,\r\n  otherUsersStatus: selectOtherUsersStatus\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setMessageSearchFilters: filters =>\r\n    dispatch(setMessageSearchFilters(filters)),\r\n  setStarredChannels: starredChannels =>\r\n    dispatch(setStarredChannels(starredChannels)),\r\n  toggleSidebar: boolean => dispatch(toggleSidebar(boolean)),\r\n  toggleMeta: boolean => dispatch(toggleMeta(boolean))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ChannelHeader)\r\n","import styled, { css } from 'styled-components'\r\n\r\nconst scrollbar = css`\r\n  ::-webkit-scrollbar {\r\n    width: 10px;\r\n    height: 10px;\r\n  }\r\n  ::-webkit-scrollbar-button {\r\n    width: 0px;\r\n    height: 0px;\r\n  }\r\n  ::-webkit-scrollbar-thumb {\r\n    background: ${({ theme }) => theme.scrollbar.fg};\r\n    opacity: 0.5;\r\n    border: 0px;\r\n    border-radius: 50px;\r\n  }\r\n  ::-webkit-scrollbar-thumb:hover,\r\n  ::-webkit-scrollbar-thumb:active {\r\n    background: ${({ theme }) => theme.scrollbar.fgHover};\r\n  }\r\n\r\n  ::-webkit-scrollbar-track {\r\n    border: 0px;\r\n    border-radius: 50px;\r\n  }\r\n  ::-webkit-scrollbar-track,\r\n  ::-webkit-scrollbar-track:hover,\r\n  ::-webkit-scrollbar-track:active {\r\n    background: ${({ theme }) => theme.scrollbar.bg};\r\n  }\r\n\r\n  ::-webkit-scrollbar-corner {\r\n    background: transparent;\r\n  }\r\n`\r\n\r\nexport const MessagesContainer = styled.div`\r\n  width: 100%;\r\n  min-height: 100%;\r\n  border-radius: 14px;\r\n  padding: 20px;\r\n  background-color: ${({ theme }) => theme.messages.bg};\r\n  display: flex;\r\n  flex-direction: column;\r\n`\r\n\r\nexport const Container = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  flex: 1 0;\r\n\r\n  > :nth-child(n) {\r\n    margin-bottom: 12px;\r\n  }\r\n\r\n  > :last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  ${scrollbar}\r\n`\r\n\r\nexport const TypingContainer = styled.div`\r\n  align-self: flex-end;\r\n  width: 100%;\r\n`\r\n\r\nexport const EmptyPlaceholder = styled.div`\r\n  width: 100%;\r\n  height: 90%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-family: 'archiabold';\r\n  font-size: 24px;\r\n\r\n  span {\r\n    color: ${({ theme }) => theme.messages.placeholder};\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const MessageContainer = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 54px auto;\r\n  grid-gap: 8px;\r\n  align-items: center;\r\n`\r\n\r\nexport const Avatar = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  img {\r\n    width: 54px;\r\n    height: 54px;\r\n    align-self: top;\r\n    border-radius: 14px;\r\n  }\r\n`\r\n\r\nexport const MessageInfo = styled.div`\r\n  color: ${({ theme }) => theme.message.textPrimary};\r\n`\r\n\r\nexport const Heading = styled.div`\r\n  font-family: 'archiasemibold';\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 3px;\r\n\r\n  h2 {\r\n    font-size: 16px;\r\n  }\r\n\r\n  span {\r\n    font-size: 14px;\r\n    color: ${({ theme }) => theme.message.textSecondary};\r\n    margin-left: 6px;\r\n  }\r\n`\r\n\r\nexport const Content = styled.p`\r\n  font-size: 16px;\r\n  padding-right: 20px;\r\n  font-family: 'archiaregular';\r\n  word-break: break-word;\r\n\r\n  img {\r\n    border-radius: 14px;\r\n    margin-top: 4px;\r\n    width: 100%;\r\n    max-width: 320px;\r\n  }\r\n`\r\n","import React from 'react'\r\nimport moment from 'moment'\r\n\r\nimport {\r\n  MessageContainer,\r\n  Avatar,\r\n  MessageInfo,\r\n  Heading,\r\n  Content\r\n} from './message.styles'\r\n\r\nconst timeFromNow = timestamp => {\r\n  if (timestamp) return moment(timestamp.toDate()).fromNow(true)\r\n  else return 'just now'\r\n}\r\n\r\nconst Message = ({ message = {} }) => {\r\n  const { content, timestamp, user, image } = message\r\n\r\n  return (\r\n    <MessageContainer>\r\n      <Avatar>\r\n        <img src={user.avatar} alt=\"avatar\" />\r\n      </Avatar>\r\n      <MessageInfo>\r\n        <Heading>\r\n          <h2>{user.name}</h2> <span>{`${timeFromNow(timestamp)} ago`}</span>\r\n        </Heading>\r\n        <Content image={!!image}>\r\n          {content || <img src={image} alt=\"message-attachment\" />}\r\n        </Content>\r\n      </MessageInfo>\r\n    </MessageContainer>\r\n  )\r\n}\r\n\r\nexport default Message\r\n","import styled from 'styled-components'\r\n\r\nexport const TypingUsersContainer = styled.div`\r\n  margin-top: 14px;\r\n  width: 100%;\r\n  border-radius: 99px;\r\n  overflow: hidden;\r\n  display: flex;\r\n\r\n  > :nth-child(n) {\r\n    margin-right: 10px;\r\n  }\r\n\r\n  > :last-child {\r\n    margin-right: 0px;\r\n  }\r\n`\r\n\r\nexport const User = styled.div`\r\n  border-radius: 99px;\r\n  padding: 8px;\r\n  background: ${({ theme }) => theme.typingUsers.itemBg};\r\n  display: flex;\r\n  align-items: center;\r\n  width: fit-content;\r\n\r\n  span {\r\n    color: ${({ theme }) => theme.typingUsers.text};\r\n    font-family: 'archiasemibold';\r\n    font-size: 13px;\r\n    margin-right: 2px;\r\n  }\r\n`\r\n\r\nexport const Dot = styled.div`\r\n  @keyframes blink {\r\n    from {\r\n      opacity: 1;\r\n    }\r\n    to {\r\n      opacity: 0.25;\r\n    }\r\n  }\r\n\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 10px;\r\n  margin-left: 4px;\r\n  background: #6c757d;\r\n  animation: blink 800ms infinite alternate;\r\n`\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\n\r\nimport { TypingUsersContainer, User, Dot } from './typing-users.styles'\r\n\r\nimport { selectCurrentUser } from '../../redux/user/user.selectors'\r\nimport { selectCurrentChannel } from '../../redux/chat/chat.selectors'\r\n\r\nimport { database } from '../../firebase/firebase.utils'\r\n\r\nclass TypingUsers extends React.Component {\r\n  state = {\r\n    typingRef: database.ref('typing'),\r\n    connectedRef: database.ref('.info/connected'),\r\n    typing: {}\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { typingRef, connectedRef } = this.state\r\n    const { currentUser } = this.props\r\n\r\n    typingRef.on('value', snapshot => {\r\n      this.setState({\r\n        typing: snapshot.val()\r\n      })\r\n    })\r\n\r\n    connectedRef.on('value', snapshot => {\r\n      if (snapshot.val() === true) {\r\n        const { currentChannel } = this.props\r\n\r\n        typingRef\r\n          .child(currentChannel.id)\r\n          .child(currentUser.uid)\r\n          .onDisconnect()\r\n          .remove(err => {\r\n            if (err) console.error(err)\r\n          })\r\n      }\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { typingRef, connectedRef } = this.state\r\n    // removing listener\r\n    typingRef.off()\r\n    connectedRef.off()\r\n  }\r\n\r\n  getTypingUsers = channelId => {\r\n    const { typing } = this.state\r\n    const { currentUser } = this.props\r\n\r\n    if (typing && typing[channelId]) {\r\n      const channel = typing[channelId]\r\n      // user names typing in channel\r\n      return Object.keys(channel)\r\n        .filter(userId => currentUser.uid !== userId)\r\n        .map(userId => channel[userId])\r\n    } else {\r\n      return []\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { currentChannel } = this.props\r\n\r\n    return (\r\n      <>\r\n        {this.getTypingUsers(currentChannel.id).length ? (\r\n          <TypingUsersContainer>\r\n            {this.getTypingUsers(currentChannel.id).map((user, index) => (\r\n              <User key={index}>\r\n                <span>{user} </span>\r\n                <Dot style={{ animationDelay: '100ms' }} />\r\n                <Dot style={{ animationDelay: '300ms' }} />\r\n                <Dot style={{ animationDelay: '500ms' }} />\r\n              </User>\r\n            ))}\r\n          </TypingUsersContainer>\r\n        ) : null}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentUser: selectCurrentUser,\r\n  currentChannel: selectCurrentChannel\r\n})\r\n\r\nexport default connect(mapStateToProps)(TypingUsers)\r\n","import React from 'react'\r\nimport { createStructuredSelector } from 'reselect'\r\nimport { connect } from 'react-redux'\r\n\r\nimport {\r\n  MessagesContainer,\r\n  Container,\r\n  TypingContainer,\r\n  EmptyPlaceholder\r\n} from './messages.styles'\r\n\r\nimport Message from '../message/message.component'\r\nimport Spinner from '../spinner/spinner.component'\r\nimport TypingUsers from '../typing-users/typing-users.component'\r\n\r\nimport { updateChannelMembers } from '../../redux/chat/chat.actions'\r\nimport { selectMessageSearchFilters } from '../../redux/chat/chat.selectors'\r\n\r\nimport { firestore } from '../../firebase/firebase.utils'\r\n\r\nclass Messages extends React.Component {\r\n  state = {\r\n    messageListeners: {},\r\n    messages: {},\r\n    loading: true\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { currentChannel, currentUser } = this.props\r\n\r\n    if (currentChannel && currentUser) {\r\n      this.addListeners(currentChannel.id, currentChannel.type)\r\n    }\r\n\r\n    // scroll messages to bottom\r\n    if (this.messagesEnd) {\r\n      this.scrollToBottom()\r\n    }\r\n  }\r\n\r\n  scrollToBottom = () => {\r\n    this.messagesEnd.scrollIntoView()\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.removeListeners()\r\n  }\r\n\r\n  filterMessages = messages => {\r\n    const { filters } = this.props\r\n    const regex = new RegExp(filters.text, 'gi')\r\n\r\n    if (messages) {\r\n      const searchResults = messages.reduce((acc, message) => {\r\n        if (\r\n          message.content &&\r\n          (message.content.match(regex) || message.user.name.match(regex))\r\n        ) {\r\n          acc.push(message)\r\n        } else if (message.image && message.user.name.match(regex)) {\r\n          acc.push(message)\r\n        }\r\n        return acc\r\n      }, [])\r\n\r\n      return searchResults\r\n    }\r\n\r\n    return []\r\n  }\r\n\r\n  addListeners = (channelId, channelType) => {\r\n    const { messageListeners } = this.state\r\n\r\n    if (!messageListeners[channelId]) {\r\n      let messagesRef = null\r\n\r\n      if (channelType === 'direct') {\r\n        // add listener for direct channel\r\n        messagesRef = firestore.collection(`directMessages/${channelId}`)\r\n      } else {\r\n        // add listener for public channel\r\n        messagesRef = firestore\r\n          .collection('channels')\r\n          .doc(channelId)\r\n          .collection('messages')\r\n      }\r\n\r\n      messagesRef = messagesRef.orderBy('timestamp', 'asc')\r\n\r\n      const messageListener = messagesRef.onSnapshot(snapshot => {\r\n        const channelMessages = snapshot.docs.map(message => message.data())\r\n\r\n        this.setState(({ messages }) => ({\r\n          messages: { ...messages, [channelId]: channelMessages },\r\n          loading: false\r\n        }))\r\n      })\r\n\r\n      // adding listener\r\n      this.setState(({ messageListeners }) => ({\r\n        messageListeners: {\r\n          ...messageListeners,\r\n          [channelId]: messageListener\r\n        },\r\n        loading: true\r\n      }))\r\n    } else {\r\n      // already listening\r\n      const { messages } = this.state\r\n      const { updateMembers, currentChannel } = this.props\r\n\r\n      if (currentChannel && messages[currentChannel.id]) {\r\n        updateMembers({\r\n          count: this.countUniqueMembers(messages[currentChannel.id]),\r\n          members: this.getDetailsForMembers(messages[currentChannel.id])\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  removeListeners = () => {\r\n    const { messageListeners } = this.state\r\n    Object.keys(messageListeners).forEach(listener => {\r\n      messageListeners[listener]()\r\n    })\r\n  }\r\n\r\n  displayMessages = (messages = []) => {\r\n    const { currentUser } = this.props\r\n\r\n    return messages.map((message, i) => {\r\n      const ownMessage = currentUser.uid === message.user.id\r\n      return <Message key={i} message={message} ownMessage={ownMessage} />\r\n    })\r\n  }\r\n\r\n  countUniqueMembers = (messages = []) => {\r\n    const uniqueMembers = messages.reduce((acc, message) => {\r\n      if (!acc.includes(message.user.id)) {\r\n        acc.push(message.user.id)\r\n      }\r\n      return acc\r\n    }, [])\r\n\r\n    return uniqueMembers.length\r\n  }\r\n\r\n  getDetailsForMembers = (messages = []) => {\r\n    const members = {}\r\n    console.log(messages)\r\n\r\n    messages.forEach(message => {\r\n      const {\r\n        user: { id, name, avatar }\r\n      } = message\r\n      members[id] = {\r\n        name,\r\n        avatar,\r\n        messagesCount:\r\n          members[id] && members[id]['messagesCount']\r\n            ? members[id]['messagesCount'] + 1\r\n            : 1\r\n      }\r\n    })\r\n\r\n    return Object.keys(members)\r\n      .map(userId => ({\r\n        ...members[userId],\r\n        id: userId\r\n      }))\r\n      .sort((prev, next) => {\r\n        if (prev.messagesCount > next.messagesCount) return -1\r\n        else if (prev.messagesCount < next.messagesCount) return 1\r\n        else return 0\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const { messages, loading } = this.state\r\n    const { currentChannel } = this.props\r\n\r\n    return (\r\n      <MessagesContainer>\r\n        <Container>\r\n          {currentChannel &&\r\n          messages[currentChannel.id] &&\r\n          !loading &&\r\n          !messages[currentChannel.id].length ? (\r\n            <EmptyPlaceholder>\r\n              <span>There are no messages to show here :(</span>\r\n            </EmptyPlaceholder>\r\n          ) : null}\r\n          {currentChannel && !loading ? (\r\n            this.displayMessages(\r\n              this.filterMessages(messages[currentChannel.id])\r\n            )\r\n          ) : (\r\n            <Spinner style={{ backgroundColor: 'transparent' }} />\r\n          )}\r\n          <span ref={node => (this.messagesEnd = node)} />\r\n        </Container>\r\n\r\n        {currentChannel && (\r\n          <TypingContainer>\r\n            <TypingUsers />\r\n          </TypingContainer>\r\n        )}\r\n      </MessagesContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  filters: selectMessageSearchFilters\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  updateMembers: members => dispatch(updateChannelMembers(members))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Messages)\r\n","import styled, { css } from 'styled-components'\r\n\r\nconst opacityAnimation = css`\r\n  @keyframes opacityIn {\r\n    from {\r\n      background-color: transparent;\r\n    }\r\n    to {\r\n      visibility: visible;\r\n      background-color: ${({ theme }) => theme.channels.modal.bg};\r\n    }\r\n  }\r\n\r\n  @keyframes opacityOut {\r\n    from {\r\n      background-color: ${({ theme }) => theme.channels.modal.bg};\r\n      /* at start showing is false so in \r\n      order to avoit flicker issue visibility is set dynamically */\r\n      visibility: ${({ showing }) => (showing ? 'visible' : 'hidden')};\r\n    }\r\n    to {\r\n      visibility: hidden;\r\n      background-color: transparent;\r\n    }\r\n  }\r\n\r\n  animation-name: ${({ showing }) => (showing ? 'opacityIn' : 'opacityOut')};\r\n  animation-duration: 500ms;\r\n  animation-timing-function: ease-in-out;\r\n  animation-fill-mode: forwards;\r\n`\r\n\r\nconst scaleAnimation = css`\r\n  @keyframes scaleIn {\r\n    from {\r\n      opacity: 0;\r\n      transform: scale(0.5);\r\n    }\r\n    to {\r\n      visibility: visible;\r\n      opacity: 1;\r\n      transform: scale(1);\r\n    }\r\n  }\r\n\r\n  @keyframes scaleOut {\r\n    from {\r\n      visibility: ${({ showing }) => (showing ? 'visible' : 'hidden')};\r\n    }\r\n    to {\r\n      visibility: hidden;\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  animation-name: ${({ showing }) => (showing ? 'scaleIn' : 'scaleOut')};\r\n  animation-duration: 500ms;\r\n  animation-timing-function: cubic-bezier(0.19, 0.67, 0.01, 1.3);\r\n  animation-fill-mode: forwards;\r\n`\r\n\r\nexport const FileModalContainer = styled.div`\r\n  width: 100vw;\r\n  height: 100vh;\r\n  top: 0;\r\n  left: 0;\r\n  position: fixed;\r\n  z-index: 10;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  visibility: hidden;\r\n\r\n  ${opacityAnimation}\r\n`\r\n\r\nexport const Modal = styled.form`\r\n  padding: 20px;\r\n  border-radius: 12px;\r\n  visibility: hidden;\r\n  background: ${({ theme }) => theme.channels.modal.modalBg};\r\n  display: grid;\r\n  grid-gap: 16px;\r\n\r\n  ${scaleAnimation}\r\n`\r\n\r\nexport const Heading = styled.h2`\r\n  color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n  font-size: 20px;\r\n  font-family: 'archiasemibold';\r\n`\r\n\r\nexport const Inputs = styled.div`\r\n  display: grid;\r\n  grid-gap: 10px;\r\n`\r\n\r\nexport const Input = styled.div`\r\n  width: 100%;\r\n  display: grid;\r\n  grid-template-columns: auto 80px 0px;\r\n\r\n  label {\r\n    font-family: 'archiasemibold';\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    padding: 6px 12px;\r\n    font-size: 16px;\r\n    height: 100%;\r\n    width: 100%;\r\n    cursor: pointer;\r\n    border-radius: 0px 8px 8px 0px;\r\n    color: ${({ theme }) => theme.channels.modal.textSecondary};\r\n    background-color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n  }\r\n\r\n  span {\r\n    min-width: 160px;\r\n    padding: 8px;\r\n    border: 0px;\r\n    background-color: ${({ theme }) => theme.channels.modal.bg};\r\n    color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n    border-radius: 8px;\r\n    font-family: 'archiaregular';\r\n    font-size: 16px;\r\n  }\r\n\r\n  input {\r\n    width: 0.1px;\r\n    height: 0.1px;\r\n    opacity: 0;\r\n    overflow: hidden;\r\n    position: absolute;\r\n    z-index: -1;\r\n\r\n    &:focus {\r\n      outline: none;\r\n    }\r\n\r\n    &::placeholder {\r\n      color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n    }\r\n  }\r\n`\r\n\r\nexport const Options = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding-top: 10px;\r\n`\r\n\r\nexport const Button = styled.button`\r\n  margin-left: 10px;\r\n  border: 2px solid transparent;\r\n  font-family: 'archiasemibold';\r\n  cursor: pointer;\r\n  outline: none;\r\n  border-radius: 8px;\r\n  padding: 6px;\r\n  min-width: 70px;\r\n  font-size: 15px;\r\n\r\n  &.close {\r\n    color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n    background-color: ${({ theme }) => theme.channels.modal.textSecondary};\r\n    border: 2px solid ${({ theme }) => theme.channels.modal.textPrimary};\r\n  }\r\n\r\n  &.confirm {\r\n    color: ${({ theme }) => theme.channels.modal.textSecondary};\r\n    background-color: ${({ theme }) => theme.channels.modal.textPrimary};\r\n  }\r\n`\r\n","import React from 'react'\r\n\r\nimport {\r\n  FileModalContainer,\r\n  Modal,\r\n  Heading,\r\n  Inputs,\r\n  Input,\r\n  Options,\r\n  Button\r\n} from './file-upload-modal.styles'\r\n\r\nclass FileUploadModal extends React.Component {\r\n  state = {\r\n    file: null\r\n  }\r\n\r\n  handlePropogation = event => {\r\n    event.stopPropagation()\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n    const { file } = this.state\r\n    const { confirm } = this.props\r\n    confirm(file)\r\n  }\r\n\r\n  handleChange = event => {\r\n    const files = event.target.files\r\n    const file = files && files.length ? files[0] : null\r\n    this.setState({\r\n      file\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { file } = this.state\r\n    const { showing, close } = this.props\r\n\r\n    return (\r\n      <FileModalContainer showing={showing} onClick={close}>\r\n        <Modal\r\n          onClick={this.handlePropogation}\r\n          onSubmit={this.handleSubmit}\r\n          showing={showing}\r\n        >\r\n          <Heading>Add a file</Heading>\r\n          <Inputs>\r\n            <Input>\r\n              <span>{file ? file.name : 'select a file'}</span>\r\n              <label htmlFor=\"file\">choose</label>\r\n              <input\r\n                type=\"file\"\r\n                name=\"file\"\r\n                id=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={this.handleChange}\r\n              />\r\n            </Input>\r\n          </Inputs>\r\n          <Options>\r\n            <Button className=\"close\" type=\"button\" onClick={close}>\r\n              CANCEL\r\n            </Button>\r\n            <Button className=\"confirm\" type=\"submit\">\r\n              UPLOAD\r\n            </Button>\r\n          </Options>\r\n        </Modal>\r\n      </FileModalContainer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FileUploadModal\r\n","import styled, { css } from 'styled-components'\r\nimport { Picker } from 'emoji-mart'\r\n\r\nconst iconCSS = css`\r\n  height: 100%;\r\n  width: 60px;\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  border-radius: 14px 0px 0px 14px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 22px;\r\n  opacity: 0.7;\r\n  cursor: pointer;\r\n  transition: ease all 100ms;\r\n  outline: none;\r\n  border: none;\r\n\r\n  &:hover {\r\n    opacity: 1;\r\n  }\r\n`\r\n\r\nexport const Container = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n`\r\n\r\nexport const EmojiPickerContainer = styled.div`\r\n  position: absolute;\r\n  right: 0;\r\n  top: -370px;\r\n\r\n  .emoji-mart-preview {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const MessageInputContainer = styled.form`\r\n  width: 100%;\r\n  height: 60px;\r\n  border-radius: 14px;\r\n  position: relative;\r\n`\r\n\r\nexport const InputField = styled.input`\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 14px;\r\n  padding: 14px 134px 14px 44px;\r\n  background-color: ${({ theme }) => theme.messageInput.bg};\r\n  border: 0px;\r\n  color: ${({ theme }) => theme.messageInput.text};\r\n  font-family: 'archiaregular';\r\n  font-size: 18px;\r\n\r\n  &::placeholder {\r\n    color: ${({ theme }) => theme.messageInput.placeholder};\r\n  }\r\n\r\n  &:focus {\r\n    outline: none;\r\n    box-shadow: 0px 0px 0px 2px ${({ theme }) => theme.messageInput.outline};\r\n  }\r\n`\r\n\r\nexport const AttachIcon = styled.button`\r\n  color: ${({ theme }) => theme.messageInput.attachFg};\r\n  ${iconCSS}\r\n  background: transparent;\r\n  left: 0;\r\n  right: none;\r\n  font-size: 28px;\r\n  width: 40px;\r\n  padding-left: 10px;\r\n\r\n  &:disabled {\r\n    cursor: wait;\r\n  }\r\n`\r\n\r\nexport const EmojiIcon = styled.button`\r\n  background-color: ${({ theme }) => theme.messageInput.emojiBg};\r\n  ${iconCSS}\r\n  right: 60px;\r\n`\r\n\r\nexport const SendIcon = styled.button`\r\n  background-color: ${({ theme }) => theme.messageInput.sendBg};\r\n  color: ${({ theme }) => theme.messageInput.sendFg};\r\n  ${iconCSS}\r\n\r\n  &:disabled {\r\n    cursor: wait;\r\n  }\r\n\r\n  border-radius: 0px 14px 14px 0px;\r\n`\r\n\r\nexport const Spinner = styled.div`\r\n  @keyframes spin {\r\n    from {\r\n      transform: rotate(-45deg);\r\n    }\r\n    to {\r\n      transform: rotate(315deg);\r\n    }\r\n  }\r\n\r\n  width: 22px;\r\n  height: 22px;\r\n  border: 3px solid ${({ theme }) => theme.messageInput.sendFg};\r\n  border-right: 3px solid transparent;\r\n  border-radius: 20px;\r\n  animation: linear spin 1s infinite;\r\n`\r\n\r\nexport const ProgressBar = styled.progress`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  pointer-events: none;\r\n  height: 100%;\r\n  width: 100%;\r\n  -webkit-appearance: none;\r\n  -moz-appearance: none;\r\n  appearance: none;\r\n  opacity: 0.8;\r\n\r\n  &[value]::-webkit-progress-bar {\r\n    background: transparent;\r\n    border-radius: 14px;\r\n  }\r\n\r\n  &[value]::-webkit-progress-value {\r\n    background: ${({ theme }) => theme.messageInput.progress};\r\n    border-radius: 14px;\r\n  }\r\n`\r\n\r\nexport const EmojiPicker = styled(Picker)``\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\nimport { v4 as uuidv4 } from 'uuid'\r\n\r\nimport { MdSend, MdAttachFile } from 'react-icons/md'\r\n\r\nimport FileUploadModal from '../file-upload-modal/file-upload-modal.component'\r\n\r\nimport 'emoji-mart/css/emoji-mart.css'\r\nimport { emojiIndex } from 'emoji-mart'\r\n\r\nimport {\r\n  Container,\r\n  MessageInputContainer,\r\n  InputField,\r\n  AttachIcon,\r\n  EmojiIcon,\r\n  EmojiPicker,\r\n  SendIcon,\r\n  Spinner,\r\n  ProgressBar,\r\n  EmojiPickerContainer\r\n} from './message-input.styles'\r\n\r\nimport firebase, {\r\n  firestore,\r\n  storage,\r\n  database\r\n} from '../../firebase/firebase.utils'\r\n\r\nimport { selectCurrentTheme } from '../../redux/theme/theme.selectors'\r\n\r\nclass MessageInput extends React.Component {\r\n  state = {\r\n    channelsRef: firestore.collection('channels'),\r\n    storageRef: storage.ref(),\r\n    typingRef: database.ref('typing'),\r\n    uploadeState: '',\r\n    uploadTask: null,\r\n    percentUploaded: 0,\r\n    message: '',\r\n    loading: false,\r\n    errors: [],\r\n    modal: false,\r\n    emojiPicker: false\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.uploadTask !== null) {\r\n      this.state.uploadTask.cancel()\r\n      this.setState({\r\n        uploadTask: null\r\n      })\r\n    }\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n    this.sendMessage()\r\n  }\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target\r\n\r\n    this.setState({\r\n      [name]: value\r\n    })\r\n  }\r\n\r\n  sendMessage = () => {\r\n    const { message, loading, typingRef } = this.state\r\n    const { currentUser, currentChannel } = this.props\r\n\r\n    if (!message || loading) return\r\n\r\n    this.setState({ loading: true })\r\n\r\n    const [ref, messageRef] = this.getMessageRef()\r\n\r\n    ref\r\n      .set(this.createMessage({ id: messageRef.id }))\r\n      .then(() => {\r\n        this.setState({ loading: false, message: '' })\r\n        typingRef.child(currentChannel.id).child(currentUser.uid).remove()\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n        this.setState(({ errors }) => ({\r\n          errors: errors.concat(err),\r\n          loading: false\r\n        }))\r\n      })\r\n  }\r\n\r\n  getMessageRef = () => {\r\n    // return message ref according to public or private channel\r\n    const { currentChannel } = this.props\r\n    const { channelsRef } = this.state\r\n\r\n    let ref = null\r\n    let messageRef = null\r\n\r\n    if (currentChannel.type === 'direct') {\r\n      const directMessagesRef = firestore.collection(\r\n        `directMessages/${currentChannel.id}`\r\n      )\r\n      messageRef = directMessagesRef.doc()\r\n      ref = directMessagesRef.doc(messageRef.id)\r\n    } else {\r\n      // getting snapshot id first\r\n      messageRef = channelsRef\r\n        .doc(currentChannel.id)\r\n        .collection('messages')\r\n        .doc()\r\n      // setting ref to public channel\r\n      ref = channelsRef\r\n        .doc(currentChannel.id)\r\n        .collection('messages')\r\n        .doc(messageRef.id)\r\n    }\r\n\r\n    return [ref, messageRef]\r\n  }\r\n\r\n  handleConfirm = file => {\r\n    this.setState({\r\n      modal: false\r\n    })\r\n    this.uploadeFile(file)\r\n    console.log('confirmed', file)\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({\r\n      modal: false\r\n    })\r\n    console.log('closed')\r\n  }\r\n\r\n  createMessage = ({ id, fileUrl }) => {\r\n    const { message } = this.state\r\n    const { currentUser } = this.props\r\n\r\n    const createdMessage = {\r\n      timestamp: firebase.firestore.FieldValue.serverTimestamp(),\r\n      id,\r\n      user: {\r\n        id: currentUser.uid,\r\n        name: currentUser.displayName,\r\n        avatar: currentUser.photoURL\r\n      }\r\n    }\r\n\r\n    if (fileUrl != null) {\r\n      createdMessage['image'] = fileUrl\r\n    } else {\r\n      createdMessage['content'] = message\r\n    }\r\n\r\n    return createdMessage\r\n  }\r\n\r\n  getPath = () => {\r\n    const { currentChannel } = this.props\r\n    if (currentChannel && currentChannel.type === 'direct') {\r\n      return `chat/private/${currentChannel.id}`\r\n    } else {\r\n      return 'chat/public'\r\n    }\r\n  }\r\n\r\n  uploadeFile = file => {\r\n    const { storageRef } = this.state\r\n    const { currentChannel } = this.props\r\n    const pathToUpload = currentChannel.id\r\n    const filePath = `${this.getPath()}/${uuidv4()}.jpg`\r\n\r\n    this.setState(\r\n      {\r\n        uploadState: 'uploading',\r\n        uploadTask: storageRef.child(filePath).put(file)\r\n      },\r\n      () => {\r\n        this.state.uploadTask.on(\r\n          'state_changed',\r\n          snap => {\r\n            const percentUploaded = Math.round(\r\n              (snap.bytesTransferred / snap.totalBytes) * 100\r\n            )\r\n            this.setState({ percentUploaded })\r\n          },\r\n          err => {\r\n            console.error(err)\r\n\r\n            this.setState({\r\n              errors: this.state.errors.concat(err),\r\n              uploadState: 'error',\r\n              uploadTask: null\r\n            })\r\n          },\r\n          () => {\r\n            this.state.uploadTask.snapshot.ref\r\n              .getDownloadURL()\r\n              .then(downloadUrl => {\r\n                this.sendFileMessage(downloadUrl, pathToUpload)\r\n              })\r\n              .catch(err => {\r\n                console.error(err)\r\n                this.setState(({ errors, uploadState, uploadTask }) => ({\r\n                  errors: errors.concat(err),\r\n                  uploadState: 'error',\r\n                  uploadTask: null\r\n                }))\r\n              })\r\n          }\r\n        )\r\n      }\r\n    )\r\n  }\r\n\r\n  sendFileMessage = (fileUrl, pathToUpload) => {\r\n    const [ref, messageRef] = this.getMessageRef()\r\n\r\n    ref\r\n      .set(this.createMessage({ id: messageRef.id, fileUrl }))\r\n      .then(() => {\r\n        this.setState({\r\n          uploadState: 'done'\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n        this.setState(({ errors }) => ({\r\n          errors: errors.concat(err)\r\n        }))\r\n      })\r\n  }\r\n\r\n  handleKeyDown = () => {\r\n    const { message, typingRef } = this.state\r\n    const { currentChannel, currentUser } = this.props\r\n\r\n    if (currentChannel && message.length > 1) {\r\n      typingRef\r\n        .child(currentChannel.id)\r\n        .child(currentUser.uid)\r\n        .set(currentUser.displayName)\r\n    } else if (currentChannel && currentUser) {\r\n      typingRef.child(currentChannel.id).child(currentUser.uid).remove()\r\n    }\r\n  }\r\n\r\n  handleTogglePicker = () => {\r\n    this.setState(({ emojiPicker }) => ({\r\n      emojiPicker: !emojiPicker\r\n    }))\r\n  }\r\n\r\n  colonsToUnicode = message => {\r\n    return message.replace(/:[A-Za-z0-9_+-]+:/g, x => {\r\n      x = x.replace(/:/g, '')\r\n      let emoji = emojiIndex.emojis[x]\r\n      if (typeof emoji !== 'undefined') {\r\n        let unicode = emoji.native\r\n        if (typeof unicode !== 'undefined') {\r\n          return unicode\r\n        }\r\n      }\r\n      x = `:${x}:`\r\n      return x\r\n    })\r\n  }\r\n\r\n  handleAddEmoji = emoji => {\r\n    const { message } = this.state\r\n    const newMessage = this.colonsToUnicode(`${message}${emoji.colons}`)\r\n    this.setState(\r\n      {\r\n        message: newMessage,\r\n        emojiPicker: false\r\n      },\r\n      () => this.messageInputRef.focus()\r\n    )\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      message,\r\n      loading,\r\n      modal,\r\n      percentUploaded,\r\n      uploadState,\r\n      emojiPicker\r\n    } = this.state\r\n    const { currentChannel, theme } = this.props\r\n\r\n    return (\r\n      <Container>\r\n        <EmojiPickerContainer>\r\n          {emojiPicker && (\r\n            <EmojiPicker\r\n              className=\"emojipicker\"\r\n              set=\"twitter\"\r\n              title=\"Pick an emoji\"\r\n              emoji=\"point_up\"\r\n              onSelect={this.handleAddEmoji}\r\n              style={{\r\n                width: '320px'\r\n              }}\r\n              theme={theme.name === 'dark' ? 'dark' : 'light'}\r\n              themeObj={theme}\r\n              color=\"#007BFF\"\r\n            />\r\n          )}\r\n        </EmojiPickerContainer>\r\n        <FileUploadModal\r\n          showing={modal}\r\n          confirm={this.handleConfirm}\r\n          close={this.handleClose}\r\n        />\r\n        <MessageInputContainer onSubmit={this.handleSubmit}>\r\n          {uploadState === 'uploading' ? (\r\n            <ProgressBar type=\"progress\" max=\"100\" value={percentUploaded} />\r\n          ) : null}\r\n          <InputField\r\n            ref={node => (this.messageInputRef = node)}\r\n            required\r\n            type=\"text\"\r\n            name=\"message\"\r\n            onChange={this.handleChange}\r\n            onKeyDown={this.handleKeyDown}\r\n            value={message}\r\n            autocomplete=\"off\"\r\n            placeholder={\r\n              currentChannel && currentChannel.name\r\n                ? `message ${currentChannel.type === 'direct' ? '@' : '#'}${\r\n                    currentChannel.name\r\n                  }`\r\n                : 'message'\r\n            }\r\n          />\r\n          <AttachIcon\r\n            type=\"button\"\r\n            onClick={() => this.setState({ modal: true })}\r\n            disabled={uploadState === 'uploading'}\r\n          >\r\n            {uploadState === 'uploading' ? <Spinner /> : <MdAttachFile />}\r\n          </AttachIcon>\r\n          <EmojiIcon type=\"button\" onClick={this.handleTogglePicker}>\r\n            <span role=\"img\" aria-label=\"smile\">\r\n              \r\n            </span>\r\n          </EmojiIcon>\r\n          <SendIcon type=\"submit\" disabled={loading || !currentChannel}>\r\n            {loading ? <Spinner /> : <MdSend />}\r\n          </SendIcon>\r\n        </MessageInputContainer>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  theme: selectCurrentTheme\r\n})\r\n\r\nexport default connect(mapStateToProps)(MessageInput)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\n\r\nimport { MessagesPanelContainer } from './messages-panel.styles'\r\n\r\nimport ChannelHeader from '../channel-header/channel-header.component'\r\nimport Messages from '../messages/messages.component'\r\nimport MessageInput from '../message-input/message-input.component'\r\n\r\nimport { selectCurrentUser } from '../../redux/user/user.selectors'\r\nimport { selectCurrentChannel } from '../../redux/chat/chat.selectors'\r\n\r\nconst MessagesPanel = ({ currentUser, currentChannel }) => {\r\n  return (\r\n    <MessagesPanelContainer>\r\n      <ChannelHeader\r\n        currentUser={currentUser}\r\n        currentChannel={currentChannel}\r\n      />\r\n      {/* <div style={{ background: 'red' }} /> */}\r\n      <Messages currentUser={currentUser} currentChannel={currentChannel} />\r\n      <MessageInput currentUser={currentUser} currentChannel={currentChannel} />\r\n    </MessagesPanelContainer>\r\n  )\r\n}\r\n\r\nconst mapStatToProps = createStructuredSelector({\r\n  currentUser: selectCurrentUser,\r\n  currentChannel: selectCurrentChannel\r\n})\r\n\r\nexport default connect(mapStatToProps)(MessagesPanel)\r\n","import styled from 'styled-components'\r\n\r\nexport const MetaPanelContainer = styled.div`\r\n  width: 100%;\r\n  max-width: 280px;\r\n  height: 100%;\r\n  padding: 14px 14px 14px 0px;\r\n  transition: ease-in-out transform 200ms;\r\n\r\n  @media only screen and (max-width: 1100px) {\r\n    padding: 0px;\r\n    position: fixed;\r\n    z-index: 10;\r\n    top: 0;\r\n    right: 0;\r\n    width: 280px;\r\n    background-color: ${({ theme }) => theme.meta.bg};\r\n    box-shadow: 0px 0px 10px 5px ${({ theme }) => theme.meta.shadow};\r\n    transform: ${({ metaShowing }) =>\r\n      metaShowing ? 'translateX(0px)' : 'translateX(300px)'};\r\n  }\r\n`\r\n\r\nexport const Meta = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.meta.bg};\r\n  border-radius: 14px;\r\n  padding: 14px 20px;\r\n\r\n  @media only screen and (max-width: 1100px) {\r\n    border-radius: 0px;\r\n  }\r\n\r\n  h2 {\r\n    font-family: 'archiasemibold';\r\n    color: ${({ theme }) => theme.meta.textPrimary};\r\n  }\r\n\r\n  p,\r\n  span {\r\n    font-family: 'archiaregular';\r\n    color: ${({ theme }) => theme.meta.textSecondary};\r\n    font-size: 16px;\r\n  }\r\n`\r\n\r\nexport const CloseMeta = styled.div`\r\n  color: ${({ theme }) => theme.meta.closeButton.text};\r\n  background-color: ${({ theme }) => theme.meta.closeButton.bg};\r\n  font-family: 'archiabold';\r\n  padding: 8px;\r\n  border-radius: 14px;\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 14px 14px 0px 14px;\r\n\r\n  span {\r\n    margin-left: 8px;\r\n  }\r\n\r\n  cursor: pointer;\r\n\r\n  @media only screen and (min-width: 1100px) {\r\n    display: none;\r\n  }\r\n`\r\n\r\nexport const About = styled.div`\r\n  margin-bottom: 14px;\r\n\r\n  h2 {\r\n    font-size: 22px;\r\n  }\r\n`\r\n\r\nexport const CreatedBy = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 4px;\r\n\r\n  h2 {\r\n    font-size: 18px;\r\n    margin-right: 6px;\r\n  }\r\n`\r\n\r\nexport const CreatedOn = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 22px;\r\n\r\n  h2 {\r\n    font-size: 18px;\r\n    margin-right: 6px;\r\n  }\r\n`\r\n\r\nexport const ActiveMembers = styled.ul`\r\n  h2 {\r\n    font-size: 22px;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  > :last-child {\r\n    margin-bottom: 0px;\r\n  }\r\n`\r\n\r\nexport const Member = styled.li`\r\n  display: grid;\r\n  grid-template-columns: 45px auto;\r\n  grid-gap: 8px;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n\r\n  h2 {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  img {\r\n    height: 45px;\r\n    width: 45px;\r\n    border-radius: 30px;\r\n  }\r\n`\r\n\r\nexport const Info = styled.div`\r\n  h2 {\r\n    font-size: 17px;\r\n  }\r\n\r\n  span {\r\n    font-size: 14px;\r\n  }\r\n`\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\n\r\nimport moment from 'moment'\r\n\r\nimport {\r\n  selectCurrentChannel,\r\n  selectChannelMembers,\r\n  selectIsPrivateChannel,\r\n  selectMetaShowing\r\n} from '../../redux/chat/chat.selectors'\r\n\r\nimport { toggleMeta } from '../../redux/chat/chat.actions'\r\n\r\nimport {\r\n  MetaPanelContainer,\r\n  Meta,\r\n  About,\r\n  CreatedBy,\r\n  CreatedOn,\r\n  ActiveMembers,\r\n  Member,\r\n  Info,\r\n  CloseMeta\r\n} from './meta-panel.styles'\r\n\r\nimport { FaArrowRight } from 'react-icons/fa'\r\n\r\nconst formatTime = timestamp =>\r\n  moment(timestamp.toDate()).format('Do MMM, YYYY')\r\n\r\nconst MetaPanel = ({\r\n  currentChannel,\r\n  channelMembers,\r\n  isPrivateChannel,\r\n  metaShowing,\r\n  toggleMeta\r\n}) => {\r\n  return (\r\n    <MetaPanelContainer metaShowing={metaShowing}>\r\n      <CloseMeta onClick={() => toggleMeta(false)}>\r\n        <FaArrowRight />\r\n        <span>CLOSE</span>\r\n      </CloseMeta>\r\n      <Meta>\r\n        {currentChannel && !isPrivateChannel ? (\r\n          <>\r\n            <About>\r\n              <h2>About #{currentChannel.name}</h2>\r\n              <p>{currentChannel.details}</p>\r\n            </About>\r\n            <CreatedBy>\r\n              <h2>created by</h2>\r\n              <span>@{currentChannel.createdBy.name}</span>\r\n            </CreatedBy>\r\n            <CreatedOn>\r\n              <h2>created on</h2>\r\n              <span>{formatTime(currentChannel.createdAt)}</span>\r\n            </CreatedOn>\r\n          </>\r\n        ) : null}\r\n\r\n        {channelMembers &&\r\n        !isPrivateChannel &&\r\n        channelMembers.members.length ? (\r\n          <ActiveMembers>\r\n            <h2>Active Members</h2>\r\n            {channelMembers.members.map(\r\n              ({ name, avatar, messagesCount }, index) => (\r\n                <Member key={index}>\r\n                  <img src={avatar} alt=\"avatar\" />\r\n                  <Info>\r\n                    <h2>{name}</h2>\r\n                    <span>\r\n                      {messagesCount}{' '}\r\n                      {messagesCount > 1 ? 'messages' : 'message'}{' '}\r\n                    </span>\r\n                  </Info>\r\n                </Member>\r\n              )\r\n            )}\r\n          </ActiveMembers>\r\n        ) : null}\r\n      </Meta>\r\n    </MetaPanelContainer>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentChannel: selectCurrentChannel,\r\n  channelMembers: selectChannelMembers,\r\n  isPrivateChannel: selectIsPrivateChannel,\r\n  metaShowing: selectMetaShowing\r\n})\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  toggleMeta: boolean => dispatch(toggleMeta(boolean))\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MetaPanel)\r\n","import React from 'react'\n\nimport { AppContainer } from './app.styles'\n\nimport SidePanel from '../../components/side-panel/side-panel.component'\nimport MessagesPanel from '../../components/messages-panel/messages-panel.component'\nimport MetaPanel from '../../components/meta-panel/meta-panel.component'\n\nconst App = () => {\n  return (\n    <AppContainer>\n      <SidePanel />\n      <MessagesPanel />\n      <MetaPanel />\n    </AppContainer>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { createStructuredSelector } from 'reselect'\r\nimport { ThemeProvider } from 'styled-components'\r\nimport { selectCurrentTheme } from '../../redux/theme/theme.selectors'\r\n\r\nconst CustomThemeProvider = ({ children, currentTheme, ...props }) => (\r\n  <ThemeProvider theme={currentTheme} {...props}>\r\n    {children}\r\n  </ThemeProvider>\r\n)\r\n\r\nconst mapStateToProps = createStructuredSelector({\r\n  currentTheme: selectCurrentTheme\r\n})\r\n\r\nexport default connect(mapStateToProps)(CustomThemeProvider)\r\n","import styled from 'styled-components'\r\n\r\nexport const RegisterPageContainer = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.bg};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 20px;\r\n`\r\n\r\nexport const RegisterFormContainer = styled.div`\r\n  display: grid;\r\n  grid-gap: 20px;\r\n  justify-content: center;\r\n  justify-items: center;\r\n  align-items: center;\r\n  max-width: 450px;\r\n`\r\n\r\nexport const Heading = styled.h1`\r\n  font-family: 'archiasemibold';\r\n  color: ${({ theme }) => theme.form.headingText};\r\n  padding-left: 6px;\r\n  width: 340px;\r\n`\r\n\r\nexport const RegisterForm = styled.form`\r\n  background-color: ${({ theme }) => theme.form.bg};\r\n  padding: 22px;\r\n  border-radius: 20px;\r\n  box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.1);\r\n  display: grid;\r\n  grid-gap: 14px;\r\n  width: 340px;\r\n\r\n  button {\r\n    margin-top: 16px;\r\n  }\r\n`\r\nexport const LoginMessageContainer = styled.div`\r\n  font-family: 'archiasemibold';\r\n  display: flex;\r\n  justify-content: center;\r\n  div {\r\n    color: ${({ theme }) => theme.text};\r\n    span {\r\n      margin-right: 2px;\r\n    }\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport const Button = styled.button`\r\n  border: 0px;\r\n  background-color: ${({ theme, disabled }) =>\r\n    disabled ? theme.button.bgDisabled : theme.button.bg};\r\n  color: ${({ theme }) => theme.button.text};\r\n  padding: 6px;\r\n  font-family: 'archiasemibold';\r\n  font-size: ${({ fontSize }) => fontSize};\r\n  width: 100%;\r\n  height: ${({ height }) => (height ? height : '28px')};\r\n  padding: ${({ padding }) => padding};\r\n  cursor: pointer;\r\n  border-radius: 9999px;\r\n  border: 3px solid transparent;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n\r\n  /* &:hover {\r\n    border: 2px solid ${({ theme }) => theme.button.bg};\r\n    background-color: ${({ theme }) => theme.button.text};\r\n    color: ${({ theme }) => theme.button.bg};\r\n  } */\r\n\r\n  &:focus {\r\n    outline: none;\r\n    border: 3px dashed ${({ theme }) => theme.button.text};\r\n  }\r\n`\r\nexport const Spinner = styled.div`\r\n  @keyframes spin {\r\n    from {\r\n      transform: rotate(-45deg);\r\n    }\r\n    to {\r\n      transform: rotate(315deg);\r\n    }\r\n  }\r\n\r\n  width: 28px;\r\n  height: 28px;\r\n  border: 4px solid ${({ theme }) => theme.button.bg};\r\n  border-right: 4px solid transparent;\r\n  border-radius: 20px;\r\n  animation: linear spin 1s infinite;\r\n`\r\n","import React from 'react'\r\nimport { Button, Spinner } from './custom-button.styles'\r\n\r\nconst CustomButton = ({ children, loading, ...props }) => {\r\n  return <Button {...props}>{loading ? <Spinner /> : children}</Button>\r\n}\r\n\r\nexport default CustomButton\r\n","import styled, { css } from 'styled-components'\r\n\r\nconst errorStyles = css`\r\n  box-shadow: 0px 0px 0px 3px ${({ theme }) => theme.form.error.placeholder};\r\n  background-color: ${({ theme }) => theme.form.error.bg};\r\n  color: ${({ theme }) => theme.form.error.text};\r\n\r\n  &::placeholder {\r\n    color: ${({ theme }) => theme.form.error.placeholder};\r\n  }\r\n`\r\n\r\nexport const InputContainer = styled.div`\r\n  width: 100%;\r\n  position: relative;\r\n`\r\n\r\nexport const Input = styled.input`\r\n  background-color: ${({ theme }) => theme.form.field.bg};\r\n  border-radius: 16px;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 0px;\r\n  font-family: 'archiasemibold';\r\n  font-size: ${({ fontSize }) => fontSize || '18px'};\r\n  color: ${({ theme }) => theme.form.field.text};\r\n  padding: 14px 20px;\r\n  padding-left: ${({ Icon }) => (Icon ? '56px' : '20px')};\r\n\r\n  &::placeholder {\r\n    color: ${({ theme }) => theme.form.field.placeholder};\r\n  }\r\n\r\n  &:focus {\r\n    outline: none;\r\n    box-shadow: 0px 0px 0px 3px\r\n      ${({ theme, error }) =>\r\n        error ? theme.form.error.text : theme.form.field.focusBorder};\r\n  }\r\n\r\n  ${({ error }) => (error ? errorStyles : '')}\r\n\r\n  /* Change Autocomplete styles in Chrome*/\r\n  &:-webkit-autofill,\r\n  &:-webkit-autofill:hover, \r\n  &:-webkit-autofill:focus {\r\n    -webkit-text-fill-color: ${({ theme }) => theme.form.field.text};\r\n  }\r\n`\r\n\r\nexport const InputIconContainer = styled.span`\r\n  height: 100%;\r\n  position: absolute;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 0px 18px;\r\n`\r\n","import React from 'react'\r\nimport { useTheme } from 'styled-components'\r\n\r\nimport {\r\n  Input,\r\n  InputContainer,\r\n  InputIconContainer\r\n} from './custom-input.styles'\r\n\r\nconst CustomInput = ({ iconSize, Icon, error, ...props }) => {\r\n  const theme = useTheme()\r\n\r\n  return (\r\n    <InputContainer>\r\n      <InputIconContainer>\r\n        {Icon ? (\r\n          <Icon\r\n            color={error ? theme.form.error.placeholder : theme.form.field.icon}\r\n            size={iconSize || 24}\r\n          />\r\n        ) : (\r\n          ''\r\n        )}\r\n      </InputIconContainer>\r\n      <Input {...props} error={error} Icon={Icon} />\r\n    </InputContainer>\r\n  )\r\n}\r\n\r\nexport default CustomInput\r\n","import styled from 'styled-components'\r\n\r\nexport const FormErrorContainer = styled.div`\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.form.error.bg};\r\n  color: ${({ theme }) => theme.form.error.text};\r\n  font-family: 'archiasemibold';\r\n  border-radius: 16px;\r\n  padding: 20px;\r\n  text-align: center;\r\n`\r\n\r\nexport const Heading = styled.h2`\r\n  font-size: 22px;\r\n`\r\n\r\nexport const Error = styled.p`\r\n  font-family: 'archiaregular';\r\n  font-size: 16px;\r\n  margin-top: 4px;\r\n`\r\n","import React from 'react'\r\n\r\nimport { FormErrorContainer, Heading, Error } from './form.error.styles'\r\n\r\nconst FormError = ({ errors = [{ message: 'some error occured' }] }) => {\r\n  return (\r\n    <FormErrorContainer>\r\n      <Heading>Error</Heading>\r\n      {errors.map((error, i) => (\r\n        <Error key={i}>{error.message}</Error>\r\n      ))}\r\n    </FormErrorContainer>\r\n  )\r\n}\r\n\r\nexport default FormError\r\n","import styled from 'styled-components'\r\nimport { Link as RouterLink } from 'react-router-dom'\r\n\r\nexport const Link = styled(RouterLink)`\r\n  color: ${({ theme }) => theme.link.text};\r\n  text-decoration: none;\r\n\r\n  &:hover {\r\n    background-color: ${({ theme }) => theme.link.bg};\r\n  }\r\n\r\n  &:visited {\r\n    color: ${({ theme }) => theme.link.text};\r\n  }\r\n`\r\n","import React from 'react'\r\nimport { Link } from './custom-link.styles'\r\n\r\nconst CustomLink = ({ children, ...props }) => {\r\n  return <Link {...props}>{children}</Link>\r\n}\r\n\r\nexport default CustomLink\r\n","const blobFromBase64String = base64String => {\r\n  const byteArray = Uint8Array.from(\r\n    atob(base64String)\r\n      .split('')\r\n      .map(char => char.charCodeAt(0))\r\n  )\r\n  return new Blob([byteArray], { type: 'image/jpg' })\r\n}\r\n\r\nconst avatarB64 =\r\n  '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Q2xicmJvb2wAAAAAAFJnc01ib29sAAAAAABDcm5DYm9vbAAAAAAAQ250Q2Jvb2wAAAAAAExibHNib29sAAAAAABOZ3R2Ym9vbAAAAAAARW1sRGJvb2wAAAAAAEludHJib29sAAAAAABCY2tnT2JqYwAAAAEAAAAAAABSR0JDAAAAAwAAAABSZCAgZG91YkBv4AAAAAAAAAAAAEdybiBkb3ViQG/gAAAAAAAAAAAAQmwgIGRvdWJAb+AAAAAAAAAAAABCcmRUVW50RiNSbHQAAAAAAAAAAAAAAABCbGQgVW50RiNSbHQAAAAAAAAAAAAAAABSc2x0VW50RiNQeGxAUgAAAAAAAAAAAAp2ZWN0b3JEYXRhYm9vbAEAAAAAUGdQc2VudW0AAAAAUGdQcwAAAABQZ1BDAAAAAExlZnRVbnRGI1JsdAAAAAAAAAAAAAAAAFRvcCBVbnRGI1JsdAAAAAAAAAAAAAAAAFNjbCBVbnRGI1ByY0BZAAAAAAAAAAAAEGNyb3BXaGVuUHJpbnRpbmdib29sAAAAAA5jcm9wUmVjdEJvdHRvbWxvbmcAAAAAAAAADGNyb3BSZWN0TGVmdGxvbmcAAAAAAAAADWNyb3BSZWN0UmlnaHRsb25nAAAAAAAAAAtjcm9wUmVjdFRvcGxvbmcAAAAAADhCSU0D7QAAAAAAEABIAAAAAQABAEgAAAABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0EDQAAAAAABAAAAFo4QklNBBkAAAAAAAQAAAAeOEJJTQPzAAAAAAAJAAAAAAAAAAABADhCSU0nEAAAAAAACgABAAAAAAAAAAE4QklNA/UAAAAAAEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEAMgAAAAEAWgAAAAYAAAAAAAEANQAAAAEALQAAAAYAAAAAAAE4QklNA/gAAAAAAHAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAOEJJTQQAAAAAAAACAAI4QklNBAIAAAAAAAgAAAAAAAAAADhCSU0EMAAAAAAABAEBAQE4QklNBC0A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czpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMC0wNC0xNlQwOTo0MDoxNyswNTozMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMC0wNC0xNlQwOTo0MDoxNyswNTozMCIgeG1wOk1vZGlmeURhdGU9IjIwMjAtMDQtMTZUMDk6NDA6MTcrMDU6MzAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODdjMzMyNzEtOTA0OS1kZjRiLTljNjAtMjMzY2NmYTAxOTgzIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MmRmYzc3YjUtN2Y5OC0xMWVhLTg0YTUtYWUwN2I5N2I2N2QyIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6NmI0MzQwNmMtMzQ5Zi03MzQ0LTgxZTItY2M0MTlhMzM3MzY2IiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjZiNDM0MDZjLTM0OWYtNzM0NC04MWUyLWNjNDE5YTMzNzM2NiIgc3RFdnQ6d2hlbj0iMjAyMC0wNC0xNlQwOTo0MDoxNyswNTozMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo4N2MzMzI3MS05MDQ5LWRmNGItOWM2MC0yMzNjY2ZhMDE5ODMiIHN0RXZ0OndoZW49IjIwMjAtMDQtMTZUMDk6NDA6MTcrMDU6MzAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE3IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/uAA5BZG9iZQBkQAAAAAH/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwMBAQEBAQEBAQEBAQICAQICAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA//AABEIAHgAeAMBEQACEQEDEQH/3QAEAA//xAGiAAAABgIDAQAAAAAAAAAAAAAHCAYFBAkDCgIBAAsBAAAGAwEBAQAAAAAAAAAAAAYFBAMHAggBCQAKCxAAAgEDBAEDAwIDAwMCBgl1AQIDBBEFEgYhBxMiAAgxFEEyIxUJUUIWYSQzF1JxgRhikSVDobHwJjRyChnB0TUn4VM2gvGSokRUc0VGN0djKFVWVxqywtLi8mSDdJOEZaOzw9PjKThm83UqOTpISUpYWVpnaGlqdnd4eXqFhoeIiYqUlZaXmJmapKWmp6ipqrS1tre4ubrExcbHyMnK1NXW19jZ2uTl5ufo6er09fb3+Pn6EQACAQMCBAQDBQQEBAYGBW0BAgMRBCESBTEGACITQVEHMmEUcQhCgSORFVKhYhYzCbEkwdFDcvAX4YI0JZJTGGNE8aKyJjUZVDZFZCcKc4OTRnTC0uLyVWV1VjeEhaOzw9Pj8ykalKS0xNTk9JWltcXV5fUoR1dmOHaGlqa2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'\r\n\r\nexport default blobFromBase64String(avatarB64)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { auth, firestore, storage } from '../../firebase/firebase.utils'\r\n\r\nimport {\r\n  RegisterPageContainer,\r\n  RegisterFormContainer,\r\n  RegisterForm,\r\n  Heading,\r\n  LoginMessageContainer\r\n} from './register.styles'\r\n\r\nimport CustomButton from '../../components/custom-button/custom-button.component'\r\nimport CustomInput from '../../components/custom-input/custom-input.component'\r\nimport FormError from '../../components/form-error/form-error.component'\r\nimport CustomLink from '../../components/custom-link/custom-link.component'\r\n\r\nimport { FaUserAlt, FaLock } from 'react-icons/fa'\r\nimport { MdEmail } from 'react-icons/md'\r\n\r\nimport { setCurrentUser } from '../../redux/user/user.actions'\r\n\r\nimport avatarBlob from '../../resources/images/avatar.blob'\r\n\r\nclass RegisterPage extends React.Component {\r\n  state = {\r\n    username: '',\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    errors: [],\r\n    loading: false,\r\n    usersRef: firestore.collection('users')\r\n  }\r\n\r\n  isFormValid = () => {\r\n    const errors = []\r\n    let error\r\n\r\n    if (this.isFormEmpty(this.state)) {\r\n      error = { message: 'Fill in all fields.' }\r\n      this.setState({ errors: errors.concat(error) })\r\n    } else if (!this.isPasswordValid(this.state)) {\r\n      error = { message: 'Password is invalid.' }\r\n      this.setState({ errors: errors.concat(error) })\r\n    } else {\r\n      return true\r\n    }\r\n  }\r\n\r\n  isFormEmpty = ({ username, email, password, confirmPassword }) => {\r\n    return (\r\n      !username.length ||\r\n      !email.length ||\r\n      !password.length ||\r\n      !confirmPassword.length\r\n    )\r\n  }\r\n\r\n  isPasswordValid = ({ password, confirmPassword }) => {\r\n    if (password.length < 6 || confirmPassword.length < 6) return false\r\n    else if (password !== confirmPassword) return false\r\n    else return true\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n\r\n    const { username, email, password, loading } = this.state\r\n    const { setCurrentUser } = this.props\r\n\r\n    if (!this.isFormValid() || loading) return\r\n\r\n    this.setState({ errors: [], loading: true })\r\n\r\n    auth\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then(async createdUser => {\r\n        console.log(createdUser)\r\n\r\n        let avatarURL = null\r\n\r\n        try {\r\n          avatarURL = await this.getAvatarUrl({\r\n            email,\r\n            uid: createdUser.user.uid\r\n          })\r\n        } catch (err) {\r\n          console.error(err)\r\n        }\r\n\r\n        createdUser.user\r\n          .updateProfile({\r\n            displayName: username,\r\n            photoURL: avatarURL\r\n          })\r\n          .then(() => {\r\n            this.saveUser(createdUser).then(() => {\r\n              setCurrentUser({ ...createdUser.user })\r\n              console.log('user saved')\r\n              // register success\r\n            })\r\n          })\r\n          .catch(err => {\r\n            console.error(err)\r\n            this.setState(({ errors }) => ({\r\n              errors: errors.concat(err)\r\n            }))\r\n          })\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n        this.setState(({ errors }) => ({\r\n          errors: errors.concat(err)\r\n        }))\r\n      })\r\n      .finally(() => {\r\n        this.setState({ loading: false })\r\n      })\r\n  }\r\n\r\n  saveUser = createdUser => {\r\n    const { usersRef } = this.state\r\n    const { uid, displayName, photoURL } = createdUser.user\r\n    return usersRef.doc(uid).set({\r\n      name: displayName,\r\n      avatar: photoURL\r\n    })\r\n  }\r\n\r\n  handleChange = event => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  handleInputError(errors, inputName) {\r\n    return errors.some(error => error.message.toLowerCase().includes(inputName))\r\n  }\r\n\r\n  getAvatarUrl = ({ uid }) => {\r\n    return new Promise((resolve, reject) => {\r\n      storage\r\n        .ref()\r\n        .child(`avatars/users/${uid}`)\r\n        .put(avatarBlob, { contentType: 'image/jpeg' })\r\n        .then(snapshot => {\r\n          snapshot.ref.getDownloadURL().then(url => resolve(url))\r\n        })\r\n        .catch(err => {\r\n          console.error(err)\r\n          reject(err)\r\n        })\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      username,\r\n      email,\r\n      password,\r\n      confirmPassword,\r\n      errors,\r\n      loading\r\n    } = this.state\r\n\r\n    return (\r\n      <RegisterPageContainer>\r\n        <RegisterFormContainer>\r\n          <Heading>Register</Heading>\r\n          <RegisterForm onSubmit={this.handleSubmit}>\r\n            <CustomInput\r\n              Icon={FaUserAlt}\r\n              name=\"username\"\r\n              placeholder=\"Username\"\r\n              onChange={this.handleChange}\r\n              value={username}\r\n            />\r\n            <CustomInput\r\n              Icon={MdEmail}\r\n              type=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Email\"\r\n              onChange={this.handleChange}\r\n              value={email}\r\n              error={this.handleInputError(errors, 'email')}\r\n            />\r\n            <CustomInput\r\n              Icon={FaLock}\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Password\"\r\n              onChange={this.handleChange}\r\n              value={password}\r\n              error={this.handleInputError(errors, 'password')}\r\n            />\r\n            <CustomInput\r\n              Icon={FaLock}\r\n              type=\"password\"\r\n              name=\"confirmPassword\"\r\n              placeholder=\"Confirm Password\"\r\n              onChange={this.handleChange}\r\n              value={confirmPassword}\r\n              error={this.handleInputError(errors, 'password')}\r\n            />\r\n            <CustomButton\r\n              disabled={loading}\r\n              loading={loading}\r\n              height=\"50px\"\r\n              type=\"submit\"\r\n              fontSize=\"18px\"\r\n            >\r\n              Submit\r\n            </CustomButton>\r\n          </RegisterForm>\r\n          {errors.length ? <FormError errors={errors} /> : null}\r\n          <LoginMessageContainer>\r\n            <div>\r\n              <span>Already a user?</span>\r\n              <CustomLink to=\"/login\">&nbsp;Login&nbsp;</CustomLink>\r\n            </div>\r\n          </LoginMessageContainer>\r\n        </RegisterFormContainer>\r\n      </RegisterPageContainer>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  setCurrentUser: user => dispatch(setCurrentUser(user))\r\n})\r\n\r\nexport default connect(null, mapDispatchToProps)(RegisterPage)\r\n","import styled from 'styled-components'\r\n\r\nexport const LoginPageContainer = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  background-color: ${({ theme }) => theme.bg};\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 20px;\r\n`\r\n\r\nexport const LoginFormContainer = styled.div`\r\n  display: grid;\r\n  grid-gap: 20px;\r\n  justify-content: center;\r\n  justify-items: center;\r\n  align-items: center;\r\n  max-width: 450px;\r\n`\r\n\r\nexport const Heading = styled.h1`\r\n  font-family: 'archiasemibold';\r\n  color: ${({ theme }) => theme.form.headingText};\r\n  padding-left: 6px;\r\n  width: 340px;\r\n`\r\n\r\nexport const LoginForm = styled.form`\r\n  background-color: ${({ theme }) => theme.form.bg};\r\n  padding: 22px;\r\n  border-radius: 20px;\r\n  box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.1);\r\n  display: grid;\r\n  grid-gap: 14px;\r\n  width: 340px;\r\n\r\n  button {\r\n    margin-top: 16px;\r\n  }\r\n`\r\nexport const RegisterMessageContainer = styled.div`\r\n  font-family: 'archiasemibold';\r\n  display: flex;\r\n  justify-content: center;\r\n  div {\r\n    color: ${({ theme }) => theme.text};\r\n    span {\r\n      margin-right: 2px;\r\n    }\r\n  }\r\n`\r\n","import React from 'react'\r\nimport { auth } from '../../firebase/firebase.utils'\r\n\r\nimport {\r\n  LoginPageContainer,\r\n  LoginFormContainer,\r\n  LoginForm,\r\n  Heading,\r\n  RegisterMessageContainer\r\n} from './login.styles'\r\n\r\nimport CustomButton from '../../components/custom-button/custom-button.component'\r\nimport CustomInput from '../../components/custom-input/custom-input.component'\r\nimport FormError from '../../components/form-error/form-error.component'\r\nimport CustomLink from '../../components/custom-link/custom-link.component'\r\n\r\nimport { FaLock } from 'react-icons/fa'\r\nimport { MdEmail } from 'react-icons/md'\r\n\r\nclass LoginPage extends React.Component {\r\n  state = {\r\n    email: '',\r\n    password: '',\r\n    errors: [],\r\n    loading: false\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n    if (!this.isFormValid(this.state)) return\r\n\r\n    this.setState({ errors: [], loading: true })\r\n\r\n    const { email, password } = this.state\r\n\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(signedInUser => {\r\n        console.log(signedInUser)\r\n        // login success\r\n      })\r\n      .catch(err => {\r\n        console.error(err)\r\n        this.setState(({ errors }) => ({\r\n          errors: errors.concat(err),\r\n          loading: false\r\n        }))\r\n      })\r\n  }\r\n\r\n  isFormValid = ({ email, password }) => email && password\r\n\r\n  handleChange = event => {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  handleInputError(errors, inputName) {\r\n    return errors.some(error => error.message.toLowerCase().includes(inputName))\r\n  }\r\n\r\n  render() {\r\n    const { email, password, errors, loading } = this.state\r\n\r\n    return (\r\n      <LoginPageContainer>\r\n        <LoginFormContainer>\r\n          <Heading>Login</Heading>\r\n          <LoginForm onSubmit={this.handleSubmit}>\r\n            <CustomInput\r\n              Icon={MdEmail}\r\n              type=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"Email\"\r\n              onChange={this.handleChange}\r\n              value={email}\r\n              error={this.handleInputError(errors, 'email')}\r\n            />\r\n            <CustomInput\r\n              Icon={FaLock}\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Password\"\r\n              onChange={this.handleChange}\r\n              value={password}\r\n              error={this.handleInputError(errors, 'password')}\r\n            />\r\n            <CustomButton\r\n              disabled={loading}\r\n              loading={loading}\r\n              height=\"50px\"\r\n              type=\"submit\"\r\n              fontSize=\"18px\"\r\n            >\r\n              Submit\r\n            </CustomButton>\r\n          </LoginForm>\r\n\r\n          {errors.length ? <FormError errors={errors} /> : null}\r\n\r\n          <RegisterMessageContainer>\r\n            <div>\r\n              <span>Don't have an account?</span>\r\n              <CustomLink to=\"/register\">&nbsp;Register&nbsp;</CustomLink>\r\n            </div>\r\n          </RegisterMessageContainer>\r\n        </LoginFormContainer>\r\n      </LoginPageContainer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default LoginPage\r\n","//--COLORS--//\r\n\r\nexport const colors = {\r\n  red: '#FF073A',\r\n  littleLightRed: 'rgba(255, 7, 58, 0.5)',\r\n  lightRed: 'rgba(255, 7, 58, 0.12)',\r\n  green: '#28A745',\r\n  pastelGreen: '#41F56A',\r\n  lightGreen: 'rgba(40, 167, 69, 0.12)',\r\n  blue: '#007BFF',\r\n  lightBlue: 'rgba(0, 122, 255, 0.12)',\r\n  gray: '#6C757D',\r\n  littleLightGray: 'rgba(108, 117, 125, 0.5)',\r\n  littleLighterGray: 'rgba(108, 117, 125, 0.25)',\r\n  lightGray: 'rgba(108, 117, 125, 0.12)',\r\n  veryLightGray: 'rgba(108, 117, 125, 0.06)',\r\n  black: '#3E3E3E',\r\n  littleDarkerBlack: '#1E1E1E',\r\n  darkerBlack: '#141414',\r\n  white: '#FFFFFF',\r\n  lightWhite: 'rgba(255, 255, 255, 0.6)',\r\n  veryLightWhite: 'rgba(255, 255, 255, 0.2)',\r\n  lightest: '#F9F9FB',\r\n  yellow: '#FFC400',\r\n  lightYellow: 'rgba(255, 196, 0, 0.12)'\r\n}\r\n\r\n//--THEMES--//\r\n\r\n//--LIGHT--//\r\nexport const light = {\r\n  name: 'light',\r\n  bg: colors.lightest,\r\n  text: colors.gray,\r\n  scrollbar: {\r\n    bg: colors.lightGray,\r\n    fg: colors.littleLighterGray,\r\n    fgHover: colors.littleLightGray\r\n  },\r\n  sidePanel: {\r\n    bg: colors.white,\r\n    shadow: colors.lightBlue,\r\n    closeButton: {\r\n      bg: colors.lightBlue,\r\n      text: colors.blue\r\n    }\r\n  },\r\n  message: {\r\n    textPrimary: colors.black,\r\n    textSecondary: colors.littleLightGray\r\n  },\r\n  messages: {\r\n    bg: colors.white,\r\n    placeholder: colors.littleLightGray\r\n  },\r\n  typingUsers: {\r\n    itemBg: colors.veryLightGray,\r\n    dot: colors.gray,\r\n    text: colors.gray\r\n  },\r\n  messageInput: {\r\n    bg: colors.white,\r\n    attachFg: colors.gray,\r\n    emojiBg: colors.lightYellow,\r\n    sendBg: colors.lightBlue,\r\n    sendFg: colors.blue,\r\n    placeholder: colors.gray,\r\n    text: colors.black,\r\n    outline: colors.blue,\r\n    errorBg: colors.lightRed,\r\n    progress: colors.lightGreen\r\n  },\r\n  channelHeader: {\r\n    bg: colors.white,\r\n    text: colors.black,\r\n    starIcon: colors.yellow,\r\n    sidebarIcon: colors.blue,\r\n    infoIcon: colors.blue,\r\n    search: {\r\n      text: colors.gray,\r\n      placeholder: colors.littleLightGray,\r\n      bg: colors.lightGray\r\n    },\r\n    status: {\r\n      online: colors.green,\r\n      offline: colors.red,\r\n      away: colors.yellow\r\n    }\r\n  },\r\n  userStatusCard: {\r\n    bg: colors.blue,\r\n    text: colors.white,\r\n    subText: colors.lightest,\r\n    icon: colors.lightest,\r\n    optionBg: colors.veryLightWhite,\r\n    statusColors: {\r\n      online: colors.pastelGreen,\r\n      offline: colors.red,\r\n      away: colors.yellow\r\n    },\r\n    modal: {\r\n      bg: colors.lightBlue,\r\n      modalBg: colors.white,\r\n      textPrimary: colors.blue,\r\n      textSecondary: colors.white,\r\n      buttonPrimary: colors.blue,\r\n      buttonSeconday: colors.white\r\n    }\r\n  },\r\n  starred: {\r\n    bg: colors.lightYellow,\r\n    text: colors.yellow,\r\n    hover: colors.lightYellow,\r\n    icon: colors.yellow\r\n  },\r\n  channels: {\r\n    bg: colors.lightBlue,\r\n    text: colors.blue,\r\n    hover: colors.lightBlue,\r\n    icon: colors.blue,\r\n    modal: {\r\n      bg: colors.lightBlue,\r\n      modalBg: colors.white,\r\n      textPrimary: colors.blue,\r\n      textSecondary: colors.white,\r\n      buttonPrimary: colors.blue,\r\n      buttonSeconday: colors.white\r\n    },\r\n    notificationsBg: colors.white,\r\n    notificationsFg: colors.blue\r\n  },\r\n  directMessages: {\r\n    bg: colors.lightBlue,\r\n    text: colors.blue,\r\n    hover: colors.lightBlue,\r\n    icon: colors.blue,\r\n    status: {\r\n      online: colors.green,\r\n      offline: colors.red,\r\n      away: colors.yellow\r\n    }\r\n  },\r\n  meta: {\r\n    bg: colors.white,\r\n    textPrimary: colors.black,\r\n    textSecondary: colors.gray,\r\n    shadow: colors.lightBlue,\r\n    closeButton: {\r\n      bg: colors.lightBlue,\r\n      text: colors.blue\r\n    }\r\n  },\r\n  spinner: {\r\n    bg: colors.lightest,\r\n    text: colors.blue,\r\n    loaderFg: colors.blue,\r\n    loaderBg: colors.lightBlue\r\n  },\r\n  form: {\r\n    bg: colors.white,\r\n    headingText: colors.gray,\r\n    text: colors.gray,\r\n    field: {\r\n      icon: colors.gray,\r\n      text: colors.gray,\r\n      bg: colors.lightest,\r\n      placeholder: colors.littleLightGray,\r\n      focusBorder: colors.blue\r\n    },\r\n    error: {\r\n      bg: colors.lightRed,\r\n      text: colors.red,\r\n      placeholder: colors.littleLightRed\r\n    }\r\n  },\r\n  button: {\r\n    text: colors.white,\r\n    bg: colors.blue,\r\n    bgDisabled: colors.lightBlue\r\n  },\r\n  link: {\r\n    bg: colors.lightBlue,\r\n    text: colors.blue\r\n  }\r\n}\r\n\r\n//--DARK--//\r\nexport const dark = {\r\n  name: 'dark',\r\n  bg: colors.littleDarkerBlack,\r\n  text: colors.white,\r\n  scrollbar: {\r\n    bg: colors.lightGray,\r\n    fg: colors.littleLighterGray,\r\n    fgHover: colors.littleLightGray\r\n  },\r\n  sidePanel: {\r\n    bg: colors.darkerBlack,\r\n    shadow: colors.lightBlue,\r\n    closeButton: {\r\n      bg: colors.lightBlue,\r\n      text: colors.blue\r\n    }\r\n  },\r\n  message: {\r\n    textPrimary: colors.white,\r\n    textSecondary: colors.lightWhite\r\n  },\r\n  messages: {\r\n    bg: colors.darkerBlack,\r\n    placeholder: colors.lightWhite\r\n  },\r\n  typingUsers: {\r\n    itemBg: colors.littleDarkerBlack,\r\n    dot: colors.lightWhite,\r\n    text: colors.lightWhite\r\n  },\r\n  messageInput: {\r\n    bg: colors.darkerBlack,\r\n    attachFg: colors.lightWhite,\r\n    emojiBg: colors.lightYellow,\r\n    sendBg: colors.lightBlue,\r\n    sendFg: colors.blue,\r\n    placeholder: colors.lightWhite,\r\n    text: colors.white,\r\n    outline: colors.blue,\r\n    errorBg: colors.lightRed,\r\n    progress: colors.lightGreen\r\n  },\r\n  channelHeader: {\r\n    bg: colors.darkerBlack,\r\n    text: colors.white,\r\n    starIcon: colors.yellow,\r\n    sidebarIcon: colors.blue,\r\n    infoIcon: colors.blue,\r\n    search: {\r\n      text: colors.white,\r\n      placeholder: colors.littleWhite,\r\n      bg: colors.littleDarkerBlack\r\n    },\r\n    status: {\r\n      online: colors.green,\r\n      offline: colors.red,\r\n      away: colors.yellow\r\n    }\r\n  },\r\n  userStatusCard: {\r\n    bg: colors.blue,\r\n    text: colors.white,\r\n    subText: colors.lightest,\r\n    icon: colors.lightest,\r\n    optionBg: colors.veryLightWhite,\r\n    statusColors: {\r\n      online: colors.pastelGreen,\r\n      offline: colors.red,\r\n      away: colors.yellow\r\n    },\r\n    modal: {\r\n      bg: colors.lightBlue,\r\n      modalBg: colors.darkerBlack,\r\n      textPrimary: colors.blue,\r\n      textSecondary: colors.littleDarkerBlack,\r\n      buttonPrimary: colors.blue,\r\n      buttonSeconday: colors.littleDarkerBlack\r\n    }\r\n  },\r\n  starred: {\r\n    bg: colors.lightYellow,\r\n    text: colors.yellow,\r\n    hover: colors.lightYellow,\r\n    icon: colors.yellow\r\n  },\r\n  channels: {\r\n    bg: colors.lightBlue,\r\n    text: colors.blue,\r\n    hover: colors.lightBlue,\r\n    icon: colors.blue,\r\n    modal: {\r\n      bg: colors.lightBlue,\r\n      modalBg: colors.darkerBlack,\r\n      textPrimary: colors.blue,\r\n      textSecondary: colors.littleDarkerBlack,\r\n      buttonPrimary: colors.littleDarkerBlack,\r\n      buttonSeconday: colors.littleDarkerBlack\r\n    },\r\n    notificationsBg: colors.white,\r\n    notificationsFg: colors.blue\r\n  },\r\n  directMessages: {\r\n    bg: colors.lightBlue,\r\n    text: colors.blue,\r\n    hover: colors.lightBlue,\r\n    icon: colors.blue,\r\n    status: {\r\n      online: colors.green,\r\n      offline: colors.red,\r\n      away: colors.yellow\r\n    }\r\n  },\r\n  meta: {\r\n    bg: colors.darkerBlack,\r\n    textPrimary: colors.white,\r\n    textSecondary: colors.lightWhite,\r\n    shadow: colors.lightBlue,\r\n    closeButton: {\r\n      bg: colors.lightBlue,\r\n      text: colors.blue\r\n    }\r\n  },\r\n  spinner: {\r\n    bg: colors.littleDarkerBlack,\r\n    text: colors.blue,\r\n    loaderFg: colors.blue,\r\n    loaderBg: colors.lightBlue\r\n  },\r\n  form: {\r\n    bg: colors.darkerBlack,\r\n    headingText: colors.white,\r\n    text: colors.white,\r\n    field: {\r\n      icon: colors.white,\r\n      text: colors.white,\r\n      bg: colors.littleDarkerBlack,\r\n      placeholder: colors.gray,\r\n      focusBorder: colors.blue\r\n    },\r\n    error: {\r\n      bg: colors.lightRed,\r\n      text: colors.red,\r\n      placeholder: colors.littleLightRed\r\n    }\r\n  },\r\n  button: {\r\n    text: colors.darkerBlack,\r\n    bg: colors.blue,\r\n    bgDisabled: colors.lightBlue\r\n  },\r\n  link: {\r\n    bg: colors.lightBlue,\r\n    text: colors.blue\r\n  }\r\n}\r\n\r\n//--DEFAULT EXPORT--//\r\nexport default {\r\n  light,\r\n  dark\r\n}\r\n","import themes from './theme.data'\r\n\r\nimport ThemeActionTypes from './theme.types'\r\n\r\nconst INITIAL_STATE = {\r\n  currentTheme: themes['light']\r\n}\r\n\r\nconst themeReducer = (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case ThemeActionTypes.SET_THEME:\r\n      return {\r\n        ...state,\r\n        currentTheme: themes[action.payload]\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default themeReducer\r\n","import UserActionTypes from './user.types'\r\n\r\nconst INITIAL_STATE = {\r\n  currentUser: null,\r\n  isLoading: true,\r\n  status: 'online'\r\n}\r\n\r\nconst userReducer = (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case UserActionTypes.SET_USER_IS_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: action.payload\r\n      }\r\n    case UserActionTypes.CLEAR_CURRENT_USER:\r\n      return {\r\n        ...state,\r\n        currentUser: null,\r\n        isLoading: false\r\n      }\r\n    case UserActionTypes.SET_CURRENT_USER:\r\n      return {\r\n        ...state,\r\n        currentUser: action.payload,\r\n        isLoading: false\r\n      }\r\n    case UserActionTypes.SET_USER_STATUS:\r\n      return {\r\n        ...state,\r\n        status: action.payload\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default userReducer\r\n","import ChatActionTypes from './chat.types'\r\n\r\nconst INITIAL_STATE = {\r\n  currentChannel: null,\r\n  channels: null,\r\n  channelMembers: 0,\r\n  messageSearchFilters: {\r\n    text: ''\r\n  },\r\n  isPrivateChannel: false,\r\n  otherUsersStatus: {},\r\n  starredChannels: null,\r\n  // for small screens\r\n  sidebarShowing: false,\r\n  metaShowing: false\r\n}\r\n\r\nconst chatReducer = (state = INITIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case ChatActionTypes.SET_CHANNELS:\r\n      return {\r\n        ...state,\r\n        channels: action.payload\r\n      }\r\n    case ChatActionTypes.SET_CURRENT_CHANNEL:\r\n      return {\r\n        ...state,\r\n        currentChannel: action.payload\r\n      }\r\n    case ChatActionTypes.UPDATE_CHANNEL_MEMBERS:\r\n      return {\r\n        ...state,\r\n        channelMembers: action.payload\r\n      }\r\n    case ChatActionTypes.SET_MESSAGE_SEARCH_FILTERS:\r\n      return {\r\n        ...state,\r\n        messageSearchFilters: {\r\n          ...state.messageSearchFilters,\r\n          ...action.payload\r\n        }\r\n      }\r\n    case ChatActionTypes.SET_PRIVATE_CHANNEL:\r\n      return {\r\n        ...state,\r\n        isPrivateChannel: action.payload\r\n      }\r\n    case ChatActionTypes.SET_OTHER_USERS_STATUS:\r\n      return {\r\n        ...state,\r\n        otherUsersStatus: action.payload\r\n      }\r\n    case ChatActionTypes.SET_STARRED_CHANNELS:\r\n      return {\r\n        ...state,\r\n        starredChannels: action.payload\r\n      }\r\n    case ChatActionTypes.TOGGLE_SIDEBAR: {\r\n      const toggled =\r\n        action.payload !== undefined ? action.payload : !state.sidebarShowing\r\n      return {\r\n        ...state,\r\n        sidebarShowing: toggled\r\n      }\r\n    }\r\n    case ChatActionTypes.TOGGLE_META: {\r\n      const toggled =\r\n        action.payload !== undefined ? action.payload : !state.metaShowing\r\n      return {\r\n        ...state,\r\n        metaShowing: toggled\r\n      }\r\n    }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default chatReducer\r\n","import { combineReducers } from 'redux'\r\n\r\nimport themeReducer from './theme/theme.reducer'\r\nimport userReducer from './user/user.reducer'\r\nimport chatReducer from './chat/chat.reducer'\r\n\r\nconst rootReducer = combineReducers({\r\n  theme: themeReducer,\r\n  user: userReducer,\r\n  chat: chatReducer\r\n})\r\n\r\nexport default rootReducer\r\n","export const getChannelsWithStarred = (channels, starred) => {\r\n  if (starred !== undefined) {\r\n    channels.map(channel => {\r\n      if (starred.includes(channel.id)) {\r\n        channel.starred = true\r\n      } else {\r\n        channel.starred = false\r\n      }\r\n\r\n      return channel\r\n    })\r\n  }\r\n\r\n  return [...channels]\r\n}\r\n","import { takeLatest, all, call, select, put } from 'redux-saga/effects'\r\n\r\nimport ChatActionTypes from './chat.types'\r\n\r\nimport { getChannelsWithStarred } from './chat.utils'\r\n\r\nimport { selectChannels, selectCurrentChannel } from './chat.selectors'\r\nimport { setChannels, setCurrentChannel } from './chat.actions'\r\n\r\nfunction* updateChannelsAfterStarred({ payload }) {\r\n  const starred = payload\r\n  const channels = yield select(selectChannels)\r\n  const channelsWithStarred = getChannelsWithStarred(channels, starred)\r\n\r\n  // update channels to have starred property\r\n  yield put(setChannels(channelsWithStarred))\r\n  // update current channel to have starred property\r\n  let currentChannel = yield select(selectCurrentChannel)\r\n  if (starred) {\r\n    if (starred.includes(currentChannel.id)) {\r\n      currentChannel = { ...currentChannel, starred: true }\r\n    } else {\r\n      currentChannel = { ...currentChannel, starred: false }\r\n    }\r\n    yield put(setCurrentChannel(currentChannel))\r\n  }\r\n}\r\n\r\nexport function* onSetCurrentChannel() {\r\n  yield takeLatest(\r\n    ChatActionTypes.SET_STARRED_CHANNELS,\r\n    updateChannelsAfterStarred\r\n  )\r\n}\r\n\r\nexport function* chatSagas() {\r\n  yield all([call(onSetCurrentChannel)])\r\n}\r\n","import { all, call } from 'redux-saga/effects'\r\n\r\nimport { chatSagas } from './chat/chat.sagas'\r\n\r\nexport default function* rootSaga() {\r\n  yield all([call(chatSagas)])\r\n}\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport logger from 'redux-logger'\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport createSagaMiddleware from 'redux-saga'\r\n\r\nimport rootReducer from './root.reducer'\r\nimport rootSaga from './root.saga'\r\n\r\nconst sagaMiddleware = createSagaMiddleware()\r\n\r\nconst middlewares = [sagaMiddleware]\r\n\r\nif (process.env.NODE_ENV === 'development') middlewares.push(logger)\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(...middlewares))\r\n)\r\n\r\nsagaMiddleware.run(rootSaga)\r\n\r\nexport default store\r\n","import React from 'react'\nimport { connect, Provider } from 'react-redux'\nimport { createStructuredSelector } from 'reselect'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport App from './pages/app/app.component'\nimport * as serviceWorker from './serviceWorker'\nimport { auth } from './firebase/firebase.utils'\n\nimport CustomThemeProvider from './components/custom-theme-provider/custom-theme-provider.component'\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  withRouter\n} from 'react-router-dom'\nimport RegisterPage from './pages/register/register.component'\nimport LoginPage from './pages/login/login.component'\n\nimport store from './redux/store'\n\nimport { setCurrentUser, clearCurrentUser } from './redux/user/user.actions'\nimport { selectUserIsLoading } from './redux/user/user.selectors'\n\nimport Spinner from './components/spinner/spinner.component'\n\nclass Root extends React.Component {\n  unsubscribeFromAuth = null\n\n  componentDidMount() {\n    const { history, setCurrentUser, clearCurrentUser } = this.props\n\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(user => {\n      if (user) {\n        setCurrentUser(user)\n        history.push('/')\n      } else {\n        history.push('/login')\n        clearCurrentUser()\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth()\n  }\n\n  render() {\n    const { isLoading } = this.props\n\n    return isLoading ? (\n      <Spinner />\n    ) : (\n      <Switch>\n        <Route exact path=\"/\" component={App} />\n        <Route exact path=\"/register\" component={RegisterPage} />\n        <Route exact path=\"/login\" component={LoginPage} />\n      </Switch>\n    )\n  }\n}\n\nconst mapStateToProps = createStructuredSelector({\n  isLoading: selectUserIsLoading\n})\n\nconst mapDispatchToProps = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user)),\n  clearCurrentUser: () => dispatch(clearCurrentUser())\n})\n\nconst RootWithRouter = withRouter(\n  connect(mapStateToProps, mapDispatchToProps)(Root)\n)\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <CustomThemeProvider>\n        <Router basename=\"/\">\n          <RootWithRouter />\n        </Router>\n      </CustomThemeProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}